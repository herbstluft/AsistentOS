import{d as X,e as u,g as $,f as E,b as d,o as l,i as a,u as n,x as P,w as S,a as e,c as B,j as y,t as p,p as k,v as C,F as j,r as R,l as z,z as U,T as q,k as A}from"./app-DCCNdGM7.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-DknMSk7r.js";import{u as G,F as M,S as H,T as I,a as J,X as Q}from"./AppSidebarLayout.vue_vue_type_style_index_0_lang-D5E8iXr7.js";import{P as W}from"./plus-DVUrVfrw.js";import{P as Y,S as Z}from"./save-p343iL0O.js";import"./index-BepDuGHz.js";import"./useForwardExpose-B7KGuOhh.js";import"./VisuallyHidden-DBs5sjsU.js";import"./RovingFocusGroup-DHsfSiq9.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-D8epRZCQ.js";import"./index-CMWG4mbA.js";import"./createLucideIcon-GajpaDFW.js";import"./log-out-DvDjCZxQ.js";import"./zap-CvKH04Iu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-CNyGcmTX.js";import"./lock-DWgqKGxe.js";import"./arrow-right-D2zYUBdw.js";const ee={class:"min-h-full w-full bg-background text-foreground p-6 md:p-10 relative overflow-hidden"},te={class:"max-w-7xl mx-auto relative z-10 flex flex-col gap-8 h-full"},oe={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},se={class:"text-3xl font-light tracking-tight text-foreground flex items-center gap-2"},ae={class:"text-muted-foreground mt-1"},re={class:"flex items-center gap-3 w-full md:w-auto"},ne={class:"relative flex-1 md:w-64"},le={key:0,class:"flex items-center justify-center py-20"},ie={key:1,class:"flex flex-col items-center justify-center py-20 text-center opacity-50"},de={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20"},ce={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},ue=["onClick"],pe=["onClick"],fe={class:"mb-4"},me={class:"text-[10px] uppercase tracking-wider text-muted-foreground font-medium flex items-center gap-1 mb-2"},ge=["onClick"],ve=["onClick"],xe={class:"text-sm text-muted-foreground font-light leading-relaxed whitespace-pre-line line-clamp-6"},he={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},be={class:"relative w-full max-w-2xl bg-background border border-border rounded-2xl shadow-2xl flex flex-col max-h-[90vh]"},we={class:"p-6 border-b border-border flex justify-between items-center bg-muted/30"},_e={class:"text-xl font-light text-foreground"},ye={class:"p-6 overflow-y-auto flex-1 flex flex-col gap-4"},ke={class:"p-6 border-t border-border flex justify-end gap-3 bg-muted/30"},Ae=X({__name:"Notes",setup(Ce){const f=u([]),w=u(!0),g=u(""),v=u(!1),c=u(!1),r=u({title:"",content:""}),{speak:x}=G(),N=async()=>{w.value=!0;try{const s=await fetch("/api/notes",{headers:{Accept:"application/json"}});s.ok&&(f.value=await s.json())}catch(s){console.error("Error fetching notes",s)}finally{w.value=!1}};$(()=>{N()});const h=E(()=>{if(!g.value)return f.value;const s=g.value.toLowerCase();return f.value.filter(t=>t.title.toLowerCase().includes(s)||t.content.toLowerCase().includes(s))}),F=E(()=>h.value.length===1?"nota guardada":"notas guardadas"),T=()=>{r.value={title:"",content:""},c.value=!1,v.value=!0},_=s=>{r.value={id:s.id,title:s.title,content:s.content},c.value=!0,v.value=!0},b=()=>{v.value=!1,r.value={title:"",content:""}},L=async()=>{if(!r.value.title.trim()||!r.value.content.trim())return;const s=()=>{const t=document.cookie.split(";");for(let o of t){const[m,i]=o.trim().split("=");if(m==="XSRF-TOKEN")return decodeURIComponent(i)}return""};try{const t=c.value?`/api/notes/${r.value.id}`:"/api/notes",o=c.value?"PUT":"POST",m=await fetch(t,{method:o,headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":s()},body:JSON.stringify(r.value)});if(m.ok)await N(),b(),x(c.value?"Nota actualizada.":"Nueva nota creada.");else{const i=await m.json();console.error("Error saving note:",i),x("No pude guardar la nota. Verificando credenciales.")}}catch(t){console.error(t),x("Hubo un error de conexión al guardar la nota.")}},V=async s=>{if(confirm("¿Estás seguro de eliminar esta nota?"))try{(await fetch(`/api/notes/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).ok&&(f.value=f.value.filter(o=>o.id!==s),x("Nota eliminada."))}catch(t){console.error(t)}},D=s=>new Date(s).toLocaleDateString("es-MX",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=[{title:"Dashboard",href:"/dashboard"},{title:"Notas",href:"/notes"}];return(s,t)=>(l(),d(j,null,[a(n(P),{title:"Mis Notas"}),a(K,{breadcrumbs:O},{default:S(()=>[e("div",ee,[e("div",te,[e("div",oe,[e("div",null,[e("h1",se,[a(n(M),{class:"w-8 h-8 text-indigo-500"}),t[3]||(t[3]=y(" Mis Notas ",-1))]),e("p",ae,p(h.value.length)+" "+p(F.value),1)]),e("div",re,[e("div",ne,[a(n(H),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),placeholder:"Buscar notas...",class:"w-full bg-card/50 border border-border rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all font-light"},null,512),[[C,g.value]])]),e("button",{onClick:T,class:"bg-indigo-600 hover:bg-indigo-700 text-white p-2.5 rounded-xl shadow-lg transition-colors flex items-center gap-2 pr-4"},[a(n(W),{class:"w-5 h-5"}),t[4]||(t[4]=e("span",{class:"font-medium text-sm"},"Crear",-1))])])]),w.value?(l(),d("div",le,[...t[5]||(t[5]=[e("div",{class:"text-muted-foreground"},"Cargando tus notas...",-1)])])):h.value.length===0?(l(),d("div",ie,[a(n(M),{class:"w-16 h-16 text-muted-foreground mb-4 opacity-20"}),t[6]||(t[6]=e("p",{class:"text-lg font-light text-muted-foreground"},"No hay notas que mostrar.",-1)),e("button",{onClick:T,class:"mt-4 text-indigo-500 hover:underline"},"Crear la primera nota")])):(l(),d("div",de,[(l(!0),d(j,null,R(h.value,(o,m)=>(l(),d("div",{key:o.id,class:"group relative bg-card/80 hover:bg-card border border-border rounded-2xl p-6 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col h-[280px]"},[e("div",ce,[e("button",{onClick:z(i=>_(o),["stop"]),class:"p-1.5 rounded-full bg-zinc-100 dark:bg-zinc-800 hover:text-indigo-500 text-zinc-500 transition-colors shadow-sm"},[a(n(Y),{class:"w-3.5 h-3.5"})],8,ue),e("button",{onClick:z(i=>V(o.id),["stop"]),class:"p-1.5 rounded-full bg-zinc-100 dark:bg-zinc-800 hover:text-red-500 text-zinc-500 transition-colors shadow-sm"},[a(n(I),{class:"w-3.5 h-3.5"})],8,pe)]),e("div",fe,[e("span",me,[a(n(J),{class:"w-3 h-3"}),y(" "+p(D(o.created_at)),1)]),e("h3",{class:"text-xl font-medium text-foreground line-clamp-2 leading-tight group-hover:text-indigo-500 transition-colors cursor-pointer",onClick:i=>_(o)},p(o.title),9,ge)]),e("div",{class:"flex-1 overflow-hidden relative cursor-pointer",onClick:i=>_(o)},[e("p",xe,p(o.content),1),t[7]||(t[7]=e("div",{class:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-card to-transparent"},null,-1))],8,ve)]))),128))]))])]),(l(),B(U,{to:"body"},[a(q,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:S(()=>[v.value?(l(),d("div",he,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:b}),e("div",be,[e("div",we,[e("h3",_e,p(c.value?"Editar Nota":"Nueva Nota"),1),e("button",{onClick:b,class:"p-2 rounded-full hover:bg-muted text-muted-foreground transition-colors"},[a(n(Q),{class:"w-5 h-5"})])]),e("div",ye,[k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.value.title=o),placeholder:"Título de la nota...",class:"text-2xl font-medium bg-transparent border-none focus:ring-0 placeholder:text-muted-foreground/50 w-full p-0"},null,512),[[C,r.value.title]]),k(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value.content=o),placeholder:"Escribe aquí...",class:"flex-1 min-h-[300px] resize-none bg-transparent border-none focus:ring-0 text-base leading-relaxed font-light placeholder:text-muted-foreground/50 p-0"},null,512),[[C,r.value.content]])]),e("div",ke,[e("button",{onClick:b,class:"px-4 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors"},"Cancelar"),e("button",{onClick:L,class:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg transition-all active:scale-95 flex items-center gap-2"},[a(n(Z),{class:"w-4 h-4"}),t[8]||(t[8]=y(" Guardar ",-1))])])])])):A("",!0)]),_:1})]))]),_:1})],64))}});export{Ae as default};
