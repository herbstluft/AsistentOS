const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-DSNAiotO.js","assets/app-DCCNdGM7.js","assets/app-SLpTo-MS.css"])))=>i.map(i=>d[i]);
import{P as ue,c as se,a as Pn,_ as dt,u as ra}from"./index-BepDuGHz.js";import{f as B,e as x,s as ge,M as Me,a3 as Re,h as Qe,g as ve,d as k,a2 as vt,L as T,u as a,c as E,o as g,w as m,K as F,a4 as St,a5 as $n,A as Dt,i as v,k as le,z as Ho,a0 as we,a1 as qe,p as Jt,W as ia,a6 as In,b as $,a7 as la,a8 as ua,a9 as ca,aa as lt,ab as da,ac as pa,ad as fa,ae as ha,af as Bn,ag as ma,ah as ga,ai as pn,aj as va,ak as ya,al as _a,am as ba,l as ye,q as Yt,G as Ln,an as wa,ao as xa,j as fe,t as X,y as Rt,ap as Ea,a as y,n as re,F as Pe,m as Ee,N as go,v as No,r as ot,Z as Ge,E as nt,H as ft,O as Ca,aq as xt,B as ka,P as Oe,ar as Fn,as as Sa,Q as Ta,at as Oa,au as Aa,av as Da,T as Ra}from"./app-DCCNdGM7.js";import{d as Un,e as qa,i as st,f as fn,g as ht,h as zn,j as Na,a as jn,u as qt,b as H,o as Ma,k as Pa,l as $a,m as Ia,n as Vn,r as Nt,p as Ba}from"./useForwardExpose-B7KGuOhh.js";import{i as La,g as De,c as Be,e as eo,a as Kn,u as Te,V as Fa,d as to}from"./VisuallyHidden-DBs5sjsU.js";import{u as mt,P as oo,R as Ua,a as za}from"./RovingFocusGroup-DHsfSiq9.js";import{u as ja}from"./useArrowNavigation-C6Y-ieo6.js";import{a as Va,d as hn}from"./index-D8epRZCQ.js";import{q as Wo}from"./index-CMWG4mbA.js";import{c as J}from"./createLucideIcon-GajpaDFW.js";import{L as Ka}from"./log-out-DvDjCZxQ.js";import{Z as Mo}from"./zap-CvKH04Iu.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{U as Ha}from"./user-CNyGcmTX.js";import{L as Wa}from"./lock-DWgqKGxe.js";import{A as Ga}from"./arrow-right-D2zYUBdw.js";function Hn(o,e,t){const n=t.originalEvent.target,s=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:t});e&&n.addEventListener(o,e,{once:!0}),n.dispatchEvent(s)}function vo(o){if(o===null||typeof o!="object")return!1;const e=Object.getPrototypeOf(o);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in o?!1:Symbol.toStringTag in o?Object.prototype.toString.call(o)==="[object Module]":!0}function Po(o,e,t=".",n){if(!vo(e))return Po(o,{},t,n);const s=Object.assign({},e);for(const r in o){if(r==="__proto__"||r==="constructor")continue;const l=o[r];l!=null&&(n&&n(s,r,l,t)||(Array.isArray(l)&&Array.isArray(s[r])?s[r]=[...l,...s[r]]:vo(l)&&vo(s[r])?s[r]=Po(l,s[r],(t?`${t}.`:"")+r.toString(),n):s[r]=l))}return s}function Xa(o){return(...e)=>e.reduce((t,n)=>Po(t,n,"",o),{})}const Ja=Xa(),Ya=Un(()=>{const o=x(new Map),e=x(),t=B(()=>{for(const l of o.value.values())if(l)return!0;return!1}),n=La({scrollBody:x(!0)});let s=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",fn&&s?.(),e.value=void 0};return ge(t,(l,c)=>{if(!st)return;if(!l){c&&r();return}e.value===void 0&&(e.value=document.body.style.overflow);const i=window.innerWidth-document.documentElement.clientWidth,d={padding:i,margin:0},u=n.scrollBody?.value?typeof n.scrollBody.value=="object"?Ja({padding:n.scrollBody.value.padding===!0?i:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?i:n.scrollBody.value.margin},d):d:{padding:0,margin:0};i>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${i}px`),document.body.style.overflow="hidden"),fn&&(s=ht(document,"touchmove",p=>Qa(p),{passive:!1})),Me(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),o});function Wn(o){const e=Math.random().toString(36).substring(2,7),t=Ya();t.value.set(e,o??!1);const n=B({get:()=>t.value.get(e)??!1,set:s=>t.value.set(e,s)});return qa(()=>{t.value.delete(e)}),n}function Gn(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const t=o.parentNode;return!(t instanceof Element)||t.tagName==="BODY"?!1:Gn(t)}}function Qa(o){const e=o||window.event,t=e.target;return t instanceof Element&&Gn(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}let yo=0;function Za(){Re(o=>{if(!st)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??mn()),document.body.insertAdjacentElement("beforeend",e[1]??mn()),yo++,o(()=>{yo===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(t=>t.remove()),yo--})})}function mn(){const o=document.createElement("span");return o.setAttribute("data-reka-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}function er(o,e){const t=zn(!1,300),n=x(null),s=Na();function r(){n.value=null,t.value=!1}function l(c,i){const d=c.currentTarget,u={x:c.clientX,y:c.clientY},p=tr(u,d.getBoundingClientRect()),h=or(u,p),_=nr(i.getBoundingClientRect()),b=ar([...h,..._]);n.value=b,t.value=!0}return Re(c=>{if(o.value&&e.value){const i=u=>l(u,e.value),d=u=>l(u,o.value);o.value.addEventListener("pointerleave",i),e.value.addEventListener("pointerleave",d),c(()=>{o.value?.removeEventListener("pointerleave",i),e.value?.removeEventListener("pointerleave",d)})}}),Re(c=>{if(n.value){const i=d=>{if(!n.value||!(d.target instanceof HTMLElement))return;const u=d.target,p={x:d.clientX,y:d.clientY},h=o.value?.contains(u)||e.value?.contains(u),_=!sr(p,n.value),b=!!u.closest("[data-grace-area-trigger]");h?r():(_||b)&&(r(),s.trigger())};o.value?.ownerDocument.addEventListener("pointermove",i),c(()=>o.value?.ownerDocument.removeEventListener("pointermove",i))}}),{isPointerInTransit:t,onPointerExit:s.on}}function tr(o,e){const t=Math.abs(e.top-o.y),n=Math.abs(e.bottom-o.y),s=Math.abs(e.right-o.x),r=Math.abs(e.left-o.x);switch(Math.min(t,n,s,r)){case r:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function or(o,e,t=5){const n=[];switch(e){case"top":n.push({x:o.x-t,y:o.y+t},{x:o.x+t,y:o.y+t});break;case"bottom":n.push({x:o.x-t,y:o.y-t},{x:o.x+t,y:o.y-t});break;case"left":n.push({x:o.x+t,y:o.y-t},{x:o.x+t,y:o.y+t});break;case"right":n.push({x:o.x-t,y:o.y-t},{x:o.x-t,y:o.y+t});break}return n}function nr(o){const{top:e,right:t,bottom:n,left:s}=o;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function sr(o,e){const{x:t,y:n}=o;let s=!1;for(let r=0,l=e.length-1;r<e.length;l=r++){const c=e[r].x,i=e[r].y,d=e[l].x,u=e[l].y;i>n!=u>n&&t<(d-c)*(n-i)/(u-i)+c&&(s=!s)}return s}function ar(o){const e=o.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),rr(e)}function rr(o){if(o.length<=1)return o.slice();const e=[];for(let n=0;n<o.length;n++){const s=o[n];for(;e.length>=2;){const r=e[e.length-1],l=e[e.length-2];if((r.x-l.x)*(s.y-l.y)>=(r.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=o.length-1;n>=0;n--){const s=o[n];for(;t.length>=2;){const r=t[t.length-1],l=t[t.length-2];if((r.x-l.x)*(s.y-l.y)>=(r.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ir=function(o){if(typeof document>"u")return null;var e=Array.isArray(o)?o[0]:o;return e.ownerDocument.body},ut=new WeakMap,Lt=new WeakMap,Ft={},_o=0,Xn=function(o){return o&&(o.host||Xn(o.parentNode))},lr=function(o,e){return e.map(function(t){if(o.contains(t))return t;var n=Xn(t);return n&&o.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",o,". Doing nothing"),null)}).filter(function(t){return!!t})},ur=function(o,e,t,n){var s=lr(e,Array.isArray(o)?o:[o]);Ft[t]||(Ft[t]=new WeakMap);var r=Ft[t],l=[],c=new Set,i=new Set(s),d=function(p){!p||c.has(p)||(c.add(p),d(p.parentNode))};s.forEach(d);var u=function(p){!p||i.has(p)||Array.prototype.forEach.call(p.children,function(h){if(c.has(h))u(h);else try{var _=h.getAttribute(n),b=_!==null&&_!=="false",O=(ut.get(h)||0)+1,q=(r.get(h)||0)+1;ut.set(h,O),r.set(h,q),l.push(h),O===1&&b&&Lt.set(h,!0),q===1&&h.setAttribute(t,"true"),b||h.setAttribute(n,"true")}catch(M){console.error("aria-hidden: cannot operate on ",h,M)}})};return u(e),c.clear(),_o++,function(){l.forEach(function(p){var h=ut.get(p)-1,_=r.get(p)-1;ut.set(p,h),r.set(p,_),h||(Lt.has(p)||p.removeAttribute(n),Lt.delete(p)),_||p.removeAttribute(t)}),_o--,_o||(ut=new WeakMap,ut=new WeakMap,Lt=new WeakMap,Ft={})}},cr=function(o,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(o)?o:[o]),s=ir(o);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),ur(n,s,t,"aria-hidden")):function(){return null}};function Jn(o){let e;ge(()=>jn(o),t=>{t?e=cr(t):e&&e()}),Qe(()=>{e&&e()})}function dr(o){const e=x(),t=B(()=>e.value?.width??0),n=B(()=>e.value?.height??0);return ve(()=>{const s=jn(o);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const r=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let i,d;if("borderBoxSize"in c){const u=c.borderBoxSize,p=Array.isArray(u)?u[0]:u;i=p.inlineSize,d=p.blockSize}else i=s.offsetWidth,d=s.offsetHeight;e.value={width:i,height:d}});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else e.value=void 0}),{width:t,height:n}}function pr(o){const e=zn("",1e3);return{search:e,handleTypeaheadSearch:(s,r)=>{e.value=e.value+s;{const l=De(),c=r.map(h=>({...h,textValue:h.value?.textValue??h.ref.textContent?.trim()??""})),i=c.find(h=>h.ref===l),d=c.map(h=>h.textValue),u=hr(d,e.value,i?.textValue),p=c.find(h=>h.textValue===u);return p&&p.ref.focus(),p?.ref}},resetTypeahead:()=>{e.value=""}}}function fr(o,e){return o.map((t,n)=>o[(e+n)%o.length])}function hr(o,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,r=t?o.indexOf(t):-1;let l=fr(o,Math.max(r,0));s.length===1&&(l=l.filter(d=>d!==t));const i=l.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return i!==t?i:void 0}const[Ke,mr]=Be("DialogRoot");var gr=k({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(o,{emit:e}){const t=o,s=qt(t,"open",e,{defaultValue:t.defaultOpen,passive:t.open===void 0}),r=x(),l=x(),{modal:c}=vt(t);return mr({open:s,modal:c,openModal:()=>{s.value=!0},onOpenChange:i=>{s.value=i},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:l}),(i,d)=>T(i.$slots,"default",{open:a(s),close:()=>s.value=!1})}}),Yn=gr,vr=k({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const e=o;H();const t=Ke();return(n,s)=>(g(),E(a(ue),F(e,{type:n.as==="button"?"button":void 0,onClick:s[0]||(s[0]=r=>a(t).onOpenChange(!1))}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["type"]))}}),Qn=vr;const yr="dismissableLayer.pointerDownOutside",_r="dismissableLayer.focusOutside";function Zn(o,e){const t=e.closest("[data-dismissable-layer]"),n=o.dataset.dismissableLayer===""?o:o.querySelector("[data-dismissable-layer]"),s=Array.from(o.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(n===t||s.indexOf(n)<s.indexOf(t)))}function br(o,e,t=!0){const n=e?.value?.ownerDocument??globalThis?.document,s=x(!1),r=x(()=>{});return Re(l=>{if(!st||!St(t))return;const c=async d=>{const u=d.target;if(!(!e?.value||!u)){if(Zn(e.value,u)){s.value=!1;return}if(d.target&&!s.value){let h=function(){Hn(yr,o,p)};const p={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",r.value),r.value=h,n.addEventListener("click",r.value,{once:!0})):h()}else n.removeEventListener("click",r.value);s.value=!1}},i=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);l(()=>{window.clearTimeout(i),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{St(t)&&(s.value=!0)}}}function wr(o,e,t=!0){const n=e?.value?.ownerDocument??globalThis?.document,s=x(!1);return Re(r=>{if(!st||!St(t))return;const l=async c=>{if(!e?.value)return;await Me(),await Me();const i=c.target;!e.value||!i||Zn(e.value,i)||c.target&&!s.value&&Hn(_r,o,{originalEvent:c})};n.addEventListener("focusin",l),r(()=>n.removeEventListener("focusin",l))}),{onFocusCapture:()=>{St(t)&&(s.value=!0)},onBlurCapture:()=>{St(t)&&(s.value=!1)}}}const He=$n({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var xr=k({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(o,{emit:e}){const t=o,n=e,{forwardRef:s,currentElement:r}=H(),l=B(()=>r.value?.ownerDocument??globalThis.document),c=B(()=>He.layersRoot),i=B(()=>r.value?Array.from(c.value).indexOf(r.value):-1),d=B(()=>He.layersWithOutsidePointerEventsDisabled.size>0),u=B(()=>{const b=Array.from(c.value),[O]=[...He.layersWithOutsidePointerEventsDisabled].slice(-1),q=b.indexOf(O);return i.value>=q}),p=br(async b=>{const O=[...He.branches].some(q=>q?.contains(b.target));!u.value||O||(n("pointerDownOutside",b),n("interactOutside",b),await Me(),b.defaultPrevented||n("dismiss"))},r),h=wr(b=>{[...He.branches].some(q=>q?.contains(b.target))||(n("focusOutside",b),n("interactOutside",b),b.defaultPrevented||n("dismiss"))},r);Ma("Escape",b=>{i.value===c.value.size-1&&(n("escapeKeyDown",b),b.defaultPrevented||n("dismiss"))});let _;return Re(b=>{r.value&&(t.disableOutsidePointerEvents&&(He.layersWithOutsidePointerEventsDisabled.size===0&&(_=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),He.layersWithOutsidePointerEventsDisabled.add(r.value)),c.value.add(r.value),b(()=>{t.disableOutsidePointerEvents&&He.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=_)}))}),Re(b=>{b(()=>{r.value&&(c.value.delete(r.value),He.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(b,O)=>(g(),E(a(ue),{ref:a(s),"as-child":b.asChild,as:b.as,"data-dismissable-layer":"",style:Dt({pointerEvents:d.value?u.value?"auto":"none":void 0}),onFocusCapture:a(h).onFocusCapture,onBlurCapture:a(h).onBlurCapture,onPointerdownCapture:a(p).onPointerDownCapture},{default:m(()=>[T(b.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Go=xr;const Er=Pa(()=>x([]));function Cr(){const o=Er();return{add(e){const t=o.value[0];e!==t&&t?.pause(),o.value=gn(o.value,e),o.value.unshift(e)},remove(e){o.value=gn(o.value,e),o.value[0]?.resume()}}}function gn(o,e){const t=[...o],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function kr(o){return o.filter(e=>e.tagName!=="A")}const bo="focusScope.autoFocusOnMount",wo="focusScope.autoFocusOnUnmount",vn={bubbles:!1,cancelable:!0};function Sr(o,{select:e=!1}={}){const t=De();for(const n of o)if(Xe(n,{select:e}),De()!==t)return!0}function Tr(o){const e=es(o),t=yn(e,o),n=yn(e.reverse(),o);return[t,n]}function es(o){const e=[],t=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function yn(o,e){for(const t of o)if(!Or(t,{upTo:e}))return t}function Or(o,{upTo:e}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(e!==void 0&&o===e)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function Ar(o){return o instanceof HTMLInputElement&&"select"in o}function Xe(o,{select:e=!1}={}){if(o&&o.focus){const t=De();o.focus({preventScroll:!0}),o!==t&&Ar(o)&&e&&o.select()}}var Dr=k({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(o,{emit:e}){const t=o,n=e,{currentRef:s,currentElement:r}=H(),l=x(null),c=Cr(),i=$n({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Re(u=>{if(!st)return;const p=r.value;if(!t.trapped)return;function h(q){if(i.paused||!p)return;const M=q.target;p.contains(M)?l.value=M:Xe(l.value,{select:!0})}function _(q){if(i.paused||!p)return;const M=q.relatedTarget;M!==null&&(p.contains(M)||Xe(l.value,{select:!0}))}function b(q){p.contains(l.value)||Xe(p)}document.addEventListener("focusin",h),document.addEventListener("focusout",_);const O=new MutationObserver(b);p&&O.observe(p,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",_),O.disconnect()})}),Re(async u=>{const p=r.value;if(await Me(),!p)return;c.add(i);const h=De();if(!p.contains(h)){const b=new CustomEvent(bo,vn);p.addEventListener(bo,O=>n("mountAutoFocus",O)),p.dispatchEvent(b),b.defaultPrevented||(Sr(kr(es(p)),{select:!0}),De()===h&&Xe(p))}u(()=>{p.removeEventListener(bo,q=>n("mountAutoFocus",q));const b=new CustomEvent(wo,vn),O=q=>{n("unmountAutoFocus",q)};p.addEventListener(wo,O),p.dispatchEvent(b),setTimeout(()=>{b.defaultPrevented||Xe(h??document.body,{select:!0}),p.removeEventListener(wo,O),c.remove(i)},0)})});function d(u){if(!t.loop&&!t.trapped||i.paused)return;const p=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,h=De();if(p&&h){const _=u.currentTarget,[b,O]=Tr(_);b&&O?!u.shiftKey&&h===O?(u.preventDefault(),t.loop&&Xe(b,{select:!0})):u.shiftKey&&h===b&&(u.preventDefault(),t.loop&&Xe(O,{select:!0})):h===_&&u.preventDefault()}}return(u,p)=>(g(),E(a(ue),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:d},{default:m(()=>[T(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),ts=Dr;const Rr="menu.itemSelect",$o=["Enter"," "],qr=["ArrowDown","PageUp","Home"],os=["ArrowUp","PageDown","End"],Nr=[...qr,...os];[...$o],[...$o];function ns(o){return o?"open":"closed"}function Mr(o){const e=De();for(const t of o)if(t===e||(t.focus(),De()!==e))return}function Pr(o,e){const{x:t,y:n}=o;let s=!1;for(let r=0,l=e.length-1;r<e.length;l=r++){const c=e[r].x,i=e[r].y,d=e[l].x,u=e[l].y;i>n!=u>n&&t<(d-c)*(n-i)/(u-i)+c&&(s=!s)}return s}function $r(o,e){if(!e)return!1;const t={x:o.clientX,y:o.clientY};return Pr(t,e)}function Io(o){return o.pointerType==="mouse"}var Ir=k({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=Ke(),{forwardRef:r,currentElement:l}=H();return s.titleId||=mt(void 0,"reka-dialog-title"),s.descriptionId||=mt(void 0,"reka-dialog-description"),ve(()=>{s.contentElement=l,De()!==document.body&&(s.triggerElement.value=De())}),(c,i)=>(g(),E(a(ts),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:i[5]||(i[5]=d=>n("openAutoFocus",d)),onUnmountAutoFocus:i[6]||(i[6]=d=>n("closeAutoFocus",d))},{default:m(()=>[v(a(Go),F({id:a(s).contentId,ref:a(r),as:c.as,"as-child":c.asChild,"disable-outside-pointer-events":c.disableOutsidePointerEvents,role:"dialog","aria-describedby":a(s).descriptionId,"aria-labelledby":a(s).titleId,"data-state":a(ns)(a(s).open.value)},c.$attrs,{onDismiss:i[0]||(i[0]=d=>a(s).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=d=>n("escapeKeyDown",d)),onFocusOutside:i[2]||(i[2]=d=>n("focusOutside",d)),onInteractOutside:i[3]||(i[3]=d=>n("interactOutside",d)),onPointerDownOutside:i[4]||(i[4]=d=>n("pointerDownOutside",d))}),{default:m(()=>[T(c.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),ss=Ir,Br=k({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=Ke(),r=eo(n),{forwardRef:l,currentElement:c}=H();return Jn(c),(i,d)=>(g(),E(ss,F({...t,...a(r)},{ref:a(l),"trap-focus":a(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:d[0]||(d[0]=u=>{u.defaultPrevented||(u.preventDefault(),a(s).triggerElement.value?.focus())}),onPointerDownOutside:d[1]||(d[1]=u=>{const p=u.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0;(p.button===2||h)&&u.preventDefault()}),onFocusOutside:d[2]||(d[2]=u=>{u.preventDefault()})}),{default:m(()=>[T(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),Lr=Br,Fr=k({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,s=eo(e);H();const r=Ke(),l=x(!1),c=x(!1);return(i,d)=>(g(),E(ss,F({...t,...a(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:d[0]||(d[0]=u=>{u.defaultPrevented||(l.value||a(r).triggerElement.value?.focus(),u.preventDefault()),l.value=!1,c.value=!1}),onInteractOutside:d[1]||(d[1]=u=>{u.defaultPrevented||(l.value=!0,u.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const p=u.target;a(r).triggerElement.value?.contains(p)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&c.value&&u.preventDefault()})}),{default:m(()=>[T(i.$slots,"default")]),_:3},16))}}),Ur=Fr,zr=k({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=Ke(),r=eo(n),{forwardRef:l}=H();return(c,i)=>(g(),E(a(oo),{present:c.forceMount||a(s).open.value},{default:m(()=>[a(s).modal.value?(g(),E(Lr,F({key:0,ref:a(l)},{...t,...a(r),...c.$attrs}),{default:m(()=>[T(c.$slots,"default")]),_:3},16)):(g(),E(Ur,F({key:1,ref:a(l)},{...t,...a(r),...c.$attrs}),{default:m(()=>[T(c.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),as=zr,jr=k({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(o){const e=o;H();const t=Ke();return(n,s)=>(g(),E(a(ue),F(e,{id:a(t).descriptionId}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["id"]))}}),Vr=jr,Kr=k({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=Ke();return Wn(!0),H(),(t,n)=>(g(),E(a(ue),{as:t.as,"as-child":t.asChild,"data-state":a(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:m(()=>[T(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Hr=Kr,Wr=k({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=Ke(),{forwardRef:t}=H();return(n,s)=>a(e)?.modal.value?(g(),E(a(oo),{key:0,present:n.forceMount||a(e).open.value},{default:m(()=>[v(Hr,F(n.$attrs,{ref:a(t),as:n.as,"as-child":n.asChild}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):le("v-if",!0)}}),Gr=Wr,Xr=k({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const e=$a();return(t,n)=>a(e)||t.forceMount?(g(),E(Ho,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[T(t.$slots,"default")],8,["to","disabled","defer"])):le("v-if",!0)}}),Xo=Xr,Jr=k({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(Xo),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),rs=Jr,Yr=k({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(o){const e=o,t=Ke();return H(),(n,s)=>(g(),E(a(ue),F(e,{id:a(t).titleId}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["id"]))}}),Qr=Yr,Zr=k({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const e=o,t=Ke(),{forwardRef:n,currentElement:s}=H();return t.contentId||=mt(void 0,"reka-dialog-content"),ve(()=>{t.triggerElement.value=s.value}),(r,l)=>(g(),E(a(ue),F(e,{ref:a(n),type:r.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":a(t).open.value||!1,"aria-controls":a(t).open.value?a(t).contentId:void 0,"data-state":a(t).open.value?"open":"closed",onClick:a(t).onOpenToggle}),{default:m(()=>[T(r.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),ei=Zr;const[is,ti]=Be("AvatarRoot");var oi=k({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(o){return H(),ti({imageLoadingStatus:x("idle")}),(e,t)=>(g(),E(a(ue),{"as-child":e.asChild,as:e.as},{default:m(()=>[T(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),ni=oi,si=k({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(o){const e=o,t=is();H();const n=x(e.delayMs===void 0);return Re(s=>{if(e.delayMs&&st){const r=window.setTimeout(()=>{n.value=!0},e.delayMs);s(()=>{window.clearTimeout(r)})}}),(s,r)=>n.value&&a(t).imageLoadingStatus.value!=="loaded"?(g(),E(a(ue),{key:0,"as-child":s.asChild,as:s.as},{default:m(()=>[T(s.$slots,"default")]),_:3},8,["as-child","as"])):le("v-if",!0)}}),ai=si;function _n(o,e){return o?e?(o.src!==e&&(o.src=e),o.complete&&o.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ri(o,{referrerPolicy:e,crossOrigin:t}={}){const n=x(!1),s=x(null),r=B(()=>n.value?(!s.value&&st&&(s.value=new window.Image),s.value):null),l=x(_n(r.value,o.value)),c=i=>()=>{n.value&&(l.value=i)};return ve(()=>{n.value=!0,Re(i=>{const d=r.value;if(!d)return;l.value=_n(d,o.value);const u=c("loaded"),p=c("error");d.addEventListener("load",u),d.addEventListener("error",p),e?.value&&(d.referrerPolicy=e.value),typeof t?.value=="string"&&(d.crossOrigin=t.value),i(()=>{d.removeEventListener("load",u),d.removeEventListener("error",p)})})}),Qe(()=>{n.value=!1}),l}var ii=k({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(o,{emit:e}){const t=o,n=e,{src:s,referrerPolicy:r,crossOrigin:l}=vt(t);H();const c=is(),i=ri(s,{referrerPolicy:r,crossOrigin:l});return ge(i,d=>{n("loadingStatusChange",d),d!=="idle"&&(c.imageLoadingStatus.value=d)},{immediate:!0}),(d,u)=>Jt((g(),E(a(ue),{role:"img","as-child":d.asChild,as:d.as,src:a(s),"referrer-policy":a(r)},{default:m(()=>[T(d.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[ia,a(i)==="loaded"]])}}),li=ii;const[ls,ui]=Be("PopperRoot");var ci=k({inheritAttrs:!1,__name:"PopperRoot",setup(o){const e=x();return ui({anchor:e,onAnchorChange:t=>e.value=t}),(t,n)=>T(t.$slots,"default")}}),us=ci,di=k({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o,{forwardRef:t,currentElement:n}=H(),s=ls();return In(()=>{s.onAnchorChange(e.reference??n.value)}),(r,l)=>(g(),E(a(ue),{ref:a(t),as:r.as,"as-child":r.asChild},{default:m(()=>[T(r.$slots,"default")]),_:3},8,["as","as-child"]))}}),cs=di;const pi={key:0,d:"M0 0L6 6L12 0"},fi={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var hi=k({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(o){const e=o;return H(),(t,n)=>(g(),E(a(ue),F(e,{width:t.width,height:t.height,viewBox:t.asChild?void 0:"0 0 12 6",preserveAspectRatio:t.asChild?void 0:"none"}),{default:m(()=>[T(t.$slots,"default",{},()=>[t.rounded?(g(),$("path",fi)):(g(),$("path",pi))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),mi=hi;function gi(o){return o!==null}function vi(o){return{name:"transformOrigin",options:o,fn(e){const{placement:t,rects:n,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,c=l?0:o.arrowWidth,i=l?0:o.arrowHeight,[d,u]=Bo(t),p={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+c/2,_=(s.arrow?.y??0)+i/2;let b="",O="";return d==="bottom"?(b=l?p:`${h}px`,O=`${-i}px`):d==="top"?(b=l?p:`${h}px`,O=`${n.floating.height+i}px`):d==="right"?(b=`${-i}px`,O=l?p:`${_}px`):d==="left"&&(b=`${n.floating.width+i}px`,O=l?p:`${_}px`),{data:{x:b,y:O}}}}}function Bo(o){const[e,t="center"]=o.split("-");return[e,t]}function yi(o){return o!=null&&typeof o=="object"&&"$el"in o}function Lo(o){if(yi(o)){const e=o.$el;return da(e)&&pa(e)==="#comment"?null:e}return o}function pt(o){return typeof o=="function"?o():a(o)}function _i(o){return{name:"arrow",options:o,fn(e){const t=Lo(pt(o.element));return t==null?{}:ha({element:t,padding:o.padding}).fn(e)}}}function ds(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function bn(o,e){const t=ds(o);return Math.round(e*t)/t}function bi(o,e,t){t===void 0&&(t={});const n=t.whileElementsMounted,s=B(()=>{var z;return(z=pt(t.open))!=null?z:!0}),r=B(()=>pt(t.middleware)),l=B(()=>{var z;return(z=pt(t.placement))!=null?z:"bottom"}),c=B(()=>{var z;return(z=pt(t.strategy))!=null?z:"absolute"}),i=B(()=>{var z;return(z=pt(t.transform))!=null?z:!0}),d=B(()=>Lo(o.value)),u=B(()=>Lo(e.value)),p=x(0),h=x(0),_=x(c.value),b=x(l.value),O=la({}),q=x(!1),M=B(()=>{const z={position:_.value,left:"0",top:"0"};if(!u.value)return z;const ae=bn(u.value,p.value),D=bn(u.value,h.value);return i.value?{...z,transform:"translate("+ae+"px, "+D+"px)",...ds(u.value)>=1.5&&{willChange:"transform"}}:{position:_.value,left:ae+"px",top:D+"px"}});let C;function A(){if(d.value==null||u.value==null)return;const z=s.value;fa(d.value,u.value,{middleware:r.value,placement:l.value,strategy:c.value}).then(ae=>{p.value=ae.x,h.value=ae.y,_.value=ae.strategy,b.value=ae.placement,O.value=ae.middlewareData,q.value=z!==!1})}function I(){typeof C=="function"&&(C(),C=void 0)}function G(){if(I(),n===void 0){A();return}if(d.value!=null&&u.value!=null){C=n(d.value,u.value,A);return}}function K(){s.value||(q.value=!1)}return ge([r,l,c,s],A,{flush:"sync"}),ge([d,u],G,{flush:"sync"}),ge(s,K,{flush:"sync"}),ua()&&ca(I),{x:lt(p),y:lt(h),strategy:lt(_),placement:lt(b),middlewareData:lt(O),isPositioned:lt(q),floatingStyles:M,update:A}}const ps={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[wi,xi]=Be("PopperContent");var Ei=k({inheritAttrs:!1,__name:"PopperContent",props:Bn({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...ps}),emits:["placed"],setup(o,{emit:e}){const t=o,n=e,s=ls(),{forwardRef:r,currentElement:l}=H(),c=x(),i=x(),{width:d,height:u}=dr(i),p=B(()=>t.side+(t.align!=="center"?`-${t.align}`:"")),h=B(()=>typeof t.collisionPadding=="number"?t.collisionPadding:{top:0,right:0,bottom:0,left:0,...t.collisionPadding}),_=B(()=>Array.isArray(t.collisionBoundary)?t.collisionBoundary:[t.collisionBoundary]),b=B(()=>({padding:h.value,boundary:_.value.filter(gi),altBoundary:_.value.length>0})),O=B(()=>({mainAxis:t.sideFlip,crossAxis:t.alignFlip})),q=Ia(()=>[ga({mainAxis:t.sideOffset+u.value,alignmentAxis:t.alignOffset}),t.prioritizePosition&&t.avoidCollisions&&pn({...b.value,...O.value}),t.avoidCollisions&&va({mainAxis:!0,crossAxis:!!t.prioritizePosition,limiter:t.sticky==="partial"?ba():void 0,...b.value}),!t.prioritizePosition&&t.avoidCollisions&&pn({...b.value,...O.value}),ya({...b.value,apply:({elements:ce,rects:te,availableWidth:_e,availableHeight:oe})=>{const{width:j,height:Ze}=te.reference,Le=ce.floating.style;Le.setProperty("--reka-popper-available-width",`${_e}px`),Le.setProperty("--reka-popper-available-height",`${oe}px`),Le.setProperty("--reka-popper-anchor-width",`${j}px`),Le.setProperty("--reka-popper-anchor-height",`${Ze}px`)}}),i.value&&_i({element:i.value,padding:t.arrowPadding}),vi({arrowWidth:d.value,arrowHeight:u.value}),t.hideWhenDetached&&_a({strategy:"referenceHidden",...b.value})]),M=B(()=>t.reference??s.anchor.value),{floatingStyles:C,placement:A,isPositioned:I,middlewareData:G}=bi(M,c,{strategy:t.positionStrategy,placement:p,whileElementsMounted:(...ce)=>ma(...ce,{layoutShift:!t.disableUpdateOnLayoutShift,animationFrame:t.updatePositionStrategy==="always"}),middleware:q}),K=B(()=>Bo(A.value)[0]),z=B(()=>Bo(A.value)[1]);In(()=>{I.value&&n("placed")});const ae=B(()=>G.value.arrow?.centerOffset!==0),D=x("");Re(()=>{l.value&&(D.value=window.getComputedStyle(l.value).zIndex)});const ee=B(()=>G.value.arrow?.x??0),Y=B(()=>G.value.arrow?.y??0);return xi({placedSide:K,onArrowChange:ce=>i.value=ce,arrowX:ee,arrowY:Y,shouldHideArrow:ae}),(ce,te)=>(g(),$("div",{ref_key:"floatingRef",ref:c,"data-reka-popper-content-wrapper":"",style:Dt({...a(C),transform:a(I)?a(C).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:D.value,"--reka-popper-transform-origin":[a(G).transformOrigin?.x,a(G).transformOrigin?.y].join(" "),...a(G).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[v(a(ue),F({ref:a(r)},ce.$attrs,{"as-child":t.asChild,as:ce.as,"data-side":K.value,"data-align":z.value,style:{animation:a(I)?void 0:"none"}}),{default:m(()=>[T(ce.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),fs=Ei;const Ci={top:"bottom",right:"left",bottom:"top",left:"right"};var ki=k({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(o){const{forwardRef:e}=H(),t=wi(),n=B(()=>Ci[t.placedSide.value]);return(s,r)=>(g(),$("span",{ref:l=>{a(t).onArrowChange(l)},style:Dt({position:"absolute",left:a(t).arrowX?.value?`${a(t).arrowX?.value}px`:void 0,top:a(t).arrowY?.value?`${a(t).arrowY?.value}px`:void 0,[n.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a(t).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a(t).placedSide.value],visibility:a(t).shouldHideArrow.value?"hidden":void 0})},[v(mi,F(s.$attrs,{ref:a(e),style:{display:"block"},as:s.as,"as-child":s.asChild,rounded:s.rounded,width:s.width,height:s.height}),{default:m(()=>[T(s.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4))}}),Si=ki,Ti=k({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(cs),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Oi=Ti;function Ai(){const o=x(!1);return ve(()=>{ht("keydown",()=>{o.value=!0},{capture:!0,passive:!0}),ht(["pointerdown","pointermove"],()=>{o.value=!1},{capture:!0,passive:!0})}),o}const Di=Un(Ai),[no,Ri]=Be(["MenuRoot","MenuSub"],"MenuContext"),[Jo,qi]=Be("MenuRoot");var Ni=k({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(o,{emit:e}){const t=o,n=e,{modal:s,dir:r}=vt(t),l=Kn(r),c=qt(t,"open",n),i=x(),d=Di();return Ri({open:c,onOpenChange:u=>{c.value=u},content:i,onContentChange:u=>{i.value=u}}),qi({onClose:()=>{c.value=!1},isUsingKeyboardRef:d,dir:l,modal:s}),(u,p)=>(g(),E(a(us),null,{default:m(()=>[T(u.$slots,"default")]),_:3}))}}),Mi=Ni;const[hs,Pi]=Be("MenuContent");var $i=k({__name:"MenuContentImpl",props:Bn({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...ps}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(o,{emit:e}){const t=o,n=e,s=no(),r=Jo(),{trapFocus:l,disableOutsidePointerEvents:c,loop:i}=vt(t);Za(),Wn(c.value);const d=x(""),u=x(0),p=x(0),h=x(null),_=x("right"),b=x(0),O=x(null),q=x(),{forwardRef:M,currentElement:C}=H(),{handleTypeaheadSearch:A}=pr();ge(C,D=>{s.onContentChange(D)}),Qe(()=>{window.clearTimeout(u.value)});function I(D){return _.value===h.value?.side&&$r(D,h.value?.area)}async function G(D){n("openAutoFocus",D),!D.defaultPrevented&&(D.preventDefault(),C.value?.focus({preventScroll:!0}))}function K(D){if(D.defaultPrevented)return;const Y=D.target.closest("[data-reka-menu-content]")===D.currentTarget,ce=D.ctrlKey||D.altKey||D.metaKey,te=D.key.length===1,_e=ja(D,De(),C.value,{loop:i.value,arrowKeyOptions:"vertical",dir:r?.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(_e)return _e?.focus();if(D.code==="Space")return;const oe=q.value?.getItems()??[];if(Y&&(D.key==="Tab"&&D.preventDefault(),!ce&&te&&A(D.key,oe)),D.target!==C.value||!Nr.includes(D.key))return;D.preventDefault();const j=[...oe.map(Ze=>Ze.ref)];os.includes(D.key)&&j.reverse(),Mr(j)}function z(D){D?.currentTarget?.contains?.(D.target)||(window.clearTimeout(u.value),d.value="")}function ae(D){if(!Io(D))return;const ee=D.target,Y=b.value!==D.clientX;if(D?.currentTarget?.contains(ee)&&Y){const ce=D.clientX>b.value?"right":"left";_.value=ce,b.value=D.clientX}}return Pi({onItemEnter:D=>!!I(D),onItemLeave:D=>{I(D)||(C.value?.focus(),O.value=null)},onTriggerLeave:D=>!!I(D),searchRef:d,pointerGraceTimerRef:p,onPointerGraceIntentChange:D=>{h.value=D}}),(D,ee)=>(g(),E(a(ts),{"as-child":"",trapped:a(l),onMountAutoFocus:G,onUnmountAutoFocus:ee[7]||(ee[7]=Y=>n("closeAutoFocus",Y))},{default:m(()=>[v(a(Go),{"as-child":"","disable-outside-pointer-events":a(c),onEscapeKeyDown:ee[2]||(ee[2]=Y=>n("escapeKeyDown",Y)),onPointerDownOutside:ee[3]||(ee[3]=Y=>n("pointerDownOutside",Y)),onFocusOutside:ee[4]||(ee[4]=Y=>n("focusOutside",Y)),onInteractOutside:ee[5]||(ee[5]=Y=>n("interactOutside",Y)),onDismiss:ee[6]||(ee[6]=Y=>n("dismiss"))},{default:m(()=>[v(a(Ua),{ref_key:"rovingFocusGroupRef",ref:q,"current-tab-stop-id":O.value,"onUpdate:currentTabStopId":ee[0]||(ee[0]=Y=>O.value=Y),"as-child":"",orientation:"vertical",dir:a(r).dir.value,loop:a(i),onEntryFocus:ee[1]||(ee[1]=Y=>{n("entryFocus",Y),a(r).isUsingKeyboardRef.value||Y.preventDefault()})},{default:m(()=>[v(a(fs),{ref:a(M),role:"menu",as:D.as,"as-child":D.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":a(ns)(a(s).open.value),dir:a(r).dir.value,side:D.side,"side-offset":D.sideOffset,align:D.align,"align-offset":D.alignOffset,"avoid-collisions":D.avoidCollisions,"collision-boundary":D.collisionBoundary,"collision-padding":D.collisionPadding,"arrow-padding":D.arrowPadding,"prioritize-position":D.prioritizePosition,"position-strategy":D.positionStrategy,"update-position-strategy":D.updatePositionStrategy,sticky:D.sticky,"hide-when-detached":D.hideWhenDetached,reference:D.reference,onKeydown:K,onBlur:z,onPointermove:ae},{default:m(()=>[T(D.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),ms=$i,Ii=k({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o,t=hs(),{forwardRef:n}=H(),{CollectionItem:s}=za(),r=x(!1);async function l(i){i.defaultPrevented||Io(i)&&(e.disabled?t.onItemLeave(i):t.onItemEnter(i)||i.currentTarget?.focus({preventScroll:!0}))}async function c(i){await Me(),!i.defaultPrevented&&Io(i)&&t.onItemLeave(i)}return(i,d)=>(g(),E(a(s),{value:{textValue:i.textValue}},{default:m(()=>[v(a(ue),F({ref:a(n),role:"menuitem",tabindex:"-1"},i.$attrs,{as:i.as,"as-child":i.asChild,"aria-disabled":i.disabled||void 0,"data-disabled":i.disabled?"":void 0,"data-highlighted":r.value?"":void 0,onPointermove:l,onPointerleave:c,onFocus:d[0]||(d[0]=async u=>{await Me(),!(u.defaultPrevented||i.disabled)&&(r.value=!0)}),onBlur:d[1]||(d[1]=async u=>{await Me(),!u.defaultPrevented&&(r.value=!1)})}),{default:m(()=>[T(i.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),Bi=Ii,Li=k({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(o,{emit:e}){const t=o,n=e,{forwardRef:s,currentElement:r}=H(),l=Jo(),c=hs(),i=x(!1);async function d(){const u=r.value;if(!t.disabled&&u){const p=new CustomEvent(Rr,{bubbles:!0,cancelable:!0});n("select",p),await Me(),p.defaultPrevented?i.value=!1:l.onClose()}}return(u,p)=>(g(),E(Bi,F(t,{ref:a(s),onClick:d,onPointerdown:p[0]||(p[0]=()=>{i.value=!0}),onPointerup:p[1]||(p[1]=async h=>{await Me(),!h.defaultPrevented&&(i.value||h.currentTarget?.click())}),onKeydown:p[2]||(p[2]=async h=>{const _=a(c).searchRef.value!=="";u.disabled||_&&h.key===" "||a($o).includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})}),{default:m(()=>[T(u.$slots,"default")]),_:3},16))}}),Fi=Li,Ui=k({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=Te(t,n),r=no(),{forwardRef:l,currentElement:c}=H();return Jn(c),(i,d)=>(g(),E(ms,F(a(s),{ref:a(l),"trap-focus":a(r).open.value,"disable-outside-pointer-events":a(r).open.value,"disable-outside-scroll":!0,onDismiss:d[0]||(d[0]=u=>a(r).onOpenChange(!1)),onFocusOutside:d[1]||(d[1]=ye(u=>n("focusOutside",u),["prevent"]))}),{default:m(()=>[T(i.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),zi=Ui,ji=k({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const s=Te(o,e),r=no();return(l,c)=>(g(),E(ms,F(a(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:c[0]||(c[0]=i=>a(r).onOpenChange(!1))}),{default:m(()=>[T(l.$slots,"default")]),_:3},16))}}),Vi=ji,Ki=k({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const s=Te(o,e),r=no(),l=Jo();return(c,i)=>(g(),E(a(oo),{present:c.forceMount||a(r).open.value},{default:m(()=>[a(l).modal.value?(g(),E(zi,we(F({key:0},{...c.$attrs,...a(s)})),{default:m(()=>[T(c.$slots,"default")]),_:3},16)):(g(),E(Vi,we(F({key:1},{...c.$attrs,...a(s)})),{default:m(()=>[T(c.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Hi=Ki,Wi=k({__name:"MenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(ue),F({role:"group"},e),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Gi=Wi,Xi=k({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(o){const e=o;return(t,n)=>(g(),E(a(ue),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Ji=Xi,Yi=k({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(Xo),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Qi=Yi,Zi=k({__name:"MenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(ue),F(e,{role:"separator","aria-orientation":"horizontal"}),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),el=Zi;const[gs,tl]=Be("DropdownMenuRoot");var ol=k({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(o,{emit:e}){const t=o,n=e;H();const s=qt(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0}),r=x(),{modal:l,dir:c}=vt(t),i=Kn(c);return tl({open:s,onOpenChange:d=>{s.value=d},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:r,contentId:"",modal:l,dir:i}),(d,u)=>(g(),E(a(Mi),{open:a(s),"onUpdate:open":u[0]||(u[0]=p=>Yt(s)?s.value=p:null),dir:a(i),modal:a(l)},{default:m(()=>[T(d.$slots,"default",{open:a(s)})]),_:3},8,["open","dir","modal"]))}}),nl=ol,sl=k({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const s=Te(o,e);H();const r=gs(),l=x(!1);function c(i){i.defaultPrevented||(l.value||setTimeout(()=>{r.triggerElement.value?.focus()},0),l.value=!1,i.preventDefault())}return r.contentId||=mt(void 0,"reka-dropdown-menu-content"),(i,d)=>(g(),E(a(Hi),F(a(s),{id:a(r).contentId,"aria-labelledby":a(r)?.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:c,onInteractOutside:d[0]||(d[0]=u=>{if(u.defaultPrevented)return;const p=u.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,_=p.button===2||h;(!a(r).modal.value||_)&&(l.value=!0),a(r).triggerElement.value?.contains(u.target)&&u.preventDefault()})}),{default:m(()=>[T(i.$slots,"default")]),_:3},16,["id","aria-labelledby"]))}}),al=sl,rl=k({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return H(),(t,n)=>(g(),E(a(Gi),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),il=rl,ll=k({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(o,{emit:e}){const t=o,s=eo(e);return H(),(r,l)=>(g(),E(a(Fi),we(qe({...t,...a(s)})),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}}),ul=ll,cl=k({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return H(),(t,n)=>(g(),E(a(Ji),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),dl=cl,pl=k({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(Qi),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),fl=pl,hl=k({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o;return H(),(t,n)=>(g(),E(a(el),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),ml=hl,gl=k({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const e=o,t=gs(),{forwardRef:n,currentElement:s}=H();return ve(()=>{t.triggerElement=s}),t.triggerId||=mt(void 0,"reka-dropdown-menu-trigger"),(r,l)=>(g(),E(a(Oi),{"as-child":""},{default:m(()=>[v(a(ue),{id:a(t).triggerId,ref:a(n),type:r.as==="button"?"button":void 0,"as-child":e.asChild,as:r.as,"aria-haspopup":"menu","aria-expanded":a(t).open.value,"aria-controls":a(t).open.value?a(t).contentId:void 0,"data-disabled":r.disabled?"":void 0,disabled:r.disabled,"data-state":a(t).open.value?"open":"closed",onClick:l[0]||(l[0]=async c=>{!r.disabled&&c.button===0&&c.ctrlKey===!1&&(a(t)?.onOpenToggle(),await Me(),a(t).open.value&&c.preventDefault())}),onKeydown:l[1]||(l[1]=Ln(c=>{r.disabled||(["Enter"," "].includes(c.key)&&a(t).onOpenToggle(),c.key==="ArrowDown"&&a(t).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())},["enter","space","arrow-down"]))},{default:m(()=>[T(r.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),vl=gl,yl=k({__name:"TooltipArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(o){const e=o;return H(),(t,n)=>(g(),E(a(Si),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),_l=yl;const[Yo,bl]=Be("TooltipProvider");var wl=k({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(o){const e=o,{delayDuration:t,skipDelayDuration:n,disableHoverableContent:s,disableClosingTrigger:r,ignoreNonKeyboardFocus:l,disabled:c}=vt(e);H();const i=x(!0),d=x(!1),{start:u,stop:p}=Vn(()=>{i.value=!0},n,{immediate:!1});return bl({isOpenDelayed:i,delayDuration:t,onOpen(){p(),i.value=!1},onClose(){u()},isPointerInTransitRef:d,disableHoverableContent:s,disableClosingTrigger:r,disabled:c,ignoreNonKeyboardFocus:l}),(h,_)=>T(h.$slots,"default")}}),xl=wl;const vs="tooltip.open",[so,El]=Be("TooltipRoot");var Cl=k({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(o,{emit:e}){const t=o,n=e;H();const s=Yo(),r=B(()=>t.disableHoverableContent??s.disableHoverableContent.value),l=B(()=>t.disableClosingTrigger??s.disableClosingTrigger.value),c=B(()=>t.disabled??s.disabled.value),i=B(()=>t.delayDuration??s.delayDuration.value),d=B(()=>t.ignoreNonKeyboardFocus??s.ignoreNonKeyboardFocus.value),u=qt(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0});ge(u,A=>{s.onClose&&(A?(s.onOpen(),document.dispatchEvent(new CustomEvent(vs))):s.onClose())});const p=x(!1),h=x(),_=B(()=>u.value?p.value?"delayed-open":"instant-open":"closed"),{start:b,stop:O}=Vn(()=>{p.value=!0,u.value=!0},i,{immediate:!1});function q(){O(),p.value=!1,u.value=!0}function M(){O(),u.value=!1}function C(){b()}return El({contentId:"",open:u,stateAttribute:_,trigger:h,onTriggerChange(A){h.value=A},onTriggerEnter(){s.isOpenDelayed.value?C():q()},onTriggerLeave(){r.value?M():O()},onOpen:q,onClose:M,disableHoverableContent:r,disableClosingTrigger:l,disabled:c,ignoreNonKeyboardFocus:d}),(A,I)=>(g(),E(a(us),null,{default:m(()=>[T(A.$slots,"default",{open:a(u)})]),_:3}))}}),kl=Cl,Sl=k({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const t=o,n=e,s=so(),{forwardRef:r}=H(),l=wa(),c=B(()=>l.default?.({})),i=B(()=>{if(t.ariaLabel)return t.ariaLabel;let u="";function p(h){typeof h.children=="string"&&h.type!==xa?u+=h.children:Array.isArray(h.children)&&h.children.forEach(_=>p(_))}return c.value?.forEach(h=>p(h)),u}),d=B(()=>{const{ariaLabel:u,...p}=t;return p});return ve(()=>{ht(window,"scroll",u=>{u.target?.contains(s.trigger.value)&&s.onClose()}),ht(window,vs,s.onClose)}),(u,p)=>(g(),E(a(Go),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:p[0]||(p[0]=h=>n("escapeKeyDown",h)),onPointerDownOutside:p[1]||(p[1]=h=>{a(s).disableClosingTrigger.value&&a(s).trigger.value?.contains(h.target)&&h.preventDefault(),n("pointerDownOutside",h)}),onFocusOutside:p[2]||(p[2]=ye(()=>{},["prevent"])),onDismiss:p[3]||(p[3]=h=>a(s).onClose())},{default:m(()=>[v(a(fs),F({ref:a(r),"data-state":a(s).stateAttribute.value},{...u.$attrs,...d.value},{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:m(()=>[T(u.$slots,"default"),v(a(Fa),{id:a(s).contentId,role:"tooltip"},{default:m(()=>[fe(X(i.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),ys=Sl,Tl=k({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(o){const t=to(o),{forwardRef:n,currentElement:s}=H(),{trigger:r,onClose:l}=so(),c=Yo(),{isPointerInTransit:i,onPointerExit:d}=er(r,s);return c.isPointerInTransitRef=i,d(()=>{l()}),(u,p)=>(g(),E(ys,F({ref:a(n)},a(t)),{default:m(()=>[T(u.$slots,"default")]),_:3},16))}}),Ol=Tl,Al=k({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const t=o,n=e,s=so(),r=Te(t,n),{forwardRef:l}=H();return(c,i)=>(g(),E(a(oo),{present:c.forceMount||a(s).open.value},{default:m(()=>[(g(),E(Rt(a(s).disableHoverableContent.value?ys:Ol),F({ref:a(l)},a(r)),{default:m(()=>[T(c.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Dl=Al,Rl=k({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const e=o;return(t,n)=>(g(),E(a(Xo),we(qe(e)),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),ql=Rl,Nl=k({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const e=o,t=so(),n=Yo();t.contentId||=mt(void 0,"reka-tooltip-content");const{forwardRef:s,currentElement:r}=H(),l=x(!1),c=x(!1),i=B(()=>t.disabled.value?{}:{click:O,focus:_,pointermove:p,pointerleave:h,pointerdown:u,blur:b});ve(()=>{t.onTriggerChange(r.value)});function d(){setTimeout(()=>{l.value=!1},1)}function u(){t.open&&!t.disableClosingTrigger.value&&t.onClose(),l.value=!0,document.addEventListener("pointerup",d,{once:!0})}function p(q){q.pointerType!=="touch"&&!c.value&&!n.isPointerInTransitRef.value&&(t.onTriggerEnter(),c.value=!0)}function h(){t.onTriggerLeave(),c.value=!1}function _(q){l.value||t.ignoreNonKeyboardFocus.value&&!q.target.matches?.(":focus-visible")||t.onOpen()}function b(){t.onClose()}function O(){t.disableClosingTrigger.value||t.onClose()}return(q,M)=>(g(),E(a(cs),{"as-child":"",reference:q.reference},{default:m(()=>[v(a(ue),F({ref:a(s),"aria-describedby":a(t).open.value?a(t).contentId:void 0,"data-state":a(t).stateAttribute.value,as:q.as,"as-child":e.asChild,"data-grace-area-trigger":""},Ea(i.value)),{default:m(()=>[T(q.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),Ml=Nl;const Pl=k({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=Te(o,e);return(r,l)=>(g(),E(a(Yn),F({"data-slot":"sheet"},a(s)),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}});const wn=J("BellIcon",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const _s=J("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const $l=J("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Il=J("ChartPieIcon",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const Bl=J("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Ll=J("ChevronsUpDownIcon",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const Fl=J("CommandIcon",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);const Ul=J("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const bs=J("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const ws=J("FingerprintIcon",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);const zl=J("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const jl=J("HouseIcon",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Vl=J("LayoutGridIcon",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Kt=J("MusicIcon",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);const Kl=J("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const Hl=J("PanelLeftIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);const xn=J("PauseIcon",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const xo=J("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const En=J("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Qo=J("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Wl=J("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Cn=J("SkipBackIcon",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);const kn=J("SkipForwardIcon",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Gl=J("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Xl=J("TableIcon",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);const Jl=J("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Yl=J("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Ql=J("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Zl=J("Volume1Icon",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]);const eu=J("Volume2Icon",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);const tu=J("VolumeXIcon",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const Zo=J("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ou=k({inheritAttrs:!1,__name:"SheetContent",props:{class:{},side:{default:"right"},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=Nt(t,"class","side"),r=Te(s,n);return(l,c)=>(g(),E(a(rs),null,{default:m(()=>[v(a(as),F({"data-slot":"sheet-content",class:a(se)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",o.side==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",o.side==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",o.side==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",o.side==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t.class)},{...a(r),...l.$attrs}),{default:m(()=>[T(l.$slots,"default"),v(a(Qn),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none"},{default:m(()=>[v(a(Zo),{class:"size-4"}),c[0]||(c[0]=y("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),nu=k({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,t=B(()=>{const{class:n,...s}=e;return s});return(n,s)=>(g(),E(a(Vr),F({"data-slot":"sheet-description",class:a(se)("text-muted-foreground text-sm",e.class)},t.value),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["class"]))}}),su=k({__name:"SheetHeader",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sheet-header",class:re(a(se)("flex flex-col gap-1.5 p-4",e.class))},[T(t.$slots,"default")],2))}}),au=k({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,t=B(()=>{const{class:n,...s}=e;return s});return(n,s)=>(g(),E(a(Qr),F({"data-slot":"sheet-title",class:a(se)("text-foreground font-semibold",e.class)},t.value),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["class"]))}}),ru="sidebar_state",iu=3600*24*7,lu="16rem",uu="18rem",cu="3rem",du="b",[ao,pu]=Be("Sidebar"),fu={class:"flex h-full w-full flex-col"},hu=["data-state","data-collapsible","data-variant","data-side"],mu={"data-sidebar":"sidebar",class:"bg-sidebar backdrop-blur-2xl group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-xl group-data-[variant=floating]:border group-data-[variant=floating]:shadow-2xl transition-all duration-300"},gu=k({inheritAttrs:!1,__name:"Sidebar",props:{side:{default:"left"},variant:{default:"sidebar"},collapsible:{default:"offcanvas"},class:{}},setup(o){const e=o,{isMobile:t,state:n,openMobile:s,setOpenMobile:r}=ao();return(l,c)=>o.collapsible==="none"?(g(),$("div",F({key:0,"data-slot":"sidebar",class:a(se)("bg-sidebar backdrop-blur-md text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col border-r border-sidebar-border shadow-2xl",e.class)},l.$attrs),[T(l.$slots,"default")],16)):a(t)?(g(),E(a(Pl),F({key:1,open:a(s)},l.$attrs,{"onUpdate:open":a(r)}),{default:m(()=>[v(a(ou),{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",side:o.side,class:"bg-sidebar backdrop-blur-3xl text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden border-r border-sidebar-border shadow-[0_0_40px_rgba(0,0,0,0.5)]",style:Dt({"--sidebar-width":a(uu)})},{default:m(()=>[v(su,{class:"sr-only"},{default:m(()=>[v(au,null,{default:m(()=>[...c[0]||(c[0]=[fe("Sidebar",-1)])]),_:1}),v(nu,null,{default:m(()=>[...c[1]||(c[1]=[fe("Displays the mobile sidebar.",-1)])]),_:1})]),_:1}),y("div",fu,[T(l.$slots,"default")])]),_:3},8,["side","style"])]),_:3},16,["open","onUpdate:open"])):(g(),$("div",{key:2,class:"group peer text-sidebar-foreground hidden md:block","data-slot":"sidebar","data-state":a(n),"data-collapsible":a(n)==="collapsed"?o.collapsible:"","data-variant":o.variant,"data-side":o.side},[y("div",{class:re(a(se)("relative w-(--sidebar-width) bg-transparent transition-[width] duration-300 ease-[cubic-bezier(0.2,0,0,1)]","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",o.variant==="floating"||o.variant==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)"))},null,2),y("div",F({class:a(se)("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-300 ease-[cubic-bezier(0.2,0,0,1)] md:flex",o.side==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",o.variant==="floating"||o.variant==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l border-sidebar-border",e.class)},l.$attrs),[y("div",mu,[T(l.$slots,"default")])],16)],8,hu))}}),vu=k({__name:"SidebarContent",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sidebar-content","data-sidebar":"content",class:re(a(se)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e.class))},[T(t.$slots,"default")],2))}}),yu=k({__name:"SidebarFooter",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",class:re(a(se)("flex flex-col gap-2 p-4",e.class))},[T(t.$slots,"default")],2))}}),xs=k({__name:"SidebarGroup",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sidebar-group","data-sidebar":"group",class:re(a(se)("relative flex w-full min-w-0 flex-col p-4",e.class))},[T(t.$slots,"default")],2))}}),_u=k({__name:"SidebarGroupContent",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",class:re(a(se)("w-full text-sm",e.class))},[T(t.$slots,"default")],2))}}),bu=k({__name:"SidebarGroupLabel",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(ue),{"data-slot":"sidebar-group-label","data-sidebar":"group-label",as:o.as,"as-child":o.asChild,class:re(a(se)("text-neutral-500 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-[10px] uppercase tracking-wider font-semibold outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e.class))},{default:m(()=>[T(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),wu=k({__name:"SidebarHeader",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("div",{"data-slot":"sidebar-header","data-sidebar":"header",class:re(a(se)("flex flex-col gap-2 p-4",e.class))},[T(t.$slots,"default")],2))}}),xu=k({__name:"SidebarInset",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("main",{"data-slot":"sidebar-inset",class:re(a(se)("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-0",e.class))},[T(t.$slots,"default")],2))}}),ro=k({__name:"SidebarMenu",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",class:re(a(se)("flex w-full min-w-0 flex-col gap-2",e.class))},[T(t.$slots,"default")],2))}}),Eu=k({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=Te(o,e);return(r,l)=>(g(),E(a(kl),F({"data-slot":"tooltip"},a(s)),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}}),Cu=k({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(o,{emit:e}){const t=o,n=e,s=Nt(t,"class"),r=Te(s,n);return(l,c)=>(g(),E(a(ql),null,{default:m(()=>[v(a(Dl),F({"data-slot":"tooltip-content"},{...a(r),...l.$attrs},{class:a(se)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",t.class)}),{default:m(()=>[T(l.$slots,"default"),v(a(_l),{class:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]),_:3},16,["class"])]),_:3}))}}),ku=k({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(Ml),F({"data-slot":"tooltip-trigger"},e),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Sn=k({__name:"SidebarMenuButtonChild",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(o){const e=o;return(t,n)=>(g(),E(a(ue),F({"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":o.size,"data-active":o.isActive,class:a(se)(a(Gc)({variant:o.variant,size:o.size}),e.class),as:o.as,"as-child":o.asChild},t.$attrs),{default:m(()=>[T(t.$slots,"default")]),_:3},16,["data-size","data-active","class","as","as-child"]))}}),io=k({inheritAttrs:!1,__name:"SidebarMenuButton",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{},asChild:{type:Boolean},as:{default:"button"},tooltip:{}},setup(o){const e=o,{isMobile:t,state:n}=ao(),s=B(()=>{const{tooltip:r,...l}=e;return l});return(r,l)=>o.tooltip?(g(),E(a(Eu),{key:1},{default:m(()=>[v(a(ku),{"as-child":""},{default:m(()=>[v(Sn,we(qe({...s.value,...r.$attrs})),{default:m(()=>[T(r.$slots,"default")]),_:3},16)]),_:3}),v(a(Cu),{side:"right",align:"center",hidden:a(n)!=="collapsed"||a(t)},{default:m(()=>[typeof o.tooltip=="string"?(g(),$(Pe,{key:0},[fe(X(o.tooltip),1)],64)):(g(),E(Rt(o.tooltip),{key:1}))]),_:1},8,["hidden"])]),_:3})):(g(),E(Sn,we(F({key:0},{...s.value,...r.$attrs})),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}}),lo=k({__name:"SidebarMenuItem",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),$("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",class:re(a(se)("group/menu-item relative",e.class))},[T(t.$slots,"default")],2))}}),Su=k({__name:"SidebarProvider",props:{defaultOpen:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},class:{}},emits:["update:open"],setup(o,{emit:e}){const t=o,n=e,s=Ba("(max-width: 768px)"),r=x(!1),l=qt(t,"open",n,{defaultValue:t.defaultOpen??!1,passive:t.open===void 0});function c(p){l.value=p,document.cookie=`${ru}=${l.value}; path=/; max-age=${iu}`}function i(p){r.value=p}function d(){return s.value?i(!r.value):c(!l.value)}ht("keydown",p=>{p.key===du&&(p.metaKey||p.ctrlKey)&&(p.preventDefault(),d())});const u=B(()=>l.value?"expanded":"collapsed");return pu({state:u,open:l,setOpen:c,isMobile:s,openMobile:r,setOpenMobile:i,toggleSidebar:d}),(p,h)=>(g(),E(a(xl),{"delay-duration":0},{default:m(()=>[y("div",F({"data-slot":"sidebar-wrapper",style:{"--sidebar-width":a(lu),"--sidebar-width-icon":a(cu)},class:a(se)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",t.class)},p.$attrs),[T(p.$slots,"default")],16)]),_:3}))}}),Tu="/build/assets/notify-q4dWPEKL.mp3",Fe=x([]),Qt=x(2),Ou=()=>{const o=localStorage.getItem("system_notifications");if(o)try{const t=JSON.parse(o);Fe.value=t.map(n=>({...n,time:new Date(n.time)}))}catch(t){console.error("Error loading notifications",t)}const e=localStorage.getItem("notification_settings");if(e)try{const t=JSON.parse(e);t.repeatCount&&(Qt.value=t.repeatCount)}catch{}},Ut=()=>{localStorage.setItem("system_notifications",JSON.stringify(Fe.value))},Au=()=>{localStorage.setItem("notification_settings",JSON.stringify({repeatCount:Qt.value}))};function uo(){const o={success:new Audio("https://assets.mixkit.co/active_storage/sfx/2190/2190-preview.mp3"),error:new Audio("https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"),default:new Audio(Tu)};Object.values(o).forEach(c=>{c.load(),c.volume=.5});const e=c=>{try{const i=c==="success"?o.success:c==="error"?o.error:o.default;i.currentTime=0,i.play().catch(d=>console.warn("Could not play notification sound:",d))}catch(i){console.error("Audio playback error",i)}},t=(c,i,d="info")=>{const u={id:Date.now(),title:c,message:i,time:new Date,read:!1,type:d};return Fe.value.unshift(u),e(d),Fe.value.length>50&&Fe.value.pop(),Ut(),u},n=c=>{const i=Fe.value.find(d=>d.id===c);i&&(i.read=!0,Ut())},s=()=>{Fe.value.forEach(c=>c.read=!0),Ut()},r=()=>{Fe.value=[],Ut()},l=c=>{Qt.value=c,Au()};return Fe.value.length===0&&Ou(),{notifications:Fe,repeatCount:Qt,addNotification:t,markAsRead:n,markAllAsRead:s,clearHistory:r,setRepeatCount:l}}const Tt=x(!1),Ue=x(!1),ne=x(null),Se=x(null),me=x(null),je=x(!1),Du=x(!0),Zt=x(50),Mt=x(0),en=x(0),co=x(!1),tt=x(null),Ru=o=>{const e=Math.floor(o/6e4),t=(o%6e4/1e3).toFixed(0);return e+":"+(Number(t)<10?"0":"")+t},qu=()=>new Promise(o=>{if(window.Spotify)o(window.Spotify);else{const e=document.createElement("script");e.src="https://sdk.scdn.co/spotify-player.js",e.async=!0,document.body.appendChild(e),window.onSpotifyWebPlaybackSDKReady=()=>{o(window.Spotify)}}}),Es=async(o,e,t=!0)=>{try{await fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({device_ids:[o],play:t})})}catch(n){console.error("Transfer Playback Error",n)}},Ot=async()=>{if(!je.value)try{const o=await Ee.get("/api/spotify/state");if(o.data.connected===!1){Tt.value=!1;return}Tt.value=!0,o.data.item?(!ne.value||ne.value.id!==o.data.item.id?(ne.value=o.data.item,Cs()):ne.value={...ne.value,...o.data.item},Ue.value=o.data.is_playing,Mt.value=o.data.progress_ms,en.value=o.data.item.duration_ms):(ne.value=null,Ue.value=!1)}catch(o){o.response&&o.response.status!==404&&console.error("Error checking Spotify status",o)}},Cs=async()=>{if(ne.value)try{const o=await Ee.get(`/api/spotify/check-saved?track_id=${ne.value.id}`);ne.value&&(ne.value.is_saved=o.data.is_saved)}catch(o){console.error("Error checking saved status",o)}},gt=async()=>{Se.value&&window.spotifyAccessToken&&(console.log("Activating device and playing..."),await Es(Se.value,window.spotifyAccessToken,!0),Ue.value=!0)},Nu=async o=>{if(me.value)return;window.spotifyAccessToken=o;const e=await qu();me.value=new e.Player({name:"MoodOrbs Web Player",getOAuthToken:t=>{t(o)},volume:Zt.value/100}),me.value.addListener("ready",({device_id:t})=>{console.log("Ready with Device ID",t),Se.value=t,je.value=!0,window.spotifyDeviceId=t,window.spotifyVolume=Zt.value,Es(t,o,!1)}),me.value.addListener("not_ready",({device_id:t})=>{console.log("Device ID has gone offline",t),je.value=!1}),me.value.addListener("player_state_changed",t=>{if(!t)return;const n=t.track_window.current_track;if(!ne.value||ne.value.id!==n.id)ne.value=n,Cs();else{const s=ne.value.is_saved;ne.value=n,ne.value.is_saved=s}Ue.value=!t.paused,co.value||(Mt.value=t.position,en.value=t.duration),ne.value&&(ne.value.album=ne.value.album||{images:[{url:ne.value.album?.images?.[0]?.url}]})}),me.value.connect()},Mu=async()=>{if(je.value&&me.value)me.value.togglePlay().catch(o=>{console.error("SDK Toggle Play failed",o),gt()});else try{Ue.value?(await Ee.post("/api/spotify/pause",{device_id:Se.value}),Ue.value=!1):(await Ee.post("/api/spotify/play",{device_id:Se.value}),Ue.value=!0),setTimeout(Ot,500)}catch(o){o.response&&o.response.status===404&&gt()}},Pu=async()=>{if(je.value&&me.value)me.value.nextTrack().catch(()=>{Ee.post("/api/spotify/next",{device_id:Se.value}).catch(o=>{o.response&&o.response.status===404&&gt()})});else try{await Ee.post("/api/spotify/next",{device_id:Se.value}),setTimeout(Ot,1e3)}catch(o){o.response&&o.response.status===404&&gt()}},$u=async()=>{if(je.value&&me.value)me.value.previousTrack().catch(()=>{Ee.post("/api/spotify/previous",{device_id:Se.value}).catch(o=>{o.response&&o.response.status===404&&gt()})});else try{await Ee.post("/api/spotify/previous",{device_id:Se.value}),setTimeout(Ot,1e3)}catch(o){o.response&&o.response.status===404&&gt()}},ks=async o=>{if(Zt.value=o,window.spotifyVolume=o,je.value&&me.value)me.value.setVolume(o/100);else try{await Ee.put("/api/spotify/volume",{volume_percent:o,device_id:Se.value})}catch(e){console.error("Error setting volume",e)}},Iu=async o=>{if(Mt.value=o,je.value&&me.value)me.value.seek(o);else try{await Ee.put("/api/spotify/seek",{position_ms:o,device_id:Se.value})}catch(e){console.error("Error seeking",e)}co.value=!1},Bu=async()=>{if(!ne.value)return;const{addNotification:o}=uo(),e=ne.value.is_saved,t=ne.value.name;ne.value.is_saved=!e;try{e?(await Ee.delete(`/api/spotify/remove-track?track_id=${ne.value.id}`),o("Spotify",`"${t}" eliminado de favoritos.`,"info"),go({title:"Eliminado de Favoritos",message:`"${t}" ha sido eliminado de tus Me gusta.`,type:"info",duration:3e3,position:"bottom-right"})):(await Ee.put("/api/spotify/save-track",{track_id:ne.value.id}),o("Spotify",`"${t}" aadido a favoritos.`,"success"),go({title:"Aadido a Favoritos",message:`"${t}" ha sido aadido a tus Me gusta.`,type:"success",duration:3e3,position:"bottom-right"}))}catch(n){console.error("Error toggling save track",n),ne.value.is_saved=e,o("Spotify Error","No se pudo actualizar favoritos.","error"),go({title:"Error",message:"No se pudo actualizar favoritos. Intenta reconectar tu cuenta.",type:"error",duration:3e3,position:"bottom-right"})}},Lu=async()=>{if(tt.value)return;Ot();const o=async()=>{if(!tt.value)return;await Ot(),Ue.value&&!co.value&&(Mt.value+=1e3);const e=Tt.value?1e4:6e4;tt.value=setTimeout(o,e)};tt.value=setTimeout(o,1e3),window.addEventListener("spotify-volume-change",(e=>{ks(e.detail)}));try{const e=await Ee.get("/api/spotify/token");e.data.token&&Nu(e.data.token)}catch(e){console.log("Could not init player",e)}},Fu=()=>{me.value&&(me.value.disconnect(),me.value=null),Tt.value=!1,Ue.value=!1,ne.value=null,Se.value=null,je.value=!1,tt.value&&(clearTimeout(tt.value),tt.value=null)};function Ss(){return{isConnected:Tt,isPlaying:Ue,currentTrack:ne,deviceId:Se,isPlayerReady:je,isMinimized:Du,volume:Zt,progressMs:Mt,durationMs:en,isSeeking:co,formatTime:Ru,togglePlay:Mu,nextTrack:Pu,prevTrack:$u,setVolume:ks,seekTo:Iu,saveTrack:Bu,init:Lu,disconnectPlayer:Fu}}const Uu={class:"flex items-center gap-1.5 sm:gap-2 md:gap-3 h-8"},zu=["src"],ju={key:1,class:"w-full h-full bg-muted flex items-center justify-center"},Vu={class:"text-[10px] font-bold text-foreground truncate leading-tight"},Ku={class:"text-[9px] text-muted-foreground truncate leading-tight"},Hu={key:2,class:"flex items-center gap-1.5 sm:gap-2 md:gap-3 animate-fade-in-right flex-1 min-w-0"},Wu={class:"hidden sm:flex w-12 sm:w-16 md:w-24 flex-col justify-center group/seek"},Gu=["max"],Xu={class:"flex items-center gap-1 sm:gap-1.5 md:gap-2 shrink-0"},Ju={class:"items-center gap-1 group/vol hidden lg:flex"},Yu={key:1,href:"/settings/spotify",class:"block transition-all duration-500 ease-spring bg-card/50 backdrop-blur-xl border border-border shadow-sm overflow-hidden rounded-full p-1.5 pr-3 w-auto cursor-pointer group hover:bg-muted/50",title:"Ir a configuracin para conectar Spotify"},Qu={class:"flex items-center gap-2 sm:gap-3 h-8 opacity-60 grayscale"},Zu={class:"relative w-8 h-8 rounded-full bg-muted flex items-center justify-center shrink-0"},ec={class:"flex items-center gap-2 shrink-0 opacity-50 pointer-events-none"},tc={class:"w-8 h-8 flex items-center justify-center bg-white dark:bg-neutral-700 rounded-full shadow-sm"},oc=k({__name:"SpotifyPlayer",setup(o){const{isConnected:e,isPlaying:t,currentTrack:n,isMinimized:s,volume:r,progressMs:l,durationMs:c,isSeeking:i,togglePlay:d,nextTrack:u,prevTrack:p,setVolume:h,seekTo:_,saveTrack:b,init:O}=Ss();return ve(()=>{O()}),(q,M)=>a(e)&&a(n)?(g(),$("div",{key:0,class:re(["transition-all duration-500 ease-spring bg-card/90 backdrop-blur-xl border border-border shadow-sm overflow-hidden",a(s)?"rounded-full p-1 w-auto":"rounded-full p-1.5 pr-2 sm:pr-3 w-auto max-w-full"])},[y("div",Uu,[a(s)?(g(),$("div",{key:0,class:"sm:hidden w-6 h-6 rounded-full bg-muted flex items-center justify-center shrink-0 cursor-pointer",onClick:M[0]||(M[0]=C=>s.value=!1)},[v(a(Kt),{class:"w-3 h-3 text-muted-foreground"})])):le("",!0),y("div",{class:re(["hidden sm:block relative w-8 h-8 rounded-full overflow-hidden shrink-0 animate-spin-slow cursor-pointer",{"animate-paused":!a(t)}]),onClick:M[1]||(M[1]=C=>s.value=!1)},[a(n).album?.images?.[0]?.url?(g(),$("img",{key:0,src:a(n).album.images[0].url,class:"w-full h-full object-cover"},null,8,zu)):(g(),$("div",ju,[v(a(Kt),{class:"w-4 h-4 text-muted-foreground"})]))],2),y("div",{class:re(["flex flex-col justify-center min-w-0 cursor-pointer",a(s)?"hidden xs:flex max-w-[60px] sm:max-w-[100px]":"flex max-w-[100px] sm:max-w-[120px]"]),onClick:M[2]||(M[2]=C=>s.value=!1)},[y("h4",Vu,X(a(n).name),1),y("p",Ku,X(a(n).artists?.[0]?.name),1)],2),a(s)?(g(),$("div",{key:1,role:"button",onClick:M[3]||(M[3]=ye((...C)=>a(d)&&a(d)(...C),["stop","prevent"])),class:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-muted transition-colors shrink-0 cursor-pointer"},[a(t)?(g(),E(a(xn),{key:0,class:"w-3 h-3 text-foreground"})):(g(),E(a(xo),{key:1,class:"w-3 h-3 text-foreground ml-0.5"}))])):le("",!0),a(s)?le("",!0):(g(),$("div",Hu,[y("div",{role:"button",onClick:M[4]||(M[4]=ye((...C)=>a(b)&&a(b)(...C),["stop","prevent"])),class:"hidden xs:flex text-muted-foreground hover:text-green-500 transition-colors shrink-0 cursor-pointer items-center justify-center"},[v(a(zl),{class:re(["w-3.5 h-3.5 sm:w-4 sm:h-4",{"fill-green-500 text-green-500":a(n).is_saved}])},null,8,["class"])]),y("div",Wu,[Jt(y("input",{type:"range",min:"0",max:a(c),"onUpdate:modelValue":M[5]||(M[5]=C=>Yt(l)?l.value=C:null),onChange:M[6]||(M[6]=C=>a(_)(Number(C.target.value))),onMousedown:M[7]||(M[7]=C=>i.value=!0),class:"w-full h-1 bg-secondary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:bg-primary [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-125 transition-all"},null,40,Gu),[[No,a(l)]])]),y("div",Xu,[y("div",{role:"button",onClick:M[8]||(M[8]=ye((...C)=>a(p)&&a(p)(...C),["stop","prevent"])),class:"text-muted-foreground hover:text-foreground cursor-pointer flex items-center justify-center"},[v(a(Cn),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]),y("div",{role:"button",onClick:M[9]||(M[9]=ye((...C)=>a(d)&&a(d)(...C),["stop","prevent"])),class:"w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center bg-primary text-primary-foreground rounded-full shadow-sm hover:scale-105 active:scale-95 transition-all cursor-pointer"},[a(t)?(g(),E(a(xn),{key:0,class:"w-3 h-3 fill-current"})):(g(),E(a(xo),{key:1,class:"w-3 h-3 fill-current ml-0.5"}))]),y("div",{role:"button",onClick:M[10]||(M[10]=ye((...C)=>a(u)&&a(u)(...C),["stop","prevent"])),class:"text-muted-foreground hover:text-foreground cursor-pointer flex items-center justify-center"},[v(a(kn),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4"})])]),y("div",Ju,[y("div",{role:"button",onClick:M[11]||(M[11]=ye(C=>a(h)(0),["stop","prevent"])),class:"text-muted-foreground hover:text-foreground cursor-pointer flex items-center justify-center"},[a(r)>50?(g(),E(a(eu),{key:0,class:"w-4 h-4"})):a(r)>0?(g(),E(a(Zl),{key:1,class:"w-4 h-4"})):(g(),E(a(tu),{key:2,class:"w-4 h-4"}))]),Jt(y("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":M[12]||(M[12]=C=>Yt(r)?r.value=C:null),onInput:M[13]||(M[13]=C=>a(h)(Number(C.target.value))),class:"w-16 h-1 bg-secondary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:bg-primary [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-125 transition-all"},null,544),[[No,a(r)]])]),y("div",{role:"button",onClick:M[14]||(M[14]=ye(C=>s.value=!0,["stop","prevent"])),class:"text-muted-foreground hover:text-foreground shrink-0 cursor-pointer flex items-center justify-center"},[v(a(Bl),{class:"w-4 h-4 sm:w-5 sm:h-5"})])]))])],2)):(g(),$("a",Yu,[y("div",Qu,[y("div",Zu,[v(a(Kt),{class:"w-4 h-4 text-muted-foreground"})]),M[15]||(M[15]=y("div",{class:"flex flex-col justify-center min-w-[60px]"},[y("h4",{class:"text-[10px] font-bold text-neutral-500 dark:text-neutral-400 leading-tight"},"Spotify"),y("p",{class:"text-[9px] text-neutral-400 dark:text-neutral-500 leading-tight"},"Conectar")],-1)),y("div",ec,[v(a(Cn),{class:"w-4 h-4 text-neutral-400"}),y("div",tc,[v(a(xo),{class:"w-3 h-3 text-neutral-400 ml-0.5"})]),v(a(kn),{class:"w-4 h-4 text-neutral-400"})])])]))}}),nc=at(oc,[["__scopeId","data-v-0d7f635b"]]),Ts=k({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=Te(o,e);return(r,l)=>(g(),E(a(nl),F({"data-slot":"dropdown-menu"},a(s)),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}}),Os=k({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=B(()=>{const{class:l,...c}=t;return c}),r=Te(s,n);return(l,c)=>(g(),E(a(fl),null,{default:m(()=>[v(a(al),F({"data-slot":"dropdown-menu-content"},a(r),{class:a(se)("bg-popover backdrop-blur-lg text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border border-border p-1 shadow-md",t.class)}),{default:m(()=>[T(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),sc=k({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(il),F({"data-slot":"dropdown-menu-group"},e),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Eo=k({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:"default"}},setup(o){const e=o,t=Nt(e,"inset","variant"),n=to(t);return(s,r)=>(g(),E(a(ul),F({"data-slot":"dropdown-menu-item","data-inset":o.inset?"":void 0,"data-variant":o.variant},a(n),{class:a(se)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e.class)}),{default:m(()=>[T(s.$slots,"default")]),_:3},16,["data-inset","data-variant","class"]))}}),ac=k({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(o){const e=o,t=Nt(e,"class","inset"),n=to(t);return(s,r)=>(g(),E(a(dl),F({"data-slot":"dropdown-menu-label","data-inset":o.inset?"":void 0},a(n),{class:a(se)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e.class)}),{default:m(()=>[T(s.$slots,"default")]),_:3},16,["data-inset","class"]))}}),Tn=k({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,t=B(()=>{const{class:n,...s}=e;return s});return(n,s)=>(g(),E(a(ml),F({"data-slot":"dropdown-menu-separator"},t.value,{class:a(se)("bg-border -mx-1 my-1 h-px",e.class)}),null,16,["class"]))}}),As=k({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const t=to(o);return(n,s)=>(g(),E(a(vl),F({"data-slot":"dropdown-menu-trigger"},a(t)),{default:m(()=>[T(n.$slots,"default")]),_:3},16))}}),rc=k({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(o){const e=o,t=Nt(e,"class");return(n,s)=>(g(),E(a(ue),F({"data-slot":"badge",class:a(se)(a(ic)({variant:o.variant}),e.class)},a(t)),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["class"]))}}),ic=Pn("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),lc={class:"flex items-center justify-between p-4 border-b border-neutral-100 dark:border-neutral-800"},uc={class:"flex items-center gap-1"},cc={key:0,class:"p-4 bg-neutral-50 dark:bg-neutral-900/50"},dc={class:"space-y-3"},pc={class:"flex items-center justify-between"},fc={class:"flex items-center gap-2"},hc={class:"text-sm font-mono w-4 text-center"},mc={key:1,class:"h-[300px] overflow-y-auto custom-scrollbar"},gc={key:0,class:"flex flex-col items-center justify-center h-full py-8 text-neutral-400"},vc={key:1,class:"divide-y divide-neutral-100 dark:divide-neutral-800"},yc=["onClick"],_c={class:"flex justify-between items-start mb-1"},bc={class:"text-[10px] text-neutral-400"},wc={class:"text-xs text-neutral-500 dark:text-neutral-400 leading-relaxed"},xc={key:0,class:"absolute top-4 right-2 w-2 h-2 bg-blue-500 rounded-full"},Ec={key:2,class:"p-2 border-t border-neutral-100 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/30"},Cc=k({__name:"NotificationBell",setup(o){const{notifications:e,markAsRead:t,markAllAsRead:n,clearHistory:s,repeatCount:r,setRepeatCount:l}=uo(),c=B(()=>e.value.filter(u=>!u.read).length),i=u=>new Date(u).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),d=x(!1);return(u,p)=>(g(),E(a(Ts),null,{default:m(()=>[v(a(As),{"as-child":""},{default:m(()=>[v(a(dt),{variant:"ghost",size:"icon",class:"relative rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors"},{default:m(()=>[v(a(wn),{class:"w-5 h-5 text-neutral-600 dark:text-neutral-400"}),c.value>0?(g(),E(a(rc),{key:0,class:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center bg-red-500 text-[10px]"},{default:m(()=>[fe(X(c.value),1)]),_:1})):le("",!0)]),_:1})]),_:1}),v(a(Os),{class:"w-80 p-0 mr-4",align:"end"},{default:m(()=>[y("div",lc,[p[4]||(p[4]=y("h4",{class:"font-semibold text-sm"},"Notificaciones",-1)),y("div",uc,[v(a(dt),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:p[0]||(p[0]=ye(h=>d.value=!d.value,["stop"])),title:"Configuracin"},{default:m(()=>[v(a(Qo),{class:"w-3.5 h-3.5"})]),_:1}),a(e).length>0?(g(),E(a(dt),{key:0,variant:"ghost",size:"icon",class:"h-6 w-6",onClick:ye(a(s),["stop"]),title:"Borrar historial"},{default:m(()=>[v(a(Jl),{class:"w-3.5 h-3.5"})]),_:1},8,["onClick"])):le("",!0)])]),d.value?(g(),$("div",cc,[y("div",dc,[y("div",pc,[p[5]||(p[5]=y("span",{class:"text-xs font-medium text-neutral-600 dark:text-neutral-400"},"Repeticiones de voz",-1)),y("div",fc,[y("button",{onClick:p[1]||(p[1]=ye(h=>a(l)(Math.max(1,a(r)-1)),["stop"])),class:"w-6 h-6 rounded bg-white dark:bg-neutral-800 border flex items-center justify-center"},"-"),y("span",hc,X(a(r)),1),y("button",{onClick:p[2]||(p[2]=ye(h=>a(l)(Math.min(5,a(r)+1)),["stop"])),class:"w-6 h-6 rounded bg-white dark:bg-neutral-800 border flex items-center justify-center"},"+")])]),v(a(dt),{variant:"outline",size:"sm",class:"w-full text-xs",onClick:p[3]||(p[3]=ye(h=>d.value=!1,["stop"]))},{default:m(()=>[...p[6]||(p[6]=[fe("Volver",-1)])]),_:1})])])):(g(),$("div",mc,[a(e).length===0?(g(),$("div",gc,[v(a(wn),{class:"w-8 h-8 opacity-20 mb-2"}),p[7]||(p[7]=y("p",{class:"text-xs"},"Sin notificaciones",-1))])):(g(),$("div",vc,[(g(!0),$(Pe,null,ot(a(e),h=>(g(),$("div",{key:h.id,class:re(["p-4 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors relative group cursor-pointer",{"bg-blue-50/50 dark:bg-blue-900/10":!h.read}]),onClick:ye(_=>a(t)(h.id),["stop"])},[y("div",_c,[y("h5",{class:re(["text-sm font-medium text-neutral-900 dark:text-white",{"font-bold":!h.read}])},X(h.title),3),y("span",bc,X(i(h.time)),1)]),y("p",wc,X(h.message),1),h.read?le("",!0):(g(),$("div",xc))],10,yc))),128))]))])),a(e).length>0&&!d.value?(g(),$("div",Ec,[v(a(dt),{variant:"ghost",size:"sm",class:"w-full text-xs h-8",onClick:ye(a(n),["stop"])},{default:m(()=>[...p[8]||(p[8]=[fe(" Marcar todo como ledo ",-1)])]),_:1},8,["onClick"])])):le("",!0)]),_:1})]),_:1}))}}),kc=k({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:e}){const s=Te(o,e);return(r,l)=>(g(),E(a(Yn),F({"data-slot":"dialog"},a(s)),{default:m(()=>[T(r.$slots,"default")]),_:3},16))}}),Sc=k({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,t=B(()=>{const{class:n,...s}=e;return s});return(n,s)=>(g(),E(a(Gr),F({"data-slot":"dialog-overlay"},t.value,{class:a(se)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e.class)}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["class"]))}}),Tc=k({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:e}){const t=o,n=e,s=B(()=>{const{class:l,...c}=t;return c}),r=Te(s,n);return(l,c)=>(g(),E(a(rs),null,{default:m(()=>[v(Sc),v(a(as),F({"data-slot":"dialog-content"},a(r),{class:a(se)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t.class)}),{default:m(()=>[T(l.$slots,"default"),v(a(Qn),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:m(()=>[v(a(Zo)),c[0]||(c[0]=y("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Oc=k({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(ei),F({"data-slot":"dialog-trigger"},e),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}}),Ac={class:"group flex items-center gap-2 px-2 sm:px-3 py-1.5 rounded-xl bg-muted/40 border border-transparent hover:bg-muted/60 transition-all duration-200 text-sm text-muted-foreground hover:text-foreground w-auto sm:w-48 md:w-64 justify-between shadow-sm"},Dc={class:"flex items-center gap-2"},Rc={class:"hidden sm:flex items-center gap-1 px-1.5 py-0.5 rounded-md bg-background/50 border border-border/50 text-[10px] font-mono text-muted-foreground group-hover:text-foreground transition-colors"},qc={class:"flex items-center px-4 py-3 border-b border-border"},Nc={class:"max-h-[450px] overflow-y-auto p-2 custom-scrollbar"},Mc={key:0,class:"py-8 text-center text-muted-foreground text-sm"},Pc={key:1,class:"space-y-1"},$c=["onClick"],Ic={class:"flex items-center gap-3 flex-1 min-w-0"},Bc={class:"p-2 rounded-md bg-muted/50 text-muted-foreground group-hover:text-foreground group-hover:bg-blue-500/20 group-hover:text-blue-400 transition-colors flex-shrink-0"},Lc={class:"flex-1 min-w-0"},Fc={class:"text-sm font-medium text-foreground group-hover:text-primary transition-colors"},Uc={class:"text-xs text-muted-foreground truncate"},zc={class:"text-[10px] text-muted-foreground uppercase tracking-wider mt-0.5"},jc=k({__name:"GlobalSearch",setup(o){const e=x(!1),t=x(""),n=[{title:"Dashboard",href:"/dashboard",icon:jl,category:"General",description:"Panel principal con resumen"},{title:"Funcionalidades",href:"/capabilities",icon:Mo,category:"General",description:"Explora lo que puede hacer tu IA"},{title:"Calendario",href:"/calendar",icon:_s,category:"Aplicaciones",description:"Gestiona tus eventos y citas"},{title:"Mi Perfil",href:"/settings/profile",icon:Ha,category:"Configuracin",description:"Informacin personal"},{title:"Contrasea",href:"/settings/password",icon:Wa,category:"Configuracin",description:"Cambiar contrasea"},{title:"Autenticacin de Dos Factores",href:"/settings/two-factor",icon:Wl,category:"Configuracin",description:"Seguridad adicional"},{title:"Apariencia",href:"/settings/appearance",icon:Kl,category:"Configuracin",description:"Tema claro/oscuro"},{title:"Biometra",href:"/settings/biometrics",icon:ws,category:"Integraciones",description:"Autenticacin biomtrica"},{title:"Spotify",href:"/settings/spotify",icon:Kt,category:"Integraciones",description:"Conectar con Spotify"}],s=B(()=>{if(!t.value)return n;const c=t.value.toLowerCase();return n.filter(i=>i.title.toLowerCase().includes(c)||i.category.toLowerCase().includes(c)||i.description.toLowerCase().includes(c))}),r=c=>{c.key==="k"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),e.value=!e.value),c.key==="Escape"&&e.value&&(e.value=!1)},l=c=>{e.value=!1,Ge.visit(c)};return ve(()=>{window.addEventListener("keydown",r)}),Qe(()=>{window.removeEventListener("keydown",r)}),(c,i)=>(g(),E(a(kc),{open:e.value,"onUpdate:open":i[1]||(i[1]=d=>e.value=d)},{default:m(()=>[v(a(Oc),{"as-child":""},{default:m(()=>[y("button",Ac,[y("div",Dc,[v(a(En),{class:"w-4 h-4"}),i[2]||(i[2]=y("span",{class:"font-medium hidden sm:inline"},"Buscar...",-1))]),y("div",Rc,[v(a(Fl),{class:"w-3 h-3"}),i[3]||(i[3]=y("span",null,"K",-1))])])]),_:1}),v(a(Tc),{class:"p-0 gap-0 bg-popover border-border sm:max-w-xl overflow-hidden shadow-2xl"},{default:m(()=>[y("div",qc,[v(a(En),{class:"w-5 h-5 text-muted-foreground mr-3"}),Jt(y("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>t.value=d),placeholder:"Escribe para buscar...",class:"flex-1 bg-transparent border-none outline-none text-foreground placeholder:text-muted-foreground text-base h-8",autoFocus:""},null,512),[[No,t.value]]),i[4]||(i[4]=y("div",{class:"px-2 py-1 rounded bg-muted text-[10px] text-muted-foreground font-mono border border-border"}," ESC",-1))]),y("div",Nc,[s.value.length===0?(g(),$("div",Mc," No se encontraron resultados. ")):(g(),$("div",Pc,[(g(!0),$(Pe,null,ot(s.value,d=>(g(),$("button",{key:d.href,onClick:u=>l(d.href),class:"w-full flex items-center justify-between px-3 py-3 rounded-lg hover:bg-accent group transition-colors text-left"},[y("div",Ic,[y("div",Bc,[(g(),E(Rt(d.icon),{class:"w-4 h-4"}))]),y("div",Lc,[y("div",Fc,X(d.title),1),y("div",Uc,X(d.description),1),y("div",zc,X(d.category),1)])]),v(a(Ga),{class:"w-4 h-4 text-muted-foreground group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all -translate-x-2 group-hover:translate-x-0 flex-shrink-0"})],8,$c))),128))]))]),i[5]||(i[5]=y("div",{class:"px-4 py-2 bg-muted/20 border-t border-border flex items-center justify-between text-[10px] text-muted-foreground"},[y("div",{class:"flex gap-3"},[y("span",null,[fe("Navegar "),y("span",{class:"text-muted-foreground/70"},"")]),y("span",null,[fe("Seleccionar "),y("span",{class:"text-muted-foreground/70"},"")])]),y("div",null," Buscador Global v1.0 ")],-1))]),_:1})]),_:1},8,["open"]))}}),Vc=at(jc,[["__scopeId","data-v-611617e0"]]),Kc={class:"flex items-center gap-2 w-full pr-2 bg-transparent"},Hc={class:"flex items-center gap-2 sm:gap-3 ml-auto"},Wc=k({__name:"SidebarTrigger",props:{class:{}},setup(o){const e=o,{toggleSidebar:t}=ao();return(n,s)=>(g(),$("div",Kc,[v(a(dt),{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",class:re(a(se)("h-7 w-7 shrink-0 bg-transparent",e.class)),onClick:a(t)},{default:m(()=>[v(a(Hl)),s[0]||(s[0]=y("span",{class:"sr-only"},"Toggle Sidebar",-1))]),_:1},8,["class","onClick"]),y("div",Hc,[v(Vc,{class:"shrink-0"}),s[1]||(s[1]=y("div",{class:"hidden sm:block h-4 w-px bg-border mx-1"},null,-1)),v(nc,{class:"shrink-0"}),v(Cc,{class:"shrink-0"})])]))}}),Gc=Pn("peer/menu-button flex w-full items-center gap-3 overflow-hidden rounded-xl p-2 text-left text-sm outline-hidden transition-all duration-300 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:pl-3 focus-visible:ring-2 focus-visible:ring-sidebar-ring active:bg-sidebar-accent disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground data-[active=true]:font-medium data-[active=true]:shadow-sm data-[active=true]:border data-[active=true]:border-sidebar-border data-[state=open]:hover:bg-sidebar-accent group-data-[collapsible=icon]:size-10! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-5 [&>svg]:shrink-0 [&>svg]:text-muted-foreground group-hover:text-sidebar-accent-foreground group-data-[active=true]:[&>svg]:text-primary",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background border border-sidebar-border hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:border-sidebar-accent shadow-sm"},size:{default:"h-10 text-sm",sm:"h-8 text-xs",lg:"h-14 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}}),Xc=k({__name:"AppContent",props:{variant:{},class:{}},setup(o){const e=o,t=B(()=>e.class);return(n,s)=>e.variant==="sidebar"?(g(),E(a(xu),{key:0,class:re(t.value)},{default:m(()=>[T(n.$slots,"default")]),_:3},8,["class"])):(g(),$("main",{key:1,class:re(["mx-auto flex h-full w-full max-w-7xl flex-1 flex-col gap-4 rounded-xl",t.value])},[T(n.$slots,"default")],2))}}),Jc={key:0,class:"flex min-h-screen w-full flex-col"},Yc=k({__name:"AppShell",props:{variant:{}},setup(o){const e=nt().props.sidebarOpen;return(t,n)=>o.variant==="header"?(g(),$("div",Jc,[T(t.$slots,"default")])):(g(),E(a(Su),{key:1,"default-open":a(e)},{default:m(()=>[T(t.$slots,"default")]),_:3},8,["default-open"]))}}),Qc=k({__name:"NavFooter",props:{items:{},class:{}},setup(o){return(e,t)=>(g(),E(a(xs),{class:re(`group-data-[collapsible=icon]:p-0 ${e.$props.class||""}`)},{default:m(()=>[v(a(_u),null,{default:m(()=>[v(a(ro),null,{default:m(()=>[(g(!0),$(Pe,null,ot(o.items,n=>(g(),E(a(lo),{key:n.title},{default:m(()=>[v(a(io),{class:"text-muted-foreground hover:text-foreground transition-colors","as-child":""},{default:m(()=>[v(a(ft),{href:n.href},{default:m(()=>[(g(),E(Rt(n.icon))),y("span",null,X(n.title),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["class"]))}}),Zc=k({__name:"NavMain",props:{items:{}},setup(o){const e=nt();return(t,n)=>(g(),E(a(xs),null,{default:m(()=>[v(a(bu),null,{default:m(()=>[...n[0]||(n[0]=[fe("Platform",-1)])]),_:1}),v(a(ro),null,{default:m(()=>[(g(!0),$(Pe,null,ot(o.items,s=>(g(),E(a(lo),{key:s.title},{default:m(()=>[v(a(io),{"as-child":"","is-active":a(ra)(s.href,a(e).url),tooltip:s.title},{default:m(()=>[v(a(ft),{href:s.href},{default:m(()=>[(g(),E(Rt(s.icon))),y("span",null,X(s.title),1)]),_:2},1032,["href"])]),_:2},1032,["is-active","tooltip"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),ed=k({__name:"Avatar",props:{class:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(ni),{"data-slot":"avatar",class:re(a(se)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class))},{default:m(()=>[T(t.$slots,"default")]),_:3},8,["class"]))}}),td=k({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,t=B(()=>{const{class:n,...s}=e;return s});return(n,s)=>(g(),E(a(ai),F({"data-slot":"avatar-fallback"},t.value,{class:a(se)("bg-muted flex size-full items-center justify-center rounded-full",e.class)}),{default:m(()=>[T(n.$slots,"default")]),_:3},16,["class"]))}}),od=k({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(o){const e=o;return(t,n)=>(g(),E(a(li),F({"data-slot":"avatar-image"},e,{class:"aspect-square size-full"}),{default:m(()=>[T(t.$slots,"default")]),_:3},16))}});function nd(o){if(!o)return"";const e=o.trim().split(" ");return e.length===0?"":e.length===1?e[0].charAt(0).toUpperCase():`${e[0].charAt(0)}${e[e.length-1].charAt(0)}`.toUpperCase()}function sd(){return{getInitials:nd}}const ad={class:"grid flex-1 text-left text-sm leading-tight"},rd={class:"truncate font-medium"},id={key:0,class:"truncate text-xs text-muted-foreground"},Ds=k({__name:"UserInfo",props:{user:{},showEmail:{type:Boolean,default:!1}},setup(o){const e=o,{getInitials:t}=sd(),n=B(()=>e.user.avatar&&e.user.avatar!=="");return(s,r)=>(g(),$(Pe,null,[v(a(ed),{class:"h-8 w-8 overflow-hidden rounded-lg"},{default:m(()=>[n.value?(g(),E(a(od),{key:0,src:o.user.avatar,alt:o.user.name},null,8,["src","alt"])):le("",!0),v(a(td),{class:"rounded-lg text-foreground"},{default:m(()=>[fe(X(a(t)(o.user.name)),1)]),_:1})]),_:1}),y("div",ad,[y("span",rd,X(o.user.name),1),o.showEmail?(g(),$("span",id,X(o.user.email),1)):le("",!0)])],64))}}),xe=o=>({url:xe.url(o),method:"get"});xe.definition={methods:["get","head"],url:"/settings/profile"};xe.url=o=>xe.definition.url+Wo(o);xe.get=o=>({url:xe.url(o),method:"get"});xe.head=o=>({url:xe.url(o),method:"head"});const tn=o=>({action:xe.url(o),method:"get"});tn.get=o=>({action:xe.url(o),method:"get"});tn.head=o=>({action:xe.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...o?.query??o?.mergeQuery??{}}}),method:"get"});xe.form=tn;const $e=o=>({url:$e.url(o),method:"patch"});$e.definition={methods:["patch"],url:"/settings/profile"};$e.url=o=>$e.definition.url+Wo(o);$e.patch=o=>({url:$e.url(o),method:"patch"});const Rs=o=>({action:$e.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});Rs.patch=o=>({action:$e.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});$e.form=Rs;const Ie=o=>({url:Ie.url(o),method:"delete"});Ie.definition={methods:["delete"],url:"/settings/profile"};Ie.url=o=>Ie.definition.url+Wo(o);Ie.delete=o=>({url:Ie.url(o),method:"delete"});const qs=o=>({action:Ie.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...o?.query??o?.mergeQuery??{}}}),method:"post"});qs.delete=o=>({action:Ie.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...o?.query??o?.mergeQuery??{}}}),method:"post"});Ie.form=qs;Object.assign(xe,xe),Object.assign($e,$e),Object.assign(Ie,Ie);const ld={class:"flex items-center gap-2 px-1 py-1.5 text-left text-sm"},ud=k({__name:"UserMenuContent",props:{user:{}},setup(o){const e=()=>{Ge.flushAll()};return(t,n)=>(g(),$(Pe,null,[v(a(ac),{class:"p-0 font-normal"},{default:m(()=>[y("div",ld,[v(Ds,{user:o.user,"show-email":!0},null,8,["user"])])]),_:1}),v(a(Tn)),v(a(sc),null,{default:m(()=>[v(a(Eo),{"as-child":!0},{default:m(()=>[v(a(ft),{class:"block w-full",href:a(xe)(),prefetch:"",as:"button"},{default:m(()=>[v(a(Qo),{class:"mr-2 h-4 w-4"}),n[0]||(n[0]=fe(" Settings ",-1))]),_:1},8,["href"])]),_:1}),v(a(Eo),{"as-child":!0},{default:m(()=>[v(a(ft),{class:"block w-full",href:"/settings/biometrics",prefetch:"",as:"button"},{default:m(()=>[v(a(ws),{class:"mr-2 h-4 w-4"}),n[1]||(n[1]=fe(" Huella Digital ",-1))]),_:1})]),_:1})]),_:1}),v(a(Tn)),v(a(Eo),{"as-child":!0},{default:m(()=>[v(a(ft),{class:"block w-full",href:a(Va)(),onClick:e,as:"button","data-test":"logout-button"},{default:m(()=>[v(a(Ka),{class:"mr-2 h-4 w-4"}),n[2]||(n[2]=fe(" Log out ",-1))]),_:1},8,["href"])]),_:1})],64))}}),cd=k({__name:"NavUser",setup(o){const t=nt().props.auth.user,{isMobile:n,state:s}=ao();return(r,l)=>(g(),E(a(ro),null,{default:m(()=>[v(a(lo),null,{default:m(()=>[v(a(Ts),null,{default:m(()=>[v(a(As),{"as-child":""},{default:m(()=>[v(a(io),{size:"lg",class:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground","data-test":"sidebar-menu-button"},{default:m(()=>[v(Ds,{user:a(t)},null,8,["user"]),v(a(Ll),{class:"ml-auto size-4"})]),_:1})]),_:1}),v(a(Os),{class:"w-(--reka-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:a(n)?"bottom":a(s)==="collapsed"?"left":"bottom",align:"end","side-offset":4},{default:m(()=>[v(ud,{user:a(t)},null,8,["user"])]),_:1},8,["side"])]),_:1})]),_:1})]),_:1}))}}),dd={class:"relative"},pd={class:"w-10 h-10 rounded-xl bg-sidebar-accent border border-sidebar-border flex items-center justify-center relative shadow-inner group-data-[collapsible=icon]:w-8 group-data-[collapsible=icon]:h-8 group-data-[collapsible=icon]:rounded-lg transition-all"},fd=k({__name:"AppSidebar",setup(o){const e=[{title:"Dashboard",href:hn(),icon:Vl},{title:"Funcionalidades",href:"/capabilities",icon:Mo},{title:"Notas",href:"/notes",icon:bs},{title:"Calendario",href:"/calendar",icon:_s},{title:"Contactos",href:"/contacts",icon:Ql}],t=[{title:"Configuracin",href:"/settings/profile",icon:Qo}];return(n,s)=>(g(),$(Pe,null,[v(a(gu),{collapsible:"icon",variant:"inset",class:"bg-sidebar border-r border-sidebar-border relative overflow-hidden"},{default:m(()=>[v(a(wu),{class:"relative z-10"},{default:m(()=>[v(a(ro),null,{default:m(()=>[v(a(lo),null,{default:m(()=>[v(a(io),{size:"lg","as-child":"",class:"hover:bg-sidebar-accent transition-colors"},{default:m(()=>[v(a(ft),{href:a(hn)(),class:"flex items-center gap-3"},{default:m(()=>[y("div",dd,[s[0]||(s[0]=y("div",{class:"absolute inset-0 bg-primary/30 blur-lg rounded-full animate-pulse-slow dark:opacity-100 opacity-50"},null,-1)),y("div",pd,[v(a(Mo),{class:"w-5 h-5 text-primary group-data-[collapsible=icon]:w-4 group-data-[collapsible=icon]:h-4"})])]),s[1]||(s[1]=y("span",{class:"font-semibold text-sidebar-foreground group-data-[collapsible=icon]:hidden"},"AsistentOS",-1))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1}),v(a(vu),{class:"relative z-10"},{default:m(()=>[v(Zc,{items:e})]),_:1}),v(a(yu),{class:"relative z-10"},{default:m(()=>[v(Qc,{items:t}),v(cd)]),_:1})]),_:1}),T(n.$slots,"default")],64))}}),We=x([{title:"Dashboard",name:"/dashboard",url:"/dashboard",closable:!1}]),ct=x("/dashboard");function hd(){return{tabs:We,activeTab:ct,addTab:n=>{We.value.find(r=>r.name===n.name)||We.value.push(n),ct.value=n.name},removeTab:n=>{const s=We.value.findIndex(r=>r.name===n);if(s!==-1){const r=We.value[s];if(ct.value===n){const l=We.value[s+1]||We.value[s-1];l&&(ct.value=l.name,Ge.visit(l.url))}r.closable!==!1&&We.value.splice(s,1)}},activateTab:n=>{const s=We.value.find(r=>r.name===n);s&&ct.value!==n&&(ct.value=n,Ge.visit(s.url))}}}const Je=x([]),md=()=>{const o=localStorage.getItem("assistant_reminders");if(o)try{Je.value=JSON.parse(o)}catch(e){console.error("Error loading reminders",e),Je.value=[]}},On=()=>{localStorage.setItem("assistant_reminders",JSON.stringify(Je.value))};function Ns(o,e=!0){const t=x(null),{addNotification:n}=uo(),s=(l,c)=>{Notification.permission!=="granted"&&Notification.requestPermission();const i=Date.now(),d=i+c*1e3,u={id:i,text:l,timestamp:d,fired:!1};Je.value.push(u),On(),console.log(` Recordatorio guardado: "${l}" para ${new Date(d).toLocaleTimeString()}`)},r=()=>{const l=Date.now();let c=!1;Je.value.forEach(i=>{!i.fired&&i.timestamp<=l&&(console.log(` EJECUTANDO RECORDATORIO: ${i.text}`),o(` Recordatorio: ${i.text}`),n("Recordatorio",i.text,"info"),Notification.permission==="granted"&&new Notification("Recordatorio MoodOrbs",{body:i.text,icon:"/favicon.ico"}),i.fired=!0,c=!0)}),c&&(Je.value=Je.value.filter(i=>!i.fired),On())};return ve(()=>{md(),e&&(t.value=setInterval(r,1e3))}),Qe(()=>{t.value&&clearInterval(t.value)}),{reminders:Je,addReminder:s}}function on(){const o=x(!1),e=x([]),t=x(""),n=x(""),s=x(0);let r=!1;const l=p=>{const h=p.filter(b=>b.lang.startsWith("es")),_=new Map;return h.forEach(b=>{const O=b.name.replace(/\s*\(.*?\)\s*/g,"").trim();if(!_.has(O))_.set(O,b);else{const q=_.get(O);(b.name.includes("Enhanced")||b.name.includes("Premium"))&&!(q.name.includes("Enhanced")||q.name.includes("Premium"))&&_.set(O,b)}}),Array.from(_.values()).sort((b,O)=>b.name.localeCompare(O.name))},c=()=>new Promise(p=>{let h=window.speechSynthesis.getVoices();if(h.length>0){e.value=l(h),p(h);return}window.speechSynthesis.onvoiceschanged=()=>{h=window.speechSynthesis.getVoices(),e.value=l(h),p(h)};const _=setInterval(()=>{h=window.speechSynthesis.getVoices(),h.length>0&&(clearInterval(_),e.value=l(h),p(h))},100)}),i=()=>{const p=window.AudioContext||window.webkitAudioContext;if(p){const h=new p,_=h.createOscillator(),b=h.createGain();b.gain.value=0,_.connect(b),b.connect(h.destination),_.start(0),_.stop(.001)}if(window.speechSynthesis){const h=new SpeechSynthesisUtterance("");h.volume=0,window.speechSynthesis.speak(h)}},d=async(p,h)=>{if(r=!1,!p)return;let _=p;_=_.replace(/```[\s\S]*?```/g,""),_=_.replace(/`[^`]+`/g,""),_=_.replace(/\*\*([^*]+)\*\*/g,"$1"),_=_.replace(/\*([^*]+)\*/g,"$1"),_=_.replace(/__([^_]+)__/g,"$1"),_=_.replace(/_([^_]+)_/g,"$1"),_=_.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),_=_.replace(/^#{1,6}\s+/gm,""),_=_.replace(/^[\s]*[-*+]\s+/gm,""),_=_.replace(/^[\s]*\d+\.\s+/gm,""),_=_.replace(/^>\s+/gm,""),_=_.replace(/^[-*_]{3,}$/gm,""),_=_.replace(/\n{3,}/g,`

`),_=_.replace(/\s{2,}/g," "),_=_.trim(),_=_.replace(/\b[\w\.-]+@[\w\.-]+\.\w{2,4}\b/g,"el correo indicado"),window.speechSynthesis.cancel(),o.value=!0,n.value=_.toLowerCase().trim();const b=new SpeechSynthesisUtterance(_),O=await c(),C=nt().props.auth?.user?.preferred_voice;let A;h&&(A=h),!A&&C&&(A=O.find(I=>I.name===C)),A||(A=O.find(I=>I.name.includes("Paulina"))),A||(A=O.find(I=>I.name.includes("Google espaol"))),A||(A=O.find(I=>I.name.includes("Mnica"))),A||(A=O.find(I=>I.lang.includes("es")&&(I.name.includes("Female")||I.name.includes("Mujer")))),A||(A=O.find(I=>I.lang.includes("es"))),A&&(b.voice=A,t.value=A.name,console.log(" Voz seleccionada:",A.name),b.pitch=1,b.rate=1),b.onend=()=>{r||(o.value=!1,s.value=Date.now(),window.dispatchEvent(new CustomEvent("assistant-speech-ended")))},window.speechSynthesis.speak(b)},u=()=>{r=!0,window.speechSynthesis.cancel(),setTimeout(()=>{window.speechSynthesis.speaking&&window.speechSynthesis.cancel()},50),o.value=!1};return window.addEventListener("beforeunload",()=>{window.speechSynthesis.cancel()}),c(),{isSpeaking:o,speak:d,stopSpeaking:u,currentVoiceId:t,availableVoices:e,ensureVoicesLoaded:c,unlockAudio:i,lastSpokenText:n,lastSpokenTime:s}}function gd(){const o=x(0),e=x(!1),t=async()=>{console.log(" Visualizacin de audio desactivada (Modo Texto).")},n=()=>{e.value=!1,o.value=0};return Qe(()=>{n()}),{audioLevel:o,isRecording:e,startVisualization:t,stopVisualization:n}}const vd=`
CONTEXTO DE BASE DE DATOS (MySQL / Laravel):
- appointments (id, user_id, title, description, start_time, end_time, reminder_minutes_before, created_at, updated_at, status)
- assistant_preferences (id, user_id, assistant_name, palette_id, created_at, updated_at)
- biometric_credentials (id, user_id, credential_id, public_key, name, sign_count, created_at, updated_at)
- cache (key, value, expiration)
- cache_locks (key, owner, expiration)
- contacts (id, name, phone, email, company, notes, created_at, updated_at, user_id)
- expenses (id, user_id, amount, description, category, date, created_at, updated_at)
- job_batches (id, name, total_jobs, pending_jobs, failed_jobs, failed_job_ids, options, cancelled_at, created_at, finished_at)
- jobs (id, queue, payload, attempts, reserved_at, available_at, created_at)
- memories (id, user_id, key, value, type, created_at, updated_at)
- notes (id, user_id, title, content, created_at, updated_at)
- palettes (id, name, created_at, updated_at)
- sessions (id, user_id, ip_address, user_agent, payload, last_activity)
- users (id, name, email, preferred_voice, email_verified_at, password, security_nip, two_factor_secret, two_factor_recovery_codes, two_factor_confirmed_at, remember_token, created_at, updated_at, is_admin, spotify_id, spotify_access_token, spotify_refresh_token, spotify_token_expires_at)
`;function yd(o){let e=[],t="";return{initGeminiChat:async c=>{console.log(" Initializing Gemini AI via Proxy..."),e=[],t=`
            Eres MoodOrbs AI, una Superinteligencia Artificial de Vanguardia integrada en un sistema empresarial.
            
            FECHA Y HORA ACTUAL DEL SISTEMA: ${new Date().toLocaleString("es-MX",{dateStyle:"full",timeStyle:"short"})}.
            
            IDIOMA: ESPAOL (ES-MX).
            
            TU OBJETIVO: Controlar TOTALMENTE el sistema mediante JSONs de accin precisos.
            
            REGLA DE ORO (FORMATO):
            **TU RESPUESTA DEBE SER NICAMENTE UN OBJETO JSON (O ARRAY DE OBJETOS).**
            **NO ESCRIBAS TEXTO FUERA DEL JSON.**
            **SI QUIERES HABLAR, USA EL CAMPO "speech" DENTRO DEL JSON.**

            CAPACIDADES Y COMANDOS (INTENTS):

            1. **VOLCADO CEREBRAL (BRAIN DUMP)** (Multi-Intents)
               - SI EL USUARIO DICE: "Recuerdame llamar a Juan y agrega leche a la lista y agenda reunin maana a las 3",
               - TU RESPUESTA DEBE SER UN ARRAY DE OBJETOS: [ { "intent": "reminder", ... }, { "intent": "note_create", ... }, { "intent": "calendar_schedule", ... } ]
               - Detecta MLTIPLES intenciones y sepralas.

            2. **ASISTENTE DE REUNIONES** ("meeting_notes") (NUEVO)
               - Si el usuario dicta un resumen largo o dice "Toma nota de la reunin":
               - { "intent": "meeting_notes", "content": "Texto completo transcrito", "summary": "Resumen ejecutivo", "action_items": ["Tarea 1", "Tarea 2"] }

            3. **ANLISIS DE DOCUMENTOS** (PRIORIDAD ALTA)
               - SI EL USUARIO ADJUNT UN DOCUMENTO (vers el texto del documento en el contexto):
               - RESPONDE DIRECTAMENTE usando el contenido del documento
               - USA "conversational" para responder sobre el documento
               - Ejemplo: Usuario sube un PDF y pregunta "De qu trata?"  Lee el documento adjunto y responde
               - NO busques en la base de datos si la pregunta es sobre el documento adjunto
               - El documento aparecer marcado como "--- INICIO CONTEXTO DOCUMENTO ADJUNTO ---"

            4. **BSQUEDA DE CONOCIMIENTO (SEMNTICA)** ("knowledge_search") (MEJORADO)
               - Para preguntas como "Qu dijo Miguel?", "Dnde dej las llaves?", "Qu acordamos en el proyecto?":
               - { "intent": "knowledge_search", "query": "Palabras clave contextauales" }
               - Extrae las palabras clave ms importantes del *OBJETO* buscado.
               - IMPORTANTE: **NO incluyas el nombre del usuario actual ("Angel") en la query**, solo lo que busca.
               - Ej: "Para qu da quedo mi cita?" -> query: "cita" (NO "cita Angel").

            5. **CONVERSACIONAL Y WEB** ("conversational", "google_search")
               - SI PREGUNTA POR EL CONTEXTO INMEDIATO ("Qu da dijiste?", "Qu acabas de hacer?"): Usa "conversational".
               - SI PREGUNTA DATOS EN TIEMPO REAL (clima, dolar): Usa "google_search".
               - SI HAY UN DOCUMENTO ADJUNTO y pregunta sobre l: Usa "conversational" con el contexto del documento.
               - PARA TODO LO DEMS: Usa "conversational".

            5. **NOTAS** ("note_create", "note_search", "note_list")
               - Crear: { "intent": "note_create", "title": "Ttulo", "content": "Contenido" }
               - Buscar: { "intent": "note_search", "query": "Texto a buscar" }
                - Listar: { "intent": "note_list" }
                - Borrar TODAS: { "intent": "note_delete_all" } (Solo si usuario pide explcitamente borrar TODO).

            6. **CALENDARIO** ("calendar_schedule", "calendar_view", "calendar_next", "calendar_search")
               - Agendar: { "intent": "calendar_schedule", "title": "Evento", "date": "YYYY-MM-DD", "time": "HH:MM (24h)" }
               - Ver: { "intent": "calendar_view" }
               - Prximo: { "intent": "calendar_next" }
               - Buscar: { "intent": "calendar_search", "query": "Texto a buscar" } (ej: "Cundo es la cita con Juan?")
               - Borrar TODO: { "intent": "calendar_delete_all" } (Solo si usuario lo pide explcitamente).

            7. **RECORDATORIOS** ("reminder", "reminder_list", "reminder_delete")
               - Crear: { "intent": "reminder", "reminder_text": "Texto", "duration_seconds": 60 }
               - Listar: { "intent": "reminder_list" }

            8. **CONTACTOS** ("contact_add", "contact_search", "contact_list", "contact_message")
               - Agregar: { "intent": "contact_add", "contact_name": "Nombre", "phone_number": "Numero" }
               - Buscar/Informes: { "intent": "contact_search", "query": "Nombre" } (Para buscar "todo tipo de informes" sobre X).
               - Listar: { "intent": "contact_list" }
               - Enviar Mensaje (WhatsApp): { "intent": "contact_message", "contact_name": "NombrePersona", "message_content": "Texto del mensaje" }

            9. **SPOTIFY** ("spotify")
               - Reproducir: { "intent": "spotify", "action": "play", "query": "Cancion/Artista", "type": "track" | "artist_random" }
               - Controles: { "intent": "spotify", "action": "pause" | "next" | "previous" | "volume_up" | "volume_down" }

            10. **REPORTES Y DATOS** ("report")
               - Generar Grfica: { "intent": "report", "title": "Ttulo", "report_type": "bar"|"pie"|"metric", "sql": "...", "x_axis": "...", "y_axis": "...", "insight": "..." }
               - Exportar Excel/CSV: { "intent": "report", "report_type": "excel"|"csv", "sql": "SELECT ...", "title": "Nombre Archivo" }
               - USA "AS" en SQL. TRADUCE ENUMs. EJE X NICO.

            11. **BASE DE DATOS Y GASTOS** ("select", "insert", "update", "delete", "expense_create", "expense_list")
               - Gestin directa. *SEGURIDAD*: Filtra siempre por user_id = [ID_USUARIO_ACTUAL].

            12. **MEMORIA / SECOND BRAIN** ("memory_save")
               - Guardar dato explcito: { "intent": "memory_save", "value": "...", "key": "..." }

            13. **GENERADOR DE DOCUMENTOS** ("document_generate")
               - Generar PDF/Word: { "intent": "document_generate", "document_type": "contract"|"proposal"|"letter", "format": "pdf"|"word", "title": "Ttulo", "content": "Texto formateado...", "description": "..." }
               - IMPORTANTE: 'content' debe ser AMABLE, FORMAL y EXTENSO. Si es para Word/PDF, incluye saltos de lnea (
).
               - FORMATO PREMIUM: El contenido debe ser elegante.

            14. **INVESTIGADOR PROFUNDO** ("deep_research") 
               - Investigacin Exhaustiva: { "intent": "deep_research", "topic": "Tema a investigar", "depth": "basic"|"detailed" }
               - salo cuando el usuario pida comparar, investigar a fondo, buscar manuales, o planear viajes complejos.

            15. **RUTINAS / MACROS** ("macro_goodmorning", "macro_focus")
               - "Buenos das": { "intent": "macro_goodmorning" } (Saluda, lee clima/agenda, pone msica suave)
               - "Modo Enfoque": { "intent": "macro_focus" } (Tema oscuro, Msica LoFi, Silencio)

            16. **SISTEMA** ("navigate", "change_theme", "biometrics_config", "conversational", "weather_check", "silence", "update_name")
               - Navegar: { "intent": "navigate", "url": "/ruta" }
               - Clima: { "intent": "weather_check" }
               - Silencio: { "intent": "silence" }
               - Cambiar NOMBRE del asistente: { "intent": "update_name", "new_name": "Nuevo Nombre" } (Si el usuario te pide cambiar tu nombre, ACEPTA y genera este JSON).

            ESQUEMA DE BASE DE DATOS:
            ${JSON.stringify(vd)}

            REGLAS ABSOLUTAS:
            1. SIEMPRE responde con JSON vlido
            2. NUNCA escribas texto fuera del JSON
            3. Si el usuario da VARIAS instrucciones en una frase, responde con un ARRAY de objetos JSON.
            4. Si usas "knowledge_search", no inventes respuestas, busca en la base.
            5. VALIDA tu JSON antes de responder
            `},sendMessage:async(c,i)=>{const d=[{text:c}];i&&(console.log(" Adding document context to message..."),d.push({text:`

--- INICIO CONTEXTO DOCUMENTO ADJUNTO (PDF/TEXTO) ---
${i}
--- FIN CONTEXTO DOCUMENTO ---

Instruccin: Usa la informacin de este documento si es relevante para responder.`}));const u={role:"user",parts:d},p=[...e,u];try{const h=await fetch("/api/gemini/proxy",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({contents:p,system_instruction:t})});if(!h.ok)throw console.error("Proxy Response Error:",h.status),new Error("Error comunicando con el asistente (Proxy).");const b=(await h.json()).candidates?.[0]?.content?.parts?.[0]?.text||"";if(!b)throw new Error("Respuesta vaca de Gemini");return e.push(u),e.push({role:"model",parts:[{text:b}]}),b.replace(/```json/g,"").replace(/```/g,"").trim()}catch(h){throw console.error(" Error sending message to Gemini Proxy:",h),h}},summarizeResults:async(c,i)=>{const d=Array.isArray(i)?i.slice(0,10):i,p=[{role:"user",parts:[{text:`
            ACTA COMO: Un asistente personal amable y elocuente.
            FECHA Y HORA ACTUAL: ${new Date().toLocaleString("es-MX",{dateStyle:"full",timeStyle:"short"})}.
            
            TAREA: El usuario pregunt: "${c}". La base de datos devolvi: ${JSON.stringify(d)}
            OBJETIVO: Genera una respuesta verbal (speech) NATURAL y AMIGABLE en espaol.
            
            REGLAS:
            1. Solo texto plano. NADA DE JSON.
            2. USA TIEMPO RELATIVO: Si la fecha es hoy di "hoy", si es maana di "maana", "pasado maana", o "el prximo lunes".
            3. S conciso pero natural.
            4. Menciona con QUIN es la cita si hay nombre en el ttulo.
        `}]}];try{const b=(await(await fetch("/api/gemini/proxy",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({contents:p})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";console.log(" Resumen Inteligente:",b);let O=b.trim();try{const M=O.match(/```json\s*([\s\S]*?)\s*```/)||O.match(/\{[\s\S]*\}/);if(M){const C=JSON.parse(M[0]||M[1]);if(C.speech||C.response)return C.speech||C.response}}catch{}const q=O.match(/"(speech|response)"\s*:\s*"([^"]*)"/i);return q&&q[2]?q[2]:(O=O.replace(/^["']|["']$/g,"").replace(/^\{|\}$/g,"").trim(),O=O.replace(/^(speech|response)\s*:\s*/i,""),O)}catch(h){return console.error("Error resumiendo datos:",h),null}},transcribeAudio:async c=>{console.log(" Transcribiendo audio con Gemini...");const d=[{role:"user",parts:[{text:"Transcribe EXACTAMENTE lo que dice este audio. Solo el texto, sin comentarios."},{inline_data:{mime_type:"audio/webm",data:c}}]}];try{const h=(await(await fetch("/api/gemini/proxy",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({contents:d,generationConfig:{temperature:.2,responseMimeType:"text/plain"}})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";return console.log(" Transcripcin:",h),/^\d{1,2}:\d{2}(\n\d{1,2}:\d{2})*$/.test(h.trim())?(console.warn(" Transcripcin rechazada (Timestamps detectados):",h),""):h.trim().length<2?(console.warn(" Transcripcin rechazada (Muy corta):",h),""):h.trim()}catch(u){throw console.error("Error transcribiendo audio:",u),u}}}}function _d(o){const e=x(!1),t=x("Escribe tu comando..."),n=x(!1),s=x(!1),r=x("");let l=null,c="",i=null;const d=()=>{const{webkitSpeechRecognition:_,SpeechRecognition:b}=window,O=b||_;if(!O)return t.value="Tu navegador no soporta voz.",n.value=!0,null;const q=new O;return q.continuous=!0,q.interimResults=!0,q.lang="es-ES",q.onstart=()=>{s.value||(t.value="Escuchando..."),e.value=!0,s.value=!1},q.onresult=M=>{let C="",A="";for(let I=M.resultIndex;I<M.results.length;++I)M.results[I].isFinal?C+=M.results[I][0].transcript:A+=M.results[I][0].transcript;A&&(r.value=A),C&&C.trim().length>0&&(console.log(" Fragmento (Final):",C),c+=" "+C),A?r.value=(c+" "+A).trim():r.value=c.trim(),l&&clearTimeout(l),(c.trim().length>0||A.trim().length>0)&&(l=setTimeout(()=>{console.log(" Silencio detectado (Fin de la orden). Procesando..."),q.stop();const I=c.trim();I&&(o(I),r.value="",c="")},800))},q.onerror=M=>{M.error!=="no-speech"&&(console.error(" Error de reconocimiento de voz:",M.error),(M.error==="not-allowed"||M.error==="service-not-allowed")&&(h(),t.value="Permiso denegado"))},q.onend=()=>{if(e.value){s.value=!0;try{q.start()}catch(M){console.log(" Error reiniciando voz:",M),e.value=!1}}else t.value="IA Pausada"},q},u=()=>{c="",r.value="",l&&clearTimeout(l)},p=()=>{if(!e.value&&(n.value=!1,i||(i=d()),i))try{u(),i.start()}catch(_){console.error("Error starting recognition:",_)}},h=()=>{i&&(l&&clearTimeout(l),i.stop(),e.value=!1),t.value="IA Desactivada"};return Qe(()=>{e.value=!1,i&&(l&&clearTimeout(l),i.stop())}),{isListening:e,statusMessage:t,hasError:n,startListening:p,stopListening:h,partialTranscript:r,resetTranscript:u}}function bd(o){const e=nt(),t=x(!1),n=x(""),s=x(""),r=x(3),l=x(!1),c=x(null),i=x("");return{showNipModal:t,nipInput:n,nipError:s,securityAttempts:r,showAccessDeniedModal:l,checkAdmin:()=>{const _=e.props.auth.user;return _&&_.is_admin},requireNip:(_,b)=>{o(`${b}. Esta accin requiere autorizacin. Ingresa tu NIP.`),c.value=_,t.value=!0,n.value="",s.value="",r.value=3,i.value="Requiere Autorizacin"},verifyNip:async _=>{if(!(r.value<=0))try{i.value="Verificando...";const b=await _(c.value,n.value);t.value=!1,c.value=null,b?i.value="Confirmar datos...":(i.value="Autorizado",o("Autorizacin correcta."))}catch{r.value--;const O=`NIP Incorrecto. Quedan ${r.value} intentos.`;s.value=O,o(O),r.value<=0&&(s.value="BLOQUEADO",o("Acceso bloqueado."),setTimeout(()=>{t.value=!1},2e3))}},cancelNip:()=>{t.value=!1,o("Operacin cancelada.")},statusMessage:i}}function wd(o){const e=x(!1),t=x({name:"",email:"",password:""}),n=x(""),s=x(null),r=x("");return{showUserModal:e,newUserForm:t,openUserModal:(d,u,p,h,_=null)=>{t.value={name:d,email:u,password:p},n.value=h,s.value=_,e.value=!0},confirmCreateUser:async()=>{const d=`INSERT INTO users (name, email, password) VALUES ('${t.value.name}', '${t.value.email}', '${t.value.password}')`;r.value="Creando usuario...";try{const p=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"insert",sql:d,nip:s.value})})).json();p.success?(o(`Usuario ${t.value.name} creado correctamente.`),r.value="Usuario creado.",e.value=!1):p.error&&p.error.includes("ya existe")?(o("El correo ya est registrado. Por favor, asigna otro correo."),r.value="Correo duplicado"):(o(`Error: ${p.error||"Hubo un error al crear el usuario."}`),r.value="Error al crear")}catch{o("Error de conexin."),r.value="Error de conexin"}},cancelCreateUser:()=>{e.value=!1,s.value=null,o("Cancelado."),r.value="Operacin cancelada."},statusMessage:r}}const Ve=Object.create(null);Ve.open="0";Ve.close="1";Ve.ping="2";Ve.pong="3";Ve.message="4";Ve.upgrade="5";Ve.noop="6";const Ht=Object.create(null);Object.keys(Ve).forEach(o=>{Ht[Ve[o]]=o});const Fo={type:"error",data:"parser error"},Ms=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ps=typeof ArrayBuffer=="function",$s=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,nn=({type:o,data:e},t,n)=>Ms&&e instanceof Blob?t?n(e):An(e,n):Ps&&(e instanceof ArrayBuffer||$s(e))?t?n(e):An(new Blob([e]),n):n(Ve[o]+(e||"")),An=(o,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(o)};function Dn(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}let Co;function xd(o,e){if(Ms&&o.data instanceof Blob)return o.data.arrayBuffer().then(Dn).then(e);if(Ps&&(o.data instanceof ArrayBuffer||$s(o.data)))return e(Dn(o.data));nn(o,!1,t=>{Co||(Co=new TextEncoder),e(Co.encode(t))})}const Rn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<Rn.length;o++)kt[Rn.charCodeAt(o)]=o;const Ed=o=>{let e=o.length*.75,t=o.length,n,s=0,r,l,c,i;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(n=0;n<t;n+=4)r=kt[o.charCodeAt(n)],l=kt[o.charCodeAt(n+1)],c=kt[o.charCodeAt(n+2)],i=kt[o.charCodeAt(n+3)],u[s++]=r<<2|l>>4,u[s++]=(l&15)<<4|c>>2,u[s++]=(c&3)<<6|i&63;return d},Cd=typeof ArrayBuffer=="function",sn=(o,e)=>{if(typeof o!="string")return{type:"message",data:Is(o,e)};const t=o.charAt(0);return t==="b"?{type:"message",data:kd(o.substring(1),e)}:Ht[t]?o.length>1?{type:Ht[t],data:o.substring(1)}:{type:Ht[t]}:Fo},kd=(o,e)=>{if(Cd){const t=Ed(o);return Is(t,e)}else return{base64:!0,data:o}},Is=(o,e)=>{switch(e){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}},Bs="",Sd=(o,e)=>{const t=o.length,n=new Array(t);let s=0;o.forEach((r,l)=>{nn(r,!1,c=>{n[l]=c,++s===t&&e(n.join(Bs))})})},Td=(o,e)=>{const t=o.split(Bs),n=[];for(let s=0;s<t.length;s++){const r=sn(t[s],e);if(n.push(r),r.type==="error")break}return n};function Od(){return new TransformStream({transform(o,e){xd(o,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}o.data&&typeof o.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let ko;function zt(o){return o.reduce((e,t)=>e+t.length,0)}function jt(o,e){if(o[0].length===e)return o.shift();const t=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)t[s]=o[0][n++],n===o[0].length&&(o.shift(),n=0);return o.length&&n<o[0].length&&(o[0]=o[0].slice(n)),t}function Ad(o,e){ko||(ko=new TextDecoder);const t=[];let n=0,s=-1,r=!1;return new TransformStream({transform(l,c){for(t.push(l);;){if(n===0){if(zt(t)<1)break;const i=jt(t,1);r=(i[0]&128)===128,s=i[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(zt(t)<2)break;const i=jt(t,2);s=new DataView(i.buffer,i.byteOffset,i.length).getUint16(0),n=3}else if(n===2){if(zt(t)<8)break;const i=jt(t,8),d=new DataView(i.buffer,i.byteOffset,i.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(Fo);break}s=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(zt(t)<s)break;const i=jt(t,s);c.enqueue(sn(r?i:ko.decode(i),e)),n=0}if(s===0||s>o){c.enqueue(Fo);break}}}})}const Ls=4;function pe(o){if(o)return Dd(o)}function Dd(o){for(var e in pe.prototype)o[e]=pe.prototype[e];return o}pe.prototype.on=pe.prototype.addEventListener=function(o,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(e),this};pe.prototype.once=function(o,e){function t(){this.off(o,t),e.apply(this,arguments)}return t.fn=e,this.on(o,t),this};pe.prototype.off=pe.prototype.removeListener=pe.prototype.removeAllListeners=pe.prototype.removeEventListener=function(o,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+o];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+o],this};pe.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+o],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};pe.prototype.emitReserved=pe.prototype.emit;pe.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};pe.prototype.hasListeners=function(o){return!!this.listeners(o).length};const po=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ae=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Rd="arraybuffer";function Fs(o,...e){return e.reduce((t,n)=>(o.hasOwnProperty(n)&&(t[n]=o[n]),t),{})}const qd=Ae.setTimeout,Nd=Ae.clearTimeout;function fo(o,e){e.useNativeTimers?(o.setTimeoutFn=qd.bind(Ae),o.clearTimeoutFn=Nd.bind(Ae)):(o.setTimeoutFn=Ae.setTimeout.bind(Ae),o.clearTimeoutFn=Ae.clearTimeout.bind(Ae))}const Md=1.33;function Pd(o){return typeof o=="string"?$d(o):Math.ceil((o.byteLength||o.size)*Md)}function $d(o){let e=0,t=0;for(let n=0,s=o.length;n<s;n++)e=o.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Us(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Id(o){let e="";for(let t in o)o.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(o[t]));return e}function Bd(o){let e={},t=o.split("&");for(let n=0,s=t.length;n<s;n++){let r=t[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Ld extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class an extends pe{constructor(e){super(),this.writable=!1,fo(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Ld(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=sn(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Id(e);return t.length?"?"+t:""}}class Fd extends an{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Td(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Sd(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Us()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let zs=!1;try{zs=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ud=zs;function zd(){}class jd extends Fd{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class ze extends pe{constructor(e,t,n){super(),this.createRequest=e,fo(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Fs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=ze.requestsCount++,ze.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zd,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ze.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ze.requestsCount=0;ze.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",qn);else if(typeof addEventListener=="function"){const o="onpagehide"in Ae?"pagehide":"unload";addEventListener(o,qn,!1)}}function qn(){for(let o in ze.requests)ze.requests.hasOwnProperty(o)&&ze.requests[o].abort()}const Vd=(function(){const o=js({xdomain:!1});return o&&o.responseType!==null})();class Kd extends jd{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Vd&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ze(js,this.uri(),e)}}function js(o){const e=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ud))return new XMLHttpRequest}catch{}if(!e)try{return new Ae[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vs=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Hd extends an{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Vs?{}:Fs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;nn(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}s&&po(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Us()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const So=Ae.WebSocket||Ae.MozWebSocket;class Wd extends Hd{createSocket(e,t,n){return Vs?new So(e,t,n):t?new So(e,t):new So(e)}doWrite(e,t){this.ws.send(t)}}class Gd extends an{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Ad(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=Od();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{n.read().then(({done:c,value:i})=>{c||(this.onPacket(i),r())}).catch(c=>{})};r();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&po(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Xd={websocket:Wd,webtransport:Gd,polling:Kd},Jd=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yd=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Uo(o){if(o.length>8e3)throw"URI too long";const e=o,t=o.indexOf("["),n=o.indexOf("]");t!=-1&&n!=-1&&(o=o.substring(0,t)+o.substring(t,n).replace(/:/g,";")+o.substring(n,o.length));let s=Jd.exec(o||""),r={},l=14;for(;l--;)r[Yd[l]]=s[l]||"";return t!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Qd(r,r.path),r.queryKey=Zd(r,r.query),r}function Qd(o,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Zd(o,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,r){s&&(t[s]=r)}),t}const zo=typeof addEventListener=="function"&&typeof removeEventListener=="function",Wt=[];zo&&addEventListener("offline",()=>{Wt.forEach(o=>o())},!1);class Ye extends pe{constructor(e,t){if(super(),this.binaryType=Rd,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Uo(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Uo(t.host).host);fo(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Bd(this.opts.query)),zo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ls,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ye.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Ye.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=Pd(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,po(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Ye.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Wt.indexOf(this._offlineEventListener);n!==-1&&Wt.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ye.protocol=Ls;class ep extends Ye{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Ye.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ye.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function r(){n||(n=!0,u(),t.close(),t=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=t.name,r(),this.emitReserved("upgradeError",h)};function c(){l("transport closed")}function i(){l("socket closed")}function d(p){t&&p.name!==t.name&&r()}const u=()=>{t.removeListener("open",s),t.removeListener("error",l),t.removeListener("close",c),this.off("close",i),this.off("upgrading",d)};t.once("open",s),t.once("error",l),t.once("close",c),this.once("close",i),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let tp=class extends ep{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Xd[s]).filter(s=>!!s)),super(e,n)}};function op(o,e="",t){let n=o;t=t||typeof location<"u"&&location,o==null&&(o=t.protocol+"//"+t.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=t.protocol+o:o=t.host+o),/^(https?|wss?):\/\//.test(o)||(typeof t<"u"?o=t.protocol+"//"+o:o="https://"+o),n=Uo(o)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}const np=typeof ArrayBuffer=="function",sp=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,Ks=Object.prototype.toString,ap=typeof Blob=="function"||typeof Blob<"u"&&Ks.call(Blob)==="[object BlobConstructor]",rp=typeof File=="function"||typeof File<"u"&&Ks.call(File)==="[object FileConstructor]";function rn(o){return np&&(o instanceof ArrayBuffer||sp(o))||ap&&o instanceof Blob||rp&&o instanceof File}function Gt(o,e){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let t=0,n=o.length;t<n;t++)if(Gt(o[t]))return!0;return!1}if(rn(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return Gt(o.toJSON(),!0);for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)&&Gt(o[t]))return!0;return!1}function ip(o){const e=[],t=o.data,n=o;return n.data=jo(t,e),n.attachments=e.length,{packet:n,buffers:e}}function jo(o,e){if(!o)return o;if(rn(o)){const t={_placeholder:!0,num:e.length};return e.push(o),t}else if(Array.isArray(o)){const t=new Array(o.length);for(let n=0;n<o.length;n++)t[n]=jo(o[n],e);return t}else if(typeof o=="object"&&!(o instanceof Date)){const t={};for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=jo(o[n],e));return t}return o}function lp(o,e){return o.data=Vo(o.data,e),delete o.attachments,o}function Vo(o,e){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<e.length)return e[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let t=0;t<o.length;t++)o[t]=Vo(o[t],e);else if(typeof o=="object")for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(o[t]=Vo(o[t],e));return o}const up=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cp=5;var W;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(W||(W={}));class dp{constructor(e){this.replacer=e}encode(e){return(e.type===W.EVENT||e.type===W.ACK)&&Gt(e)?this.encodeAsBinary({type:e.type===W.EVENT?W.BINARY_EVENT:W.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===W.BINARY_EVENT||e.type===W.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ip(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}function Nn(o){return Object.prototype.toString.call(o)==="[object Object]"}class ln extends pe{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===W.BINARY_EVENT;n||t.type===W.BINARY_ACK?(t.type=n?W.EVENT:W.ACK,this.reconstructor=new pp(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(rn(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(W[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===W.BINARY_EVENT||n.type===W.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const l=e.substring(r,t);if(l!=Number(l)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(r,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const r=t+1;for(;++t;){const l=e.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(ln.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case W.CONNECT:return Nn(t);case W.DISCONNECT:return t===void 0;case W.CONNECT_ERROR:return typeof t=="string"||Nn(t);case W.EVENT:case W.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&up.indexOf(t[0])===-1);case W.ACK:case W.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pp{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=lp(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fp=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ln,Encoder:dp,get PacketType(){return W},protocol:cp},Symbol.toStringTag,{value:"Module"}));function Ne(o,e,t){return o.on(e,t),function(){o.off(e,t)}}const hp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Hs extends pe{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ne(e,"open",this.onopen.bind(this)),Ne(e,"packet",this.onpacket.bind(this)),Ne(e,"error",this.onerror.bind(this)),Ne(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,r;if(hp.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const l={type:W.EVENT,data:t};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,p=t.pop();this._registerAckCallback(u,p),l.id=u}const c=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,i=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!c||(i?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},s),l=(...c)=>{this.io.clearTimeoutFn(r),t.apply(this,c)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...t){return new Promise((n,s)=>{const r=(l,c)=>l?s(l):n(c);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:W.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case W.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case W.EVENT:case W.BINARY_EVENT:this.onevent(e);break;case W.ACK:case W.BINARY_ACK:this.onack(e);break;case W.DISCONNECT:this.ondisconnect();break;case W.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:W.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:W.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function yt(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}yt.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*o);o=(Math.floor(e*10)&1)==0?o-t:o+t}return Math.min(o,this.max)|0};yt.prototype.reset=function(){this.attempts=0};yt.prototype.setMin=function(o){this.ms=o};yt.prototype.setMax=function(o){this.max=o};yt.prototype.setJitter=function(o){this.jitter=o};class Ko extends pe{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,fo(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new yt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||fp;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new tp(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Ne(t,"open",function(){n.onopen(),e&&e()}),r=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},l=Ne(t,"error",r);if(this._timeout!==!1){const c=this._timeout,i=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),t.close()},c);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}return this.subs.push(s),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ne(e,"ping",this.onping.bind(this)),Ne(e,"data",this.ondata.bind(this)),Ne(e,"error",this.onerror.bind(this)),Ne(e,"close",this.onclose.bind(this)),Ne(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){po(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Hs(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Et={};function Xt(o,e){typeof o=="object"&&(e=o,o=void 0),e=e||{};const t=op(o,e.path||"/socket.io"),n=t.source,s=t.id,r=t.path,l=Et[s]&&r in Et[s].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let i;return c?i=new Ko(n,e):(Et[s]||(Et[s]=new Ko(n,e)),i=Et[s]),t.query&&!e.query&&(e.query=t.queryKey),i.socket(t.path,e)}Object.assign(Xt,{Manager:Ko,Socket:Hs,io:Xt,connect:Xt});const mp="http://localhost:3001",At=Xt(mp,{transports:["websocket","polling"],autoConnect:!0,reconnection:!0});At.on("connect",()=>{console.log("Socket connected:",At.id)});At.on("connect_error",o=>{console.warn("Socket connection error:",o.message)});const To=x(null),Mn=x(new Set),Oo=x([]);function gp(){const{speak:o}=on(),{addNotification:e,repeatCount:t}=uo(),n=async()=>{try{const c=(await Ee.get("/api/appointments")).data,i=new Date,d=new Date(i.getTime()-1440*60*1e3);Oo.value=c.filter(u=>new Date(u.start_time)>=d).sort((u,p)=>new Date(u.start_time).getTime()-new Date(p.start_time).getTime()),s()}catch(l){console.error("Error fetching appointments",l)}},s=()=>{const l=new Date;Oo.value.forEach(i=>{if(i.status!=="pending"||Mn.value.has(i.id))return;const d=new Date(i.start_time),u=i.reminder_minutes_before;if(u<=0)return;const p=new Date(d.getTime()-u*6e4),h=l.getTime()-p.getTime();h>=0&&h<5*6e4&&r(i)})},r=async l=>{Mn.value.add(l.id);const c=new Date(l.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),i=`Recordatorio: Tienes una cita "${l.title}" a las ${c}.`;e("Cita Prxima",i,"info"),setTimeout(async()=>{for(let d=0;d<t.value;d++)o(i),await new Promise(u=>setTimeout(u,4e3))},1e3),Notification.permission==="granted"&&new Notification("Recordatorio de Cita",{body:i,icon:"/favicon.ico"})};return At.hasListeners("appointments:updated")||At.on("appointments:updated",()=>{console.log(" New appointment data detected from socket"),n()}),ve(()=>{Notification.permission==="default"&&Notification.requestPermission(),n(),To.value=window.setInterval(s,6e4)}),Qe(()=>{To.value&&clearInterval(To.value)}),{checkReminders:n,upcomingAppointments:Oo,refreshAppointments:n}}const Ao=x(1),Do=x("Assistant");function Ws(){const o=[{id:1,name:"Purple Night"},{id:2,name:"Sunset"},{id:3,name:"Dark Purple"},{id:4,name:"Matrix"}],e=async()=>{try{const s=await fetch("/api/assistant/preference");if(s.ok){const r=await s.json();r.palette_id&&(Ao.value=r.palette_id),r.assistant_name&&(Do.value=r.assistant_name)}}catch{}},t=async s=>{Ao.value=s;try{await fetch("/api/assistant/preference",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({palette_id:s})})}catch{}},n=async s=>{Do.value=s;try{await fetch("/api/assistant/preference",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({assistant_name:s})})}catch{}};return ve(()=>{e()}),{currentPalette:Ao,assistantName:Do,palettes:o,switchPalette:t,updateAssistantName:n}}const Ro=x(null);function vp(){const o=n=>n===0?"clear":n>=1&&n<=3?"cloudy":n>=45&&n<=48?"fog":n>=51&&n<=67||n>=80&&n<=82?"rain":n>=71&&n<=77?"snow":n>=95&&n<=99?"storm":"clear",e=()=>new Promise((n,s)=>{if(!navigator.geolocation){s(new Error("Geolocalizacin no soportada"));return}navigator.geolocation.getCurrentPosition(r=>n({lat:r.coords.latitude,lon:r.coords.longitude}),r=>s(r))});return{weatherState:Ro,fetchWeather:async()=>{try{let n=19.4326,s=-99.1332;try{const u=await e();n=u.lat,s=u.lon}catch{console.warn("Ubicacin no disponible, usando defecto (CDMX).")}const r=`https://api.open-meteo.com/v1/forecast?latitude=${n}&longitude=${s}&current=temperature_2m,weather_code,is_day&daily=weather_code,precipitation_probability_max,temperature_2m_max,temperature_2m_min&timezone=auto`,c=await(await fetch(r)).json();if(!c.current)throw new Error("Error obteniendo clima");const i=c.current.weather_code,d=o(i);return Ro.value={condition:d,temp:c.current.temperature_2m,description:`Temp actual: ${c.current.temperature_2m}C. Condicin: ${d}. Mx hoy: ${c.daily.temperature_2m_max[0]}C. Probabilidad lluvia: ${c.daily.precipitation_probability_max[0]}%.`,location:"Tu ubicacin"},Ro.value}catch(n){return console.error(n),null}}}}function yp(){const o=nt(),e=B(()=>o.props.auth.user),{isSpeaking:t,speak:n,stopSpeaking:s,unlockAudio:r}=on(),{audioLevel:l,isRecording:c,startVisualization:i,stopVisualization:d}=gd(),{initGeminiChat:u,sendMessage:p,summarizeResults:h}=yd(),_=bd(n),b=wd(n),O=Ns(n,!1),{refreshAppointments:q}=gp(),{switchPalette:M,assistantName:C,updateAssistantName:A}=Ws(),{fetchWeather:I}=vp(),{updateAppearance:G}=Ca(),K=x(!1),z=x(""),ae=x(""),D=x(""),ee=x("idle"),Y=x(""),ce=x({type:"idle",message:""}),te=(f,Q)=>{ce.value={type:f,message:Q},U.value=Q,f!=="processing"&&setTimeout(()=>{ce.value={type:"idle",message:""}},3e3)};async function _e(f){if(K.value||!f||!f.trim())return;const Q=f.toLowerCase().trim(),w=C.value||"jarvis",S=w.toLowerCase();if(!Q.includes(S)){console.log(` Ignorando: No se detect '${S}' en '${f}'`);return}let N=f.replace(new RegExp(`^${w}\\s*`,"i"),"");if(N=N.replace(new RegExp(w,"i"),"").trim(),!N){console.log(" Comando vaco despus de quitar el nombre.");return}K.value=!0,U.value="Procesando...";try{await Zs(N)}finally{K.value=!1}}const{isListening:oe,statusMessage:j,hasError:Ze,startListening:Le,stopListening:Ce,partialTranscript:Pt}=_d(_e),U=B({get:()=>_.showNipModal.value?_.statusMessage.value:b.showUserModal.value?b.statusMessage.value:j.value,set:f=>{j.value=f}});ge(t,f=>{f||setTimeout(()=>{!t.value&&!oe.value&&(U.value="Presiona para hablar")},1e3)}),ge(oe,f=>{f||d()}),ge(t,f=>{f&&oe.value&&(console.log(" Asistente hablando: Pausando micrfono para evitar eco..."),Ce())});const{setVolume:un,volume:Gs,isPlaying:Xs}=Ss(),ho=x(50),$t=x(!1);let rt=null;const Js=async f=>{const Q=_t.value.data,w=_t.value.config.title||"Reporte";if(!Q||Q.length===0){te("error","No hay datos para exportar");return}n(`Exportando reporte a ${f.toUpperCase()}...`),U.value=`Exportando ${f}...`;try{if(f==="excel"||f==="csv"){const{utils:S,writeFile:N}=await xt(async()=>{const{utils:P,writeFile:V}=await import("./xlsx-Bn3faY59.js");return{utils:P,writeFile:V}},[]),L=S.json_to_sheet(Q),R=S.book_new();S.book_append_sheet(R,L,"Reporte"),N(R,`${w.replace(/\s+/g,"_")}.xlsx`)}else if(f==="pdf"){const{jsPDF:S}=await xt(async()=>{const{jsPDF:P}=await import("./jspdf.es.min-DSNAiotO.js").then(V=>V.j);return{jsPDF:P}},__vite__mapDeps([0,1,2])),N=new S,L=20;let R=30;if(N.setFont("helvetica","bold"),N.setFontSize(18),N.text(w,L,R),R+=15,N.setFont("courier","normal"),N.setFontSize(10),Q.length>0){const P=Object.keys(Q[0]).join(" | ");N.text(P,L,R),R+=5,N.line(L,R,190,R),R+=10}Q.forEach(P=>{const V=Object.values(P).map(Z=>String(Z)).join(" | ");R>270&&(N.addPage(),R=20),N.text(V,L,R),R+=7}),N.save(`${w.replace(/\s+/g,"_")}.pdf`)}else if(f==="word"){let S=`<html><head><meta charset="utf-8"><title>${w}</title><style>body{font-family:sans-serif}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ccc;padding:8px}th{background:#f2f2f2}</style></head><body><h1>${w}</h1><table><thead><tr>`;Q.length>0&&Object.keys(Q[0]).forEach(P=>S+=`<th>${P}</th>`),S+="</tr></thead><tbody>",Q.forEach(P=>{S+="<tr>",Object.values(P).forEach(V=>S+=`<td>${V}</td>`),S+="</tr>"}),S+="</tbody></table></body></html>";const N=new Blob([S],{type:"application/msword"}),L=URL.createObjectURL(N),R=document.createElement("a");R.href=L,R.download=`${w.replace(/\s+/g,"_")}.doc`,document.body.appendChild(R),R.click(),document.body.removeChild(R)}te("success",`${f.toUpperCase()} Descargado`),U.value="Descarga completa"}catch(S){console.error(S),n("Error al exportar."),te("error","Error exportando")}};ge([oe,t],()=>{if(oe.value||t.value){if(rt&&(clearTimeout(rt),rt=null),Xs.value&&!$t.value){console.log(" Bajando volumen de Spotify (Ducking)..."),ho.value=Gs.value;const Q=Math.floor(ho.value*.2);un(Math.max(5,Q)),$t.value=!0}}else $t.value&&!rt&&(rt=setTimeout(()=>{console.log(" Restaurando volumen de Spotify..."),un(ho.value),$t.value=!1,rt=null},2e3))});const It=x(""),be=async(f,Q=null)=>{try{if(f.intent==="insert"&&f.sql&&f.sql.toLowerCase().includes("insert into users")){const N=f.sql.match(/VALUES\s*\(([\s\S]+)\);?/i);if(N){const L=N[1].split(",").map(R=>R.trim().replace(/^['"]|['"]$/g,""));if(L.length>=3){if(Q){U.value="Verificando NIP...";const P=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"validate_nip",sql:"SELECT 1",nip:Q})})).json();if(!P.success)throw new Error(P.error||"NIP Incorrecto")}return b.openUserModal(L[0],L[1],L[2],f.sql,Q),!0}}}U.value="Ejecutando...";const S=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({...f,nip:Q})})).json();if(!S.success){if(S.error&&S.error.includes("NIP"))throw new Error(S.error);return n(`Hubo un problema: ${S.error||"No se pudo ejecutar."}`),te("error","Error en la operacin"),!1}if(f.intent==="select"||f.intent==="complex"||f.intent==="count"){const N=await h(It.value,S.data);N&&(n(N),U.value=`xito: ${S.message}`)}else f.speech?(n(f.speech),te("success",S.message||"Hecho")):(n("Operacin completada."),te("success","Completado"));return f.sql&&f.sql.toLowerCase().includes("biometric_credentials")&&window.dispatchEvent(new Event("biometrics-updated")),f.sql&&(f.sql.toLowerCase().includes("insert into appointments")||f.sql.toLowerCase().includes("update appointments"))&&setTimeout(()=>{q(),console.log(" Refrescando lista de citas...")},1e3),!1}catch(w){if(console.error("Error en executeQuery:",w),Q)throw w;return n("Lo siento, ocurri un error tcnico."),te("error","Error tcnico"),!1}},Ys=async f=>{const Q=["insert","update","delete","drop","alter","create"];let w=!1;if(f.intent!=="none"&&f.sql&&f.sql.trim()!==""){const S=f.sql.trim().toUpperCase();w=Q.includes(f.intent)||!S.startsWith("SELECT")&&!S.startsWith("SHOW")}if(w&&f.sql){const S=f.sql.toLowerCase(),N=["notes","assistant_preferences","contacts","biometric_credentials","appointments"],L=["users","migrations","password_reset_tokens"],R=N.some(V=>!(!S.includes(V)||V==="contacts"&&!S.includes("user_id"))),P=L.some(V=>S.includes(V));R&&!P&&(w=!1)}if(w){if(!_.checkAdmin()){n("Lo siento, esta operacin requiere privilegios de administrador."),_.showAccessDeniedModal.value=!0;return}_.requireNip(f,f.speech);return}f.intent!=="select"&&f.intent!=="complex"&&f.intent!=="count"&&n(`Entendido. ${f.speech}.`),await be(f)},_t=x({isOpen:!1,data:[],config:{title:"",type:"bar",x_axis:"",y_axis:"",insight:""}}),Qs=()=>{_t.value.isOpen=!1},mo=async(f,Q=0)=>{if(it.value=!0,f.intent==="silence"){it.value=!1,console.log(" Silencio solicitado"),n(f.speech||"Entendido, guardar silencio."),U.value="Modo silencio";return}if(f.intent==="google_search"){console.log(" Bsqueda Web:",f.query),it.value=!1,n(f.speech||`Buscando ${f.query} en Google.`),U.value="Buscando...";const S=/imagen|foto/i.test(f.query)?"https://www.google.com/search?tbm=isch&q=":"https://www.google.com/search?q=";setTimeout(()=>{const N=`${S}${encodeURIComponent(f.query)}`;window.open(N,"_blank")||(console.warn(" Popup bloqueado. Redirigiendo pestaa actual."),U.value="Redirigiendo...",window.location.href=N)},500);return}if(f.intent==="navigate"&&f.url){console.log(" Navegacin detectada:",f.url),U.value="Navegando...",f.url.includes("logout")||f.url.includes("cerrar-sesion")?Ge.post("/logout"):Ge.visit(f.url),Ce();return}if(f.intent==="timer"||f.intent==="reminder"){console.log(" Timer/Reminder detectado:",f);const w=f.duration_seconds||60,S=f.reminder_text||f.speech||"Recordatorio";Q===0&&n(f.speech||`Entendido, te recordar "${S}" en ${w} segundos.`),U.value=`Recordatorio: ${S}`,te("success","Recordatorio guardado"),O.addReminder(S,w);return}if(f.intent==="change_theme"){console.log(" Cambio de tema detectado:",f);const w=f.mode||f.theme;if(w==="dark"||w==="light"){const S=w==="dark";G(w),n(f.speech||`Modo ${S?"oscuro":"claro"} activado.`),U.value=`Modo ${S?"oscuro":"claro"}`}else f.theme_id?(M(Number(f.theme_id)),n(f.speech||"Tema cambiado."),U.value="Paleta actualizada"):n("No entend a qu tema cambiar. Oscuro o claro?");return}if(f.intent==="biometrics_config"){console.log(" Configuracin de biometra detectada"),n(f.speech||"Te llevo a la configuracin de huella digital."),U.value="Abriendo ajustes...",Ge.visit("/settings/biometrics"),Ce();return}if(f.intent==="report"){console.log(" Reporte detectado"),U.value="Analizando datos...";try{const S=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({...f,nip:null})})).json();if(S.success){if(f.report_type==="excel"||f.report_type==="csv"){n("Generando archivo Excel...");try{const{utils:N,writeFile:L}=await xt(async()=>{const{utils:Z,writeFile:ie}=await import("./xlsx-Bn3faY59.js");return{utils:Z,writeFile:ie}},[]),R=N.json_to_sheet(S.data),P=N.book_new();N.book_append_sheet(P,R,"Reporte");const V=`${(f.title||"reporte").replace(/\s+/g,"_")}.xlsx`;L(P,V),n("Archivo Excel descargado."),U.value="Excel listo",te("success","Excel Descargado")}catch(N){console.error(N),n("Error al generar Excel.")}return}if(f.report_type==="pdf"){n("Generando reporte PDF...");try{const{jsPDF:N}=await xt(async()=>{const{jsPDF:V}=await import("./jspdf.es.min-DSNAiotO.js").then(Z=>Z.j);return{jsPDF:V}},__vite__mapDeps([0,1,2])),L=new N,R=20;let P=30;if(L.setFont("helvetica","bold"),L.setFontSize(18),L.text(f.title||"Reporte",R,P),P+=15,L.setFont("courier","normal"),L.setFontSize(10),S.data.length>0){const V=Object.keys(S.data[0]).join(" | ");L.text(V,R,P),P+=5,L.line(R,P,190,P),P+=10}S.data.forEach(V=>{const Z=Object.values(V).map(ie=>String(ie)).join(" | ");P>270&&(L.addPage(),P=20),L.text(Z,R,P),P+=7}),L.save(`${(f.title||"reporte").replace(/\s+/g,"_")}.pdf`),n("Reporte PDF descargado."),U.value="PDF Listo"}catch(N){console.error(N),n("Error generando PDF.")}return}if(f.report_type==="word"){n("Generando documento Word...");try{let N=`
                                <html>
                                <head>
                                    <meta charset="utf-8">
                                    <title>${f.title||"Reporte"}</title>
                                    <style>
                                        body { font-family: sans-serif; }
                                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                                        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
                                        th { background-color: #f2f2f2; }
                                    </style>
                                </head>
                                <body>
                                    <h1>${f.title||"Reporte"}</h1>
                                    <table>
                                        <thead>
                                            <tr>
                            `;S.data.length>0&&Object.keys(S.data[0]).forEach(V=>{N+=`<th>${V}</th>`}),N+=`
                                            </tr>
                                        </thead>
                                        <tbody>
                            `,S.data.forEach(V=>{N+="<tr>",Object.values(V).forEach(Z=>{N+=`<td>${Z}</td>`}),N+="</tr>"}),N+=`
                                        </tbody>
                                    </table>
                                </body>
                                </html>
                            `;const L=new Blob([N],{type:"application/msword"}),R=URL.createObjectURL(L),P=document.createElement("a");P.href=R,P.download=`${(f.title||"reporte").replace(/\s+/g,"_")}.doc`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(R),n("Documento Word descargado."),U.value="Word Listo"}catch(N){console.error(N),n("Error generando documento Word.")}return}_t.value={isOpen:!0,data:S.data,config:{title:f.title||"Reporte de Anlisis",type:f.report_type||"bar",x_axis:f.x_axis||(S.data[0]?Object.keys(S.data[0])[0]:"label"),y_axis:f.y_axis||(S.data[0]?Object.keys(S.data[0])[1]:"value"),insight:f.insight||"Aqu tienes la visualizacin de los datos solicitados."}},n(f.speech||"He generado el reporte con los datos solicitados."),U.value="Reporte listo"}else n("No pude generar el reporte debido a un problema con los datos."),U.value="No se pudo generar"}catch(w){console.error(w),n("Hubo un error tcnico al procesar el reporte."),U.value="Error de anlisis"}return}if(f.intent==="contact_list"||f.intent==="contact_search"){console.log(" Consultando contactos..."),U.value="Consultando contactos...";try{const w=f.query||"",N={intent:"select",sql:w?`SELECT name, phone, company, email, notes FROM contacts WHERE user_id = :user_id AND (name LIKE '%${w}%' OR company LIKE '%${w}%')`:"SELECT name, phone, company, email, notes FROM contacts WHERE user_id = :user_id LIMIT 10",speech:f.speech},R=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({...N,nip:null})})).json();if(R.success){if(window.location.pathname.includes("/contacts")||Ge.visit("/contacts"),R.data&&R.data.length>0){const P=await h(f.speech||`Busca contactos: ${w}`,R.data);n(P||`Encontr ${R.data.length} contactos. Quieres verlos?`)}else n("No encontr contactos con esa informacin.");U.value="Contactos encontrados"}else n("Hubo un problema al consultar los contactos.")}catch(w){console.error(w),n("Error tcnico consultando contactos.")}return}if(f.intent==="contact_message"){console.log(" Enviando mensaje..."),U.value="Abriendo WhatsApp...";try{const w=f.contact_name||"";if(!w){n("A quin quieres enviar el mensaje?");return}const S=`SELECT name, phone FROM contacts WHERE user_id = :user_id AND name LIKE '%${w}%' LIMIT 1`,L=await(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"select",sql:S,speech:`Buscando telfono de ${w}`})})).json();if(L.success&&L.data&&L.data.length>0){const R=L.data[0],P=R.phone.replace(/[^\d]/g,"");if(P){n(`Abriendo chat con ${R.name}.`);const V=f.message_content?`?text=${encodeURIComponent(f.message_content)}`:"";window.open(`https://wa.me/${P}${V}`,"_blank")}else n(`Encontr a ${R.name}, pero no tiene un nmero vlido.`)}else n(`No encontr ningn contacto llamado ${w}.`)}catch(w){console.error(w),n("No pude abrir el chat.")}return}if(f.intent==="spotify"){console.log(" Spotify Intent:",f),n(f.speech||"Entendido."),te("spotify","Controlando Spotify...");try{let w="/api/spotify/play",S={};if(f.action==="next")w="/api/spotify/next";else if(f.action==="previous")w="/api/spotify/previous";else if(f.action==="pause")w="/api/spotify/pause";else if(f.action==="volume_up"||f.action==="volume_down"||f.action==="volume_set"){w="/api/spotify/volume";let P=50;const V=window.spotifyVolume||50;f.action==="volume_up"?P=Math.min(100,V+10):f.action==="volume_down"?P=Math.max(0,V-10):f.action==="volume_set"&&(P=f.value),window.spotifyVolume=P,window.dispatchEvent(new CustomEvent("spotify-volume-change",{detail:P})),S={volume_percent:P}}else f.action==="play"&&(w="/api/spotify/play",S={query:f.query,type:f.type});const N=window.spotifyDeviceId;N&&(S.device_id=N);const L=f.action==="volume_up"||f.action==="volume_down"||f.action==="volume_set"?"PUT":"POST",R=await fetch(w,{method:L,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(S)});if(R.ok)f.action;else{const P=await R.json();R.status===404&&P.error&&P.error.includes("device")?n("No encontr ningn dispositivo activo. Abre Spotify en tu dispositivo primero."):n("Hubo un error con Spotify.")}}catch(w){console.error("Spotify Error:",w),n("Hubo un problema al comunicar con Spotify.")}return}if(f.intent==="contact_add"){console.log(" Agregar Contacto:",f);const w=f.contact_name,S=f.phone_number;if(!w||!S){n("Necesito el nombre y el nmero de telfono para agregar el contacto.");return}U.value="Guardando contacto...";try{(await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({name:w,phone:S})})).ok?(n(`Contacto ${w} agregado correctamente.`),U.value="Contacto guardado"):n("No pude guardar el contacto.")}catch(N){console.error(N),n("Error al guardar el contacto.")}return}if(f.intent==="note_create"){console.log(" Crear Nota:",f);const w=f.title||"Nota sin ttulo",S=f.content||"";if(!S){n("Qu quieres que diga la nota?");return}U.value="Guardando nota...";try{const N=`INSERT INTO notes (user_id, title, content, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], '${w}', '${S}', NOW(), NOW())`;await be({intent:"insert",sql:N,speech:f.speech||`Nota "${w}" creada.`})}catch(N){console.error(N),n("Error al guardar la nota.")}return}if(f.intent==="note_delete_all"){console.log(" Eliminar TODAS las Notas"),U.value="Eliminando notas...",await be({intent:"delete",sql:"DELETE FROM notes WHERE user_id = [ID_USUARIO_ACTUAL]",speech:f.speech||"He eliminado todas tus notas, tal como pediste."}),te("success","Notas Eliminadas");return}if(f.intent==="weather_check"){n("Revisando el clima..."),U.value="Consultando satlite...";const w=await I();if(w){const S=await h(It.value,w);n(S||`Actualmente estamos a ${w.temp} grados con condicin de ${w.condition}.`),U.value=`${w.temp}C ${w.condition}`}else n("No pude obtener el clima en este momento.");return}if(f.intent==="expense_create"){const w=f.amount,S=f.description||"Gasto vario",N=f.category||"General";if(!w){n("No entend la cantidad del gasto.");return}const L=`INSERT INTO expenses (user_id, amount, description, category, date, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], ${w}, '${S}', '${N}', NOW(), NOW(), NOW())`;await be({intent:"insert",sql:L,speech:f.speech||`Gasto de ${w} registrado en ${S}.`});return}if(f.intent==="expense_list"){await be({intent:"select",sql:"SELECT date, description, amount, category FROM expenses WHERE user_id = [ID_USUARIO_ACTUAL] ORDER BY date DESC LIMIT 5",speech:null});return}if(f.intent==="memory_save"){const w=f.key?`'${f.key}'`:"NULL",S=f.value;if(!S){n("Qu quieres que recuerde?");return}const N=`INSERT INTO memories (user_id, \`key\`, value, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], ${w}, '${S}', NOW(), NOW())`;await be({intent:"insert",sql:N,speech:f.speech||"Dato guardado en mi memoria."});return}if(f.intent==="knowledge_search"||f.intent==="memory_read"){const w=f.query||"";console.log(" Knowledge Search:",w),U.value="Buscando en mi memoria...",w.split(" ").filter(R=>R.length>3);const S=`SELECT 'memory' as source, value as content, created_at FROM memories WHERE user_id = [ID_USUARIO_ACTUAL] AND (value LIKE '%${w}%' OR \`key\` LIKE '%${w}%') ORDER BY created_at DESC LIMIT 5`,N=`SELECT 'note' as source, CONCAT(title, ': ', content) as content, created_at FROM notes WHERE user_id = [ID_USUARIO_ACTUAL] AND (content LIKE '%${w}%' OR title LIKE '%${w}%') ORDER BY created_at DESC LIMIT 3`,L=`SELECT 'appointment' as source, CONCAT(title, ' el ', start_time) as content, created_at FROM appointments WHERE user_id = [ID_USUARIO_ACTUAL] AND title LIKE '%${w}%' ORDER BY start_time DESC LIMIT 3`;try{const[R,P,V]=await Promise.all([be({intent:"select",sql:S,speech:null}),fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"select",sql:N})}).then(ke=>ke.json()),fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"select",sql:L})}).then(ke=>ke.json())]),ie=[...(await fetch("/api/execute-ai-query",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({intent:"select",sql:S})}).then(ke=>ke.json())).data||[],...P.data||[],...V.data||[]];if(ie.length===0){n("No encontr nada relacionado en tus notas, memoria o calendario.");return}console.log(" Contexto encontrado:",ie);const he=await h(w,ie);n(he||"Encontr informacin relevante en tus notas y memoria.")}catch(R){console.error("Error en Knowledge Search",R),n("Tuve un problema buscando en mi memoria.")}return}if(f.intent==="meeting_notes"){console.log(" Meeting Assistant:",f);const w=f.content||f.summary||f.speech||"",S=f.action_items||[];if(!w)return;let N=`Resumen: ${f.summary||"Sin resumen"}

Transcripcin: ${w}`;S.length>0&&(N+=`

Acciones:
- ${S.join(`
- `)}`);const R=`INSERT INTO notes (user_id, title, content, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], '${`Reunin: ${new Date().toLocaleDateString("es-MX",{weekday:"long",hour:"2-digit",minute:"2-digit"})}`}', '${N}', NOW(), NOW())`;await be({intent:"insert",sql:R,speech:f.speech||`He guardado las notas de la reunin y detectado ${S.length} tareas.`});return}if(f.intent==="document_generate"){console.log(" Generando documento:",f),U.value="Diseando documento...",n(`Generando tu ${(f.format||"documento").toUpperCase()}...`);try{const w=f.title||"Documento",S=f.content||"",N=(f.format||"pdf").toLowerCase();if(N==="word"||N==="doc"){const de=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                     <head><meta charset='utf-8'><title>${w}</title>
                     <style>
                        body { font-family: 'Calibri', 'Arial', sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; }
                        h1 { color: #111; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
                        p { margin-bottom: 15px; text-align: justify; }
                        .footer { margin-top: 50px; font-size: 0.8em; color: #888; text-align: center; border-top: 1px solid #eee; padding-top: 20px; }
                     </style>
                     </head><body>`,bt=`<div class="footer"><p>Documento generado por <strong>MoodOrbs AI</strong> &bull; ${new Date().getFullYear()}</p></div></body></html>`,na=`${de}<h1>${w}</h1>${S.replace(/\n/g,"<br/>")}${bt}`,sa=new Blob(["\uFEFF",na],{type:"application/msword"}),aa=URL.createObjectURL(sa),wt=document.createElement("a");wt.href=aa,wt.download=`${w.replace(/\s+/g,"_")}.doc`,document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),n("Documento Word descargado."),U.value="Word Listo",te("success","Word Descargado");return}const{jsPDF:L}=await xt(async()=>{const{jsPDF:de}=await import("./jspdf.es.min-DSNAiotO.js").then(bt=>bt.j);return{jsPDF:de}},__vite__mapDeps([0,1,2])),R=new L,P=R.internal.pageSize.getWidth(),V=R.internal.pageSize.getHeight(),Z=25,ie=P-Z*2;let he=40;R.setFont("helvetica","bold"),R.setFontSize(24),R.setTextColor(30,30,30),R.text(w,Z,he),he+=10,R.setFont("helvetica","normal"),R.setFontSize(10),R.setTextColor(100,100,100),R.text(`Fecha: ${new Date().toLocaleDateString("es-MX",{dateStyle:"long"})}`,Z,he),he+=5,R.setDrawColor(200,200,200),R.setLineWidth(.5),R.line(Z,he,P-Z,he),he+=15,R.setFont("times","normal"),R.setFontSize(12),R.setTextColor(50,50,50);const ke=R.splitTextToSize(S,ie);he+ke.length*7>V-Z?ke.forEach(bt=>{he>V-30&&(R.addPage(),he=30),R.text(bt,Z,he),he+=7}):R.text(ke,Z,he);const et=R.getNumberOfPages();for(let de=1;de<=et;de++)R.setPage(de),R.setFont("helvetica","italic"),R.setFontSize(9),R.setTextColor(150,150,150),R.text(`MoodOrbs AI Enterprise Solutions - ${new Date().getFullYear()}`,P/2,V-15,{align:"center"}),R.text(`Pgina ${de} de ${et}`,P-Z,V-15,{align:"right"});R.save(`${w.replace(/\s+/g,"_")}.pdf`),n("Documento PDF premium generado."),U.value="PDF Listo",te("success","PDF Descargado")}catch(w){console.error("Error generando documento:",w),n("Tuve un problema creando el archivo.")}return}if(f.intent==="deep_research"){U.value="Investigando a fondo...",n(`Iniciando investigacin profunda sobre ${f.topic}. Esto puede tomar unos segundos.`);const w=`
                ACTA COMO UN AGENTE DE INVESTIGACIN DE LITE.
                OBJETIVO: Realizar una investigacin exhaustiva sobre: "${f.topic}".
                FORMATO: Devuelve un resumen estructurado, profesional y detallado.
                Si es comparativa, usa puntos clave.
                
                IMPORTANTE: Responde en formato JSON: { "speech": "Resumen verbal corto", "markdown_report": "Reporte completo en Markdown" }
             `;try{const S=await p(w);let N=S,L="Aqu tienes lo que encontr.";try{const Z=S.match(/\{[\s\S]*\}/);if(Z){const ie=JSON.parse(Z[0]);ie.markdown_report&&(N=ie.markdown_report),ie.speech&&(L=ie.speech)}}catch{}n(L);const R=`Investigacin: ${f.topic}`,P=N.replace(/'/g,"''"),V=`INSERT INTO notes (user_id, title, content, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], '${R}', '${P}', NOW(), NOW())`;await be({intent:"insert",sql:V,speech:null}),te("success","Investigacin guardada en Notas")}catch(S){console.error(S),n("Hubo un error en la investigacin.")}return}if(f.intent==="macro_goodmorning"){n(`Buenos das ${e.value?.name}! Empezando tu rutina.`),te("spotify","Iniciando msica relajante...");try{await fetch("/api/spotify/play",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({query:"Morning Coffee Jazz",type:"playlist"})})}catch(N){console.error("Spotify error",N)}const S=`SELECT start_time, title FROM appointments WHERE user_id = [ID_USUARIO_ACTUAL] AND DATE(start_time) = '${new Date().toISOString().split("T")[0]}' ORDER BY start_time ASC`;await be({intent:"select",sql:S,speech:null});return}if(f.intent==="macro_focus"){n("Activando Modo Enfoque. Silenciando notificaciones y poniendo Lo-Fi."),U.value="Modo Enfoque Activo",document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),M(4),te("spotify","Reproduciendo Lofi Girl...");try{await fetch("/api/spotify/play",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify({query:"lofi girl",type:"playlist"})})}catch(w){console.error("Spotify error",w)}return}if(f.intent==="calendar_view"||f.intent==="calendar_schedule"||f.intent==="calendar_search"||f.intent==="calendar_next"){if(console.log(" Calendario:",f),f.intent==="calendar_next"){U.value="Consultando agenda...",await be({intent:"select",sql:"SELECT title, start_time, description FROM appointments WHERE user_id = [ID_USUARIO_ACTUAL] AND start_time > NOW() ORDER BY start_time ASC LIMIT 3",speech:null});return}if(f.intent==="calendar_search"){U.value="Buscando en calendario...";const w=f.query||"",S=`SELECT title, start_time, description FROM appointments WHERE user_id = [ID_USUARIO_ACTUAL] AND (title LIKE '%${w}%' OR description LIKE '%${w}%') ORDER BY start_time DESC LIMIT 5`;await be({intent:"select",sql:S,speech:null});return}if(n(f.speech||"Abriendo el calendario."),U.value="Calendario...",o.url!=="/calendar"&&Ge.visit("/calendar"),f.intent==="calendar_schedule")if(f.date&&f.time&&f.title){const w=`${f.date} ${f.time}:00`,S=f.title,N=f.reminder_minutes_before||30,L=`INSERT INTO appointments (user_id, title, start_time, end_time, reminder_minutes_before, status, created_at, updated_at) VALUES ([ID_USUARIO_ACTUAL], '${S}', '${w}', DATE_ADD('${w}', INTERVAL 1 HOUR), ${N}, 'scheduled', NOW(), NOW())`;await be({intent:"insert",sql:L,speech:f.speech||`Agendada reunin "${S}" para el ${f.date} a las ${f.time}.`}),setTimeout(()=>window.dispatchEvent(new Event("refresh-appointments")),1e3)}else setTimeout(()=>{const w=new CustomEvent("open-appointment-modal",{detail:{date:f.date,time:f.time,title:f.title}});window.dispatchEvent(w)},1e3);return}if(f.intent==="delete_all_appointments"||f.intent==="calendar_delete_all"){console.log(" Eliminar TODAS las Citas"),U.value="Limpiando calendario...",await be({intent:"delete",sql:"DELETE FROM appointments WHERE user_id = [ID_USUARIO_ACTUAL]",speech:f.speech||"He eliminado todas tus citas y eventos del calendario."}),te("success","Calendario Limpio"),setTimeout(()=>window.dispatchEvent(new Event("refresh-appointments")),1e3);return}if((f.intent==="update_name"||f.intent==="conversational"&&/llames|nombre/i.test(f.speech))&&f.new_name){const w=f.new_name;console.log(` Cambio de nombre a: ${w}`),A(w),n(f.speech||`Entendido. A partir de ahora puedes llamarme ${w}.`),U.value=`Nombre cambiado a ${w}`;return}if(!f.sql||f.sql==="null"||f.intent==="conversational"){console.log(" Conversacin detectada.");const w=f.speech||f.response||"No tengo respuesta para eso.";n(w),U.value="Respondiendo...",setTimeout(()=>{t.value||(U.value="Presiona para hablar")},4e3);return}await Ys(f)},Zs=async f=>{It.value=f;try{const Q=o.url,w=e.value?.name||"Invitado",S=e.value?.id||"NULL",L=`${`[CONTEXTO VISUAL: URL actual="${Q}". Usuario logueado="${w}" (ID=${S}). Si la URL es '/dashboard' ests viendo el Panel Principal con grficos. Si es '/users' ves la lista de usuarios. Si es '/settings' ves la configuracin.]`} Usuario dice: "${f}"`,R=await p(L,Y.value);console.log(" INTENCIN DETECTADA (JSON para Backend):");let P;const V=Z=>{try{return JSON.parse(Z)}catch{}let ie=Z.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{return JSON.parse(ie)}catch{}const he=ie.match(/[\[{][\s\S]*[\]}]/);if(he)try{return JSON.parse(he[0])}catch{}let ke=0,et=-1;for(let de=0;de<ie.length;de++)if(ie[de]==="{")et===-1&&(et=de),ke++;else if(ie[de]==="}"&&(ke--,ke===0&&et!==-1))try{return JSON.parse(ie.substring(et,de+1))}catch{}try{let de=ie.replace(/'/g,'"');return de=de.replace(/,(\s*[}\]])/g,"$1"),JSON.parse(de)}catch{}return null};try{if(P=V(R),!P)throw new Error("No JSON found after all strategies")}catch(Z){console.error("Error parsing Gemini response:",Z),P={intent:"conversational",speech:R}}if(Array.isArray(P))for(const Z of P)await mo(Z);else await mo(P)}catch(Q){console.error("Orchestrator Error:",Q),U.value="Error de conexin",n("Lo siento, tuve un problema procesando eso.")}finally{K.value=!1}},it=x(!0),Bt=x(!1),cn=x(0),ea=1e3,dn=x(0),ta=()=>{const f=Date.now();if(K.value){console.log(" Ignorando activacin mientras se procesa...");return}if(!oe.value&&f-cn.value<ea){console.log(" Ignorando activacin rpida (Cooldown)");return}if(cn.value=f,!Bt.value){if(t.value){console.log(" Usuario detuvo al asistente manualmente."),s(),it.value=!1,Ce(),d();return}oe.value?(f-dn.value<1500&&console.log(" Audio muy corto, cancelando procesamiento."),Ce()):(r(),Le(),dn.value=Date.now())}},oa=()=>{_.verifyNip(be)};return ve(()=>{u(e.value),window.addEventListener("assistant-pause",()=>{Bt.value=!0,oe.value&&(Ce(),d()),t.value&&s()}),window.addEventListener("assistant-resume",()=>{Bt.value=!1}),window.addEventListener("trigger-ai-report",()=>{mo({intent:"report",sql:"SELECT DATE(created_at) as fecha, COUNT(*) as total FROM users WHERE created_at >= DATE_SUB(NOW(), INTERVAL 2 WEEK) GROUP BY fecha",speech:"Generando reporte de actividad reciente...",report_type:"bar",title:"Actividad Reciente",x_axis:"fecha",y_axis:"total",insight:"Anlisis rpido solicitado desde el Dashboard."})}),window.addEventListener("assistant-speech-ended",()=>{setTimeout(()=>{!Bt.value&&!oe.value&&it.value?(console.log(" Auto-activando micrfono para respuesta..."),i(),Le()):it.value||console.log(" Auto-mic desactivado por solicitud de usuario.")},500)})}),{isListening:oe,isSpeaking:t,isProcessing:K,transcript:z,serverResponse:ae,currentIntent:D,visualState:ee,reportState:_t,startMicrophone:async()=>{t.value&&(console.log(" Interrumpiendo asistente para escuchar usuario..."),Ce()),await Le()},stopMicrophone:()=>{Ce()},stopSpeaking:Ce,processTextQuery:async f=>{z.value=f,await _e(f)},exportCurrentReport:Js,setDocumentContext:f=>{Y.value=f,te("success","Documento analizado"),n("Ya le el documento. Qu quieres saber?")},audioLevel:l,statusMessage:U,toggleMicrophone:ta,handleVerifyNip:oa,security:_,userOps:b,closeReport:Qs,lastUserQuery:It,feedbackState:ce,speak:n,partialTranscript:Pt,isRecording:c,hasError:Ze}}const _p=16,bp=k({__name:"MoodVisualizer",props:{audioLevel:{default:0},isListening:{type:Boolean,default:!1},isSpeaking:{type:Boolean,default:!1},paletteId:{default:1}},setup(o){const e=o,t=x(null);let n,s=0;const r={baseRadius:60,speed:.02,particleCount:2},l={currentLevel:0,targetLevel:0,colors:["#00d2ff","#3a7bd5","#ff00cc","#00f260"]};let c=[];const i={x:0,y:0,targetX:0,targetY:0};let d=0;const u=C=>{const A=performance.now();if(A-d<_p)return;d=A;const I=C.target;if(!I)return;const{clientWidth:G,clientHeight:K}=I;i.targetX=C.offsetX/G*2-1,i.targetY=C.offsetY/K*2-1};let p=[];const h=(C,A)=>{p=[];for(let I=0;I<r.particleCount;I++)_({},C,A)},_=(C,A,I)=>{C.x=A/2,C.y=I/2;const G=Math.random()*Math.PI*2,K=.5+Math.random()*1.5;C.vx=Math.cos(G)*K,C.vy=Math.sin(G)*K,C.size=1+Math.random()*2,C.life=0,C.maxLife=50+Math.random()*100,C.color=l.colors[Math.floor(Math.random()*l.colors.length)],p.includes(C)||p.push(C)},b=()=>{if(!t.value)return;const C=getComputedStyle(t.value),A=C.getPropertyValue("--orb-1").trim()||"#00d2ff",I=C.getPropertyValue("--orb-2").trim()||"#3a7bd5",G=C.getPropertyValue("--orb-3").trim()||"#ff00cc",K=C.getPropertyValue("--orb-4").trim()||"#00f260";l.colors=[A,I,G,K]},O=(C,A,I,G,K,z,ae,D)=>{const ee=(Y,ce,te)=>{C.beginPath();const _e=12;for(let oe=0;oe<=_e;oe++){const j=oe/_e*Math.PI*2,Ze=Math.sin(j*3+s*2+z)*(10*D),Le=ae*(30*D)*Math.sin(j*10+s*10),Ce=G+Ze+Le,Pt=A+Y+Math.cos(j)*Ce,U=I+ce+Math.sin(j)*Ce;oe===0?C.moveTo(Pt,U):C.lineTo(Pt,U)}if(C.closePath(),te)C.strokeStyle=te,C.lineWidth=2*D,C.stroke();else{const oe=C.createRadialGradient(A,I,G*.2,A,I,G*1.5);oe.addColorStop(0,K),oe.addColorStop(1,"transparent"),C.fillStyle=oe,C.fill(),C.strokeStyle=K,C.lineWidth=1*D,C.globalAlpha=.3,C.stroke(),C.globalAlpha=1}};if(C.globalCompositeOperation="screen",ee(0,0),ae>.3){const Y=ae*5*D;C.globalAlpha=.4*ae,ee(-Y,0,"#00ffff"),ee(Y,0,"#ff0000"),C.globalAlpha=1}};let q=null;const M=()=>{const C=t.value;if(!C)return;const A=C.getContext("2d",{alpha:!1});if(!A)return;const I=C.width,G=C.height;i.x+=(i.targetX-i.x)*.1,i.y+=(i.targetY-i.y)*.1;const K=I/2+i.x*20,z=G/2+i.y*20,D=Math.min(I,G)/300;l.targetLevel=e.audioLevel,l.currentLevel+=(l.targetLevel-l.currentLevel)*.1,A.clearRect(0,0,I,G);const ee=e.isSpeaking?2.5:e.isListening?.5:1;s+=r.speed*ee,Math.floor(s*100)%100===0&&b(),l.currentLevel>.6&&Math.random()>.9&&c.push({x:K,y:z,radius:50*D,maxRadius:200*D,opacity:1,color:l.colors[Math.floor(Math.random()*l.colors.length)],width:2*D}),c=c.filter(j=>(j.radius+=2*D,j.opacity-=.02,j.width*=.95,j.opacity<=0?!1:(A.beginPath(),A.arc(j.x,j.y,j.radius,0,Math.PI*2),A.strokeStyle=j.color,A.lineWidth=j.width,A.globalAlpha=j.opacity,A.stroke(),A.globalAlpha=1,!0))),(e.isSpeaking||e.isListening)&&p.forEach(j=>{j.life++,j.x+=j.vx*D,j.y+=j.vy*D,j.size*=.99,(j.life>j.maxLife||j.size<.1)&&(_(j,I,G),j.x=K,j.y=z,j.size=(1+Math.random()*2)*D),A.beginPath(),A.arc(j.x,j.y,j.size,0,Math.PI*2),A.fillStyle=j.color,A.globalAlpha=1-j.life/j.maxLife,A.fill(),A.globalAlpha=1});const Y=r.baseRadius*D,ce=l.currentLevel*20*D,te=Math.sin(s*2)*(2*D),_e=Y+ce+te,oe=A.createRadialGradient(K,z,0,K,z,_e*2);oe.addColorStop(0,"rgba(255, 255, 255, 0.8)"),oe.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),oe.addColorStop(1,"transparent"),A.fillStyle=oe,A.globalCompositeOperation="source-over",A.fillRect(0,0,I,G),O(A,K,z,_e,l.colors[0],0,l.currentLevel,D),O(A,K,z,_e*.9,l.colors[1],2,l.currentLevel,D),e.isListening&&!e.isSpeaking&&(A.beginPath(),A.arc(K,z,_e*1.5+Math.sin(s*5)*5*D,0,Math.PI*2),A.strokeStyle="rgba(255, 255, 255, 0.5)",A.lineWidth=2*D,A.setLineDash([5*D,15*D]),A.stroke(),A.setLineDash([])),e.isListening||e.isSpeaking||l.currentLevel>.01?n=requestAnimationFrame(M):n=0};return ge(()=>[e.isListening,e.isSpeaking,e.audioLevel],()=>{n===0&&(e.isListening||e.isSpeaking||e.audioLevel>.01)&&M()}),ve(()=>{b(),t.value&&t.value.parentElement&&(q=new ResizeObserver(C=>{for(const A of C){const{width:I,height:G}=A.contentRect;if(t.value){const z=Math.min(1,250/Math.max(I,G));t.value.width=I*z,t.value.height=G*z,h(t.value.width,t.value.height)}}}),q.observe(t.value.parentElement)),h(250,250),M()}),ka(()=>{cancelAnimationFrame(n),q&&q.disconnect()}),ge(()=>e.paletteId,()=>{setTimeout(b,100)}),ge(()=>e.audioLevel,()=>{}),(C,A)=>(g(),$("div",{class:"modern-visualizer",onMousemove:u,onMouseleave:A[0]||(A[0]=I=>{i.targetX=0,i.targetY=0})},[y("canvas",{ref_key:"canvasRef",ref:t,class:"visualizer-canvas"},null,512)],32))}}),wp=at(bp,[["__scopeId","data-v-b11fd431"]]),xp={class:"microphone-button-wrapper"},Ep=k({__name:"AssistantControls",props:{isSpeaking:{type:Boolean},isListening:{type:Boolean},isRecording:{type:Boolean},hasError:{type:Boolean},audioLevel:{},statusMessage:{},isProcessing:{type:Boolean}},emits:["stopSpeaking","toggleMicrophone"],setup(o,{emit:e}){return(t,n)=>(g(),$("div",xp,[y("p",{class:re(["microphone-status",{error:o.hasError,recording:o.isRecording}])},X(o.statusMessage),3)]))}}),Cp=at(Ep,[["__scopeId","data-v-d82678d9"]]),qo=o=>{const e=new Uint8Array(o);let t="";for(let n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},Ct=o=>{const e="=".repeat((4-o.length%4)%4),t=(o+e).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer},Vt=o=>{if(!document.cookie)return null;const e=document.cookie.split(";").map(t=>t.trim()).filter(t=>t.startsWith(o+"="));return e.length===0?null:decodeURIComponent(e[0].split("=")[1])};function kp(){const o=x(!1),e=x(!1),t=x(null),n=x([]),s=async()=>{window.PublicKeyCredential&&await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()&&(o.value=!0)},r=async()=>{try{const u=await fetch("/api/biometrics");if(u.status===401||u.status===419)return;n.value=await u.json()}catch(u){console.error(u)}},l=async()=>{if(window.location.hostname==="127.0.0.1")return t.value=" Error de Seguridad: La biometra no funciona en direcciones IP (127.0.0.1). Por favor, cambia la URL de tu navegador a 'localhost' (ej: http://localhost:8000) e intenta de nuevo.",!1;e.value=!0,t.value=null;try{const p=await(await fetch("/api/biometrics/register/options")).json();p.challenge=Ct(p.challenge),p.user.id=Ct(p.user.id),p.excludeCredentials&&(p.excludeCredentials=p.excludeCredentials.map(q=>(q.id=Ct(q.id),q)));const h=await navigator.credentials.create({publicKey:{...p,authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},attestation:"direct"}}),_=qo(h.rawId),b=Vt("XSRF-TOKEN"),O=await fetch("/api/biometrics/register",{method:"POST",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":b||""},body:JSON.stringify({credential_id:_,public_key:qo(h.response.attestationObject)})});if(!O.ok){if(O.status===419)throw new Error("La sesin ha expirado. Por favor recarga la pgina.");const q=await O.json();throw new Error(q.message||"Error en el servidor")}return await new Promise(q=>setTimeout(q,500)),await r(),e.value=!1,!0}catch(u){console.error(u);let p="Error al registrar huella: "+u.message;return u.name==="InvalidStateError"||u.message.includes("invalid state")?p="Esta huella ya est registrada en el sistema.":u.name==="NotAllowedError"||u.message.includes("not allowed")?p="Operacin cancelada o permiso denegado. Asegrate de autorizar el uso de la huella.":u.name==="NotSupportedError"&&(p="Tu dispositivo no soporta este tipo de autenticacin."),t.value=p,e.value=!1,!1}},c=async()=>{if(window.location.hostname==="127.0.0.1")return t.value=" Error de Seguridad: La biometra no funciona en direcciones IP (127.0.0.1). Por favor, cambia la URL de tu navegador a 'localhost' (ej: http://localhost:8000) e intenta de nuevo.",!1;e.value=!0,t.value=null;try{const u=await fetch("/api/biometrics/login/options");if(!u.ok)throw new Error("No hay credenciales registradas.");const p=await u.json();p.challenge=Ct(p.challenge),p.allowCredentials&&(p.allowCredentials=p.allowCredentials.map(q=>(q.id=Ct(q.id),q)));const h=await navigator.credentials.get({publicKey:p}),_=Vt("XSRF-TOKEN"),b=await fetch("/api/biometrics/login",{method:"POST",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":_||""},body:JSON.stringify({credential_id:qo(h.rawId)})});if(!b.ok)throw b.status===419?new Error("La sesin ha expirado. Por favor recarga la pgina."):new Error("Error de verificacin");const O=await b.json();if(e.value=!1,O.success)return!0;throw new Error(O.error)}catch(u){return console.error(u),t.value="No se pudo verificar la identidad.",e.value=!1,!1}},i=async u=>{const p=Vt("XSRF-TOKEN");await fetch(`/api/biometrics/${u}`,{method:"DELETE",headers:{"X-XSRF-TOKEN":p||""}}),await r()},d=async(u,p)=>{const h=Vt("XSRF-TOKEN");await fetch(`/api/biometrics/${u}`,{method:"PUT",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":h||""},body:JSON.stringify({name:p})}),await r()};return ve(()=>{s(),r(),window.addEventListener("biometrics-updated",r)}),{isAvailable:o,isAuthenticating:e,error:t,registeredCredentials:n,register:l,authenticate:c,deleteCredential:i,updateCredentialName:d}}const Sp={class:"text-center"},Tp={class:"mb-4 relative inline-block"},Op={key:0,class:"text-red-500 text-sm mt-2 font-bold animate-shake"},Ap={key:1,class:"mt-4 mb-2"},Dp=["disabled"],Rp={key:0,class:"text-xs text-cyan-400 mt-1 animate-pulse"},qp={class:"mt-6 flex justify-center gap-4"},Np={key:0,class:"security-modal-overlay"},Mp={class:"security-modal denied"},Pp=k({__name:"SecurityModals",props:{showNipModal:{type:Boolean},nipInput:{},nipError:{},statusMessage:{},showAccessDeniedModal:{type:Boolean}},emits:["update:showNipModal","update:nipInput","update:showAccessDeniedModal","verifyNip","cancelNip"],setup(o,{emit:e}){const t=e,n=i=>t("update:nipInput",i),{isAvailable:s,isAuthenticating:r,authenticate:l}=kp(),c=async()=>{await l()&&t("verifyNip")};return(i,d)=>{const u=Oe("el-icon"),p=Oe("el-input"),h=Oe("el-button"),_=Oe("el-dialog");return g(),$("div",null,[v(_,{"model-value":o.showNipModal,title:"Autorizacin Requerida",width:null,center:"","close-on-click-modal":!1,"show-close":!1,class:"custom-dark-modal security-dialog responsive-dialog nip-dialog"},{default:m(()=>[y("div",Sp,[y("div",Tp,[d[4]||(d[4]=y("div",{class:"absolute inset-0 bg-red-500 blur-xl opacity-20 rounded-full animate-pulse"},null,-1)),v(u,{class:"text-red-500 text-5xl relative z-10"},{default:m(()=>[v(a(Fn))]),_:1})]),d[7]||(d[7]=y("p",{class:"text-gray-300 mb-6"},"Esta accin es crtica y requiere tu NIP de seguridad.",-1)),v(p,{"model-value":o.nipInput,onInput:n,type:"password",placeholder:"Ingresa tu NIP",size:"large","show-password":"",class:"text-center text-2xl tracking-widest mb-2 dark-input",onKeyup:d[0]||(d[0]=Ln(b=>i.$emit("verifyNip"),["enter"])),autofocus:""},{prefix:m(()=>[v(u,null,{default:m(()=>[v(a(Sa))]),_:1})]),_:1},8,["model-value"]),o.nipError?(g(),$("p",Op,X(o.nipError),1)):le("",!0),a(s)?(g(),$("div",Ap,[y("button",{onClick:c,class:re(["bio-auth-btn",{scanning:a(r)}]),disabled:a(r)},[v(u,{class:"mr-2 text-xl"},{default:m(()=>[v(a(Ta))]),_:1}),fe(" "+X(a(r)?"Escaneando...":"Usar Huella Digital"),1)],10,Dp),a(r)?(g(),$("p",Rp,"Coloca tu dedo en el sensor")):le("",!0)])):le("",!0),y("div",qp,[v(h,{onClick:d[1]||(d[1]=b=>i.$emit("cancelNip")),class:"dark-button"},{default:m(()=>[...d[5]||(d[5]=[fe("Cancelar",-1)])]),_:1}),v(h,{type:"danger",onClick:d[2]||(d[2]=b=>i.$emit("verifyNip")),loading:o.statusMessage==="Verificando..."},{default:m(()=>[...d[6]||(d[6]=[fe("Autorizar",-1)])]),_:1},8,["loading"])])])]),_:1},8,["model-value"]),o.showAccessDeniedModal?(g(),$("div",Np,[y("div",Mp,[d[8]||(d[8]=y("div",{class:"security-icon"},"",-1)),d[9]||(d[9]=y("h3",null,"Acceso Denegado",-1)),d[10]||(d[10]=y("p",null,"Solo los administradores pueden realizar cambios en la base de datos.",-1)),y("button",{onClick:d[3]||(d[3]=b=>i.$emit("update:showAccessDeniedModal",!1)),class:"btn-cancel"},"Entendido")])])):le("",!0)])}}}),$p=at(Pp,[["__scopeId","data-v-9c5a0620"]]),Ip={class:"text-center mb-4"},Bp={class:"dialog-footer flex justify-end gap-3"},Lp=k({__name:"UserCreationModal",props:{showUserModal:{type:Boolean},newUserForm:{}},emits:["update:showUserModal","confirmCreateUser","cancelCreateUser"],setup(o,{emit:e}){return(t,n)=>{const s=Oe("el-icon"),r=Oe("el-input"),l=Oe("el-form-item"),c=Oe("el-form"),i=Oe("el-button"),d=Oe("el-dialog");return g(),E(d,{"model-value":o.showUserModal,title:"Confirmar Nuevo Usuario",width:null,center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":"",class:"custom-dark-modal rounded-xl overflow-hidden responsive-dialog user-dialog"},{footer:m(()=>[y("div",Bp,[v(i,{onClick:n[3]||(n[3]=u=>t.$emit("cancelCreateUser")),class:"dark-button"},{default:m(()=>[...n[6]||(n[6]=[fe("Cancelar",-1)])]),_:1}),v(i,{type:"primary",onClick:n[4]||(n[4]=u=>t.$emit("confirmCreateUser")),disabled:!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.newUserForm.email)},{default:m(()=>[...n[7]||(n[7]=[fe(" Confirmar y Crear ",-1)])]),_:1},8,["disabled"])])]),default:m(()=>[y("div",Ip,[v(s,{class:"text-blue-500 text-4xl mb-2"},{default:m(()=>[v(a(Oa))]),_:1}),n[5]||(n[5]=y("p",{class:"text-gray-400"},"Verifica los datos antes de registrar al usuario en el sistema.",-1))]),v(c,{model:o.newUserForm,"label-position":"top",size:"large",class:"dark-form"},{default:m(()=>[v(l,{label:"Nombre Completo"},{default:m(()=>[v(r,{modelValue:o.newUserForm.name,"onUpdate:modelValue":n[0]||(n[0]=u=>o.newUserForm.name=u),placeholder:"Ej: Juan Prez"},{prefix:m(()=>[v(s,null,{default:m(()=>[v(a(Aa))]),_:1})]),_:1},8,["modelValue"])]),_:1}),v(l,{label:"Correo Electrnico"},{default:m(()=>[v(r,{modelValue:o.newUserForm.email,"onUpdate:modelValue":n[1]||(n[1]=u=>o.newUserForm.email=u),placeholder:"Ej: juan@empresa.com",type:"email"},{prefix:m(()=>[v(s,null,{default:m(()=>[v(a(Da))]),_:1})]),_:1},8,["modelValue"])]),_:1}),v(l,{label:"Contrasea Inicial"},{default:m(()=>[v(r,{modelValue:o.newUserForm.password,"onUpdate:modelValue":n[2]||(n[2]=u=>o.newUserForm.password=u),placeholder:"Contrasea segura","show-password":""},{prefix:m(()=>[v(s,null,{default:m(()=>[v(a(Fn))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value"])}}}),Fp={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",style:{perspective:"1000px"}},Up={class:"relative w-full max-w-3xl bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden border border-zinc-200 dark:border-zinc-800 flex flex-col max-h-[90vh]"},zp={class:"flex items-center justify-between p-6 border-b border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50"},jp={class:"flex items-center gap-3"},Vp={class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400"},Kp={class:"text-xl font-bold text-zinc-900 dark:text-white"},Hp={key:0,class:"text-sm text-zinc-500"},Wp={class:"flex items-center gap-2"},Gp={class:"flex items-center gap-1 mr-4 border-r border-zinc-200 dark:border-zinc-800 pr-4"},Xp={class:"p-8 overflow-y-auto custom-scrollbar"},Jp={key:0,class:"mb-8 p-4 rounded-xl bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-100 dark:border-indigo-800/50 flex gap-4 items-start"},Yp={class:"p-2 bg-white dark:bg-zinc-800 rounded-lg shadow-sm text-indigo-500"},Qp={class:"text-sm text-indigo-800 dark:text-indigo-200 leading-relaxed"},Zp={key:1,class:"flex flex-col items-center justify-center py-8"},ef={class:"text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-pulse"},tf={class:"text-xl text-zinc-500 mt-4 font-medium uppercase tracking-widest"},of={key:2,class:"w-full"},nf={class:"h-80 flex items-end justify-between gap-4 px-4 pb-8 border-b border-zinc-100 dark:border-zinc-800"},sf={class:"absolute -top-10 opacity-0 group-hover:opacity-100 transition-all duration-200 bg-zinc-900 text-white text-xs font-bold py-1.5 px-3 rounded-lg shadow-xl transform translate-y-2 group-hover:translate-y-0 z-10 whitespace-nowrap"},af={class:"absolute -bottom-8 w-full text-center"},rf=["title"],lf={class:"mt-12"},uf={class:"overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm"},cf={class:"w-full text-sm text-left"},df={class:"bg-zinc-50 dark:bg-zinc-900/50 text-zinc-500 font-medium"},pf={class:"px-6 py-3"},ff={class:"px-6 py-3 text-right"},hf={class:"divide-y divide-zinc-100 dark:divide-zinc-800"},mf={class:"px-6 py-3 text-zinc-900 dark:text-zinc-300 font-medium"},gf={class:"px-6 py-3 text-right font-mono text-zinc-600 dark:text-zinc-400"},vf=k({__name:"ReportModal",props:{show:{type:Boolean},data:{},config:{}},emits:["close","export"],setup(o,{emit:e}){const t=o,n=e,s=(i,d)=>{if(i[d]!==void 0)return Number(i[d]);const u=d.toLowerCase(),p=Object.keys(i).find(h=>h.toLowerCase()===u);return p!==void 0?Number(i[p]):0},r=B(()=>!t.data||t.data.length===0?0:Math.max(...t.data.map(i=>s(i,t.config.y_axis)))),l=B(()=>t.data?t.data.map(i=>{const d=s(i,t.config.y_axis);return{label:i[t.config.x_axis]||Object.values(i)[0],value:d,height:r.value?d/r.value*100:0,color:c(i[t.config.x_axis]||"default")}}):[]);function c(i){let d=0;i=String(i);for(let p=0;p<i.length;p++)d=i.charCodeAt(p)+((d<<5)-d);const u=(d&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-u.length)+u}return(i,d)=>(g(),E(Ho,{to:"body"},[v(Ra,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:m(()=>[o.show?(g(),$("div",Fp,[y("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:d[0]||(d[0]=u=>n("close"))}),y("div",Up,[y("div",zp,[y("div",jp,[y("div",Vp,[o.config.type==="bar"?(g(),E(a($l),{key:0,class:"w-6 h-6"})):o.config.type==="pie"?(g(),E(a(Il),{key:1,class:"w-6 h-6"})):(g(),E(a(Yl),{key:2,class:"w-6 h-6"}))]),y("div",null,[y("h3",Kp,X(o.config.title),1),o.config.description?(g(),$("p",Hp,X(o.config.description),1)):le("",!0)])]),y("div",Wp,[y("div",Gp,[y("button",{onClick:d[1]||(d[1]=u=>n("export","pdf")),title:"Exportar PDF",class:"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-500 hover:text-red-500 transition-colors"},[v(a(bs),{class:"w-4 h-4"})]),y("button",{onClick:d[2]||(d[2]=u=>n("export","excel")),title:"Exportar Excel",class:"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-500 hover:text-emerald-500 transition-colors"},[v(a(Xl),{class:"w-4 h-4"})]),y("button",{onClick:d[3]||(d[3]=u=>n("export","word")),title:"Exportar Word",class:"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-500 hover:text-blue-500 transition-colors"},[v(a(Ul),{class:"w-4 h-4"})])]),y("button",{onClick:d[4]||(d[4]=u=>n("close")),class:"p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors"},[v(a(Zo),{class:"w-5 h-5"})])])]),y("div",Xp,[o.config.insight?(g(),$("div",Jp,[y("div",Yp,[v(a(Gl),{class:"w-5 h-5"})]),y("div",null,[d[5]||(d[5]=y("h4",{class:"text-sm font-bold text-indigo-900 dark:text-indigo-100 mb-1"},"Anlisis Inteligente",-1)),y("p",Qp,X(o.config.insight),1)])])):le("",!0),o.config.type==="metric"?(g(),$("div",Zp,[y("div",ef,X(o.data[0]?.[o.config.y_axis]||0),1),y("span",tf,X(o.config.x_axis),1)])):o.config.type==="bar"?(g(),$("div",of,[y("div",nf,[(g(!0),$(Pe,null,ot(l.value,(u,p)=>(g(),$("div",{key:p,class:"flex-1 flex flex-col items-center group relative h-full justify-end"},[y("div",sf,[fe(X(u.value)+" ",1),d[6]||(d[6]=y("div",{class:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1 border-4 border-transparent border-t-zinc-900"},null,-1))]),y("div",{class:"w-full max-w-[60px] bg-gradient-to-t from-indigo-600 to-purple-500 rounded-t-lg shadow-lg hover:shadow-indigo-500/30 transition-all duration-300 relative overflow-hidden group-hover:from-indigo-500 group-hover:to-purple-400",style:Dt({height:`${Math.max(u.height,2)}%`})},[...d[7]||(d[7]=[y("div",{class:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)])],4),y("div",af,[y("span",{class:"text-xs font-medium text-zinc-500 truncate block px-1",title:String(u.label)},X(u.label),9,rf)])]))),128))])])):le("",!0),y("div",lf,[d[8]||(d[8]=y("h4",{class:"text-xs font-bold text-zinc-400 uppercase tracking-widest mb-4"},"Datos Detallados ",-1)),y("div",uf,[y("table",cf,[y("thead",df,[y("tr",null,[y("th",pf,X(o.config.x_axis),1),y("th",ff,X(o.config.y_axis),1)])]),y("tbody",hf,[(g(!0),$(Pe,null,ot(o.data,(u,p)=>(g(),$("tr",{key:p,class:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors"},[y("td",mf,X(u[o.config.x_axis]),1),y("td",gf,X(u[o.config.y_axis]),1)]))),128))])])])])])])])):le("",!0)]),_:1})]))}}),yf=at(vf,[["__scopeId","data-v-35ea65cf"]]),_f={class:"absolute inset-0 z-0"},bf={class:"z-50 absolute bottom-8 left-0 right-0 flex justify-center pointer-events-none"},wf={class:"pointer-events-auto flex flex-col items-center gap-2"},xf={key:0,class:"text-white/80 text-lg font-medium px-4 py-2 bg-black/30 backdrop-blur-md rounded-full animate-pulse transition-all"},Ef={key:1,class:"floating-assistant-wrapper",style:{display:"none"}},Cf=k({__name:"MoodOrbs",props:{variant:{default:"full"}},setup(o){const e=o,{isSpeaking:t,stopSpeaking:n,audioLevel:s,isRecording:r,isListening:l,hasError:c,startMicrophone:i,statusMessage:d,security:u,handleVerifyNip:p,userOps:h,reportState:_,closeReport:b,feedbackState:O,isProcessing:q,processTextQuery:M,partialTranscript:C}=yp(),A=B(()=>{switch(O.value.type){case"spotify":return"spotify";case"error":return"error";case"success":return"success";default:return I.value}}),{currentPalette:I}=Ws(),G=x(!1);return ve(()=>{i();const K=()=>{l.value||i()};window.addEventListener("click",K,{once:!0})}),ge([l,t],([K,z])=>{(K||z)&&e.variant==="floating"&&(G.value=!0)}),(K,z)=>o.variant==="full"?(g(),$("div",{key:0,class:re(["mood-orbs-container flex flex-col relative",`palette-${A.value}`])},[y("div",_f,[v(wp,{"audio-level":a(s),"is-listening":a(l),"is-speaking":a(t),"palette-id":A.value},null,8,["audio-level","is-listening","is-speaking","palette-id"])]),y("div",bf,[y("div",wf,[a(C)?(g(),$("div",xf,X(a(C)),1)):le("",!0),v(Cp,{"is-speaking":a(t),"is-listening":a(l),"is-recording":a(r),"has-error":a(c),"audio-level":a(s),"status-message":a(d),"is-processing":a(q),onStopSpeaking:a(n),onTextInput:a(M)},null,8,["is-speaking","is-listening","is-recording","has-error","audio-level","status-message","is-processing","onStopSpeaking","onTextInput"])])])],2)):(g(),$("div",Ef,[(g(),E(Ho,{to:"body"},[y("div",{class:re(`palette-${a(I)}`)},[v(Lp,{"show-user-modal":a(h).showUserModal.value,"onUpdate:showUserModal":z[0]||(z[0]=ae=>a(h).showUserModal.value=ae),"new-user-form":a(h).newUserForm.value,onConfirmCreateUser:a(h).confirmCreateUser,onCancelCreateUser:a(h).cancelCreateUser},null,8,["show-user-modal","new-user-form","onConfirmCreateUser","onCancelCreateUser"]),v($p,{"show-nip-modal":a(u).showNipModal.value,"onUpdate:showNipModal":z[1]||(z[1]=ae=>a(u).showNipModal.value=ae),"nip-input":a(u).nipInput.value,"onUpdate:nipInput":z[2]||(z[2]=ae=>a(u).nipInput.value=ae),"show-access-denied-modal":a(u).showAccessDeniedModal.value,"onUpdate:showAccessDeniedModal":z[3]||(z[3]=ae=>a(u).showAccessDeniedModal.value=ae),"nip-error":a(u).nipError.value,"status-message":a(u).statusMessage.value,onVerifyNip:a(p),onCancelNip:a(u).cancelNip},null,8,["show-nip-modal","nip-input","show-access-denied-modal","nip-error","status-message","onVerifyNip","onCancelNip"]),v(yf,{show:a(_).isOpen,data:a(_).data,config:a(_).config,onClose:a(b)},null,8,["show","data","config","onClose"])],2)]))]))}}),kf=at(Cf,[["__scopeId","data-v-d1bfb20f"]]),Sf={class:"flex-1 overflow-hidden bg-background relative z-0 flex flex-col"},Tf={class:"flex items-center bg-transparent backdrop-blur-sm px-4 py-2 border-b border-border shrink-0 relative z-10"},Of={key:0,class:"h-full"},Af={key:1,class:"flex h-full items-center justify-center text-muted-foreground"},Yf=k({__name:"AppSidebarLayout",props:{breadcrumbs:{default:()=>[]}},setup(o){const e=o,t=nt(),{tabs:n,activeTab:s,addTab:r,removeTab:l,activateTab:c}=hd();ge(()=>t.url,h=>{let _="Pgina";if(e.breadcrumbs&&e.breadcrumbs.length>0)_=e.breadcrumbs[e.breadcrumbs.length-1].title;else{const b=h.split("/"),O=b[b.length-1];_=O.charAt(0).toUpperCase()+O.slice(1)||"Inicio"}r({title:_,name:h,url:h,closable:h!=="/dashboard"}),s.value=h},{immediate:!0});const{speak:i}=on();Ns(i,!0);const d=h=>{c(h.paneName)},u=h=>{l(h)},p=B(()=>t.url==="/dashboard"?"full":"floating");return(h,_)=>{const b=Oe("el-tab-pane"),O=Oe("el-tabs");return g(),E(Yc,{variant:"sidebar"},{default:m(()=>[v(fd),v(Xc,{variant:"sidebar",class:"overflow-hidden flex flex-col h-screen relative"},{default:m(()=>[y("div",Sf,[y("div",Tf,[v(a(Wc),{class:"text-muted-foreground hover:text-foreground"})]),v(O,{modelValue:a(s),"onUpdate:modelValue":_[0]||(_[0]=q=>Yt(s)?s.value=q:null),type:"card",class:"global-tabs flex-1 flex flex-col overflow-hidden relative z-10",onTabClick:d,onTabRemove:u},{default:m(()=>[(g(!0),$(Pe,null,ot(a(n),q=>(g(),E(b,{key:q.name,label:q.title,name:q.name,closable:q.closable,class:"h-full overflow-auto"},{default:m(()=>[q.name===a(t).url?(g(),$("div",Of,[T(h.$slots,"default")])):(g(),$("div",Af,[..._[1]||(_[1]=[y("div",{class:"text-center"},[y("p",null,"Cargando...")],-1)])]))]),_:2},1032,["label","name","closable"]))),128))]),_:3},8,["modelValue"])]),p.value==="floating"?(g(),E(kf,{key:0,variant:"floating"})):le("",!0)]),_:3})]),_:3})}}});export{wn as B,Bl as C,Qn as D,bs as F,Kt as M,yf as R,En as S,Jl as T,Ql as U,Zo as X,Tc as _,_s as a,kc as b,Fl as c,Ns as d,gp as e,on as f,Ws as g,Gl as h,ws as i,kp as j,Yf as k,Oc as l,xe as m,Ss as n,rc as o,Vr as p,Qr as q,At as s,yp as u};
